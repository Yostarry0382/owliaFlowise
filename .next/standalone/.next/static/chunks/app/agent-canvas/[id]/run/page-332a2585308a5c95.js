(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[557],{20349:(e,t,l)=>{Promise.resolve().then(l.bind(l,60747))},60747:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>f});var r=l(95155),o=l(12115),a=l(34004),n=l(30495),s=l(61040),i=l(73583),c=l(48699),d=l(70822),u=l(69367),p=l(49067),h=l(2691),x=l(9613),A=l(38828),m=l(21929),g=l(52834),v=l(96347),j=l(76046);function f(){let e=(0,j.useRouter)(),t=(0,j.useParams)().id,[l,f]=(0,o.useState)(null),[y,b]=(0,o.useState)(!0),[C,S]=(0,o.useState)(!1),[w,k]=(0,o.useState)(null),[z,M]=(0,o.useState)(""),[I,L]=(0,o.useState)(null);(0,o.useEffect)(()=>{let e=async()=>{b(!0),k(null);try{let e=await fetch("/api/owlagents?id=".concat(t));if(e.ok){let t=await e.json();f(t)}else k("エージェントが見つかりません")}catch(e){k("エージェントの読み込み中にエラーが発生しました")}finally{b(!1)}};t&&e()},[t]);let W=async()=>{if(!z.trim()){k("入力を入力してください");return}S(!0),k(null),L(null);try{let e=await fetch("/api/owlagents/".concat(t,"/execute"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({input:z.trim()})});if(e.ok){let t=await e.json();L(t)}else k("実行に失敗しました")}catch(e){k("実行中にエラーが発生しました")}finally{S(!1)}};return y?(0,r.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,r.jsx)(n.A,{})}):l?(0,r.jsxs)(a.A,{sx:{p:4,maxWidth:"1200px",mx:"auto"},children:[(0,r.jsxs)(a.A,{sx:{mb:4},children:[(0,r.jsx)(i.A,{variant:"outlined",startIcon:(0,r.jsx)(v.A,{}),onClick:()=>e.push("/agent-canvas"),sx:{mb:2},children:"戻る"}),(0,r.jsx)(c.A,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:l.name}),(0,r.jsx)(c.A,{variant:"body1",color:"text.secondary",children:l.description}),(0,r.jsxs)(a.A,{sx:{display:"flex",gap:1,mt:2},children:[(0,r.jsx)(d.A,{label:"Version ".concat(l.version),size:"small"}),(0,r.jsx)(d.A,{label:"".concat(l.flow.nodes.length," ノード"),size:"small",variant:"outlined"}),(0,r.jsx)(d.A,{label:"".concat(l.flow.edges.length," エッジ"),size:"small",variant:"outlined"}),l.flowiseChatflowId&&(0,r.jsx)(d.A,{label:"Flowise連携",size:"small",color:"primary"})]})]}),w&&(0,r.jsx)(s.A,{severity:"error",sx:{mb:3},onClose:()=>k(null),children:w}),(0,r.jsxs)(u.A,{sx:{p:3,mb:3},children:[(0,r.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"入力"}),(0,r.jsx)(p.A,{fullWidth:!0,multiline:!0,rows:4,value:z,onChange:e=>M(e.target.value),placeholder:"エージェントへの入力を入力してください",sx:{mb:2}}),(0,r.jsx)(i.A,{variant:"contained",size:"large",startIcon:C?(0,r.jsx)(n.A,{size:20}):(0,r.jsx)(g.A,{}),onClick:W,disabled:C||!z.trim(),fullWidth:!0,children:C?"実行中...":"実行"})]}),I&&(0,r.jsxs)(u.A,{sx:{p:3},children:[(0,r.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,r.jsx)(c.A,{variant:"h6",children:"実行結果"}),(0,r.jsx)(d.A,{label:I.success?"成功":"失敗",color:I.success?"success":"error"})]}),(0,r.jsx)(h.A,{sx:{my:2}}),(0,r.jsxs)(a.A,{sx:{mb:3},children:[(0,r.jsx)(c.A,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:"出力"}),(0,r.jsx)(u.A,{variant:"outlined",sx:{p:2,bgcolor:"grey.50"},children:(0,r.jsx)("pre",{style:{margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word"},children:"string"==typeof I.output?I.output:JSON.stringify(I.output,null,2)})})]}),(0,r.jsxs)(a.A,{sx:{mb:3},children:[(0,r.jsx)(c.A,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:"実行情報"}),(0,r.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["実行時間: ",I.executionTime,"ms"]})]}),I.logs&&I.logs.length>0&&(0,r.jsxs)(a.A,{children:[(0,r.jsx)(c.A,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:"実行ログ"}),(0,r.jsx)(u.A,{variant:"outlined",sx:{p:2,bgcolor:"grey.50",maxHeight:300,overflow:"auto"},children:(0,r.jsx)(x.A,{dense:!0,children:I.logs.map((e,t)=>(0,r.jsx)(A.Ay,{disablePadding:!0,children:(0,r.jsx)(m.A,{primary:e,primaryTypographyProps:{variant:"body2",fontFamily:"monospace"}})},t))})})]}),I.error&&(0,r.jsx)(a.A,{sx:{mt:2},children:(0,r.jsx)(s.A,{severity:"error",children:I.error})})]})]}):(0,r.jsxs)(a.A,{sx:{p:4},children:[(0,r.jsx)(s.A,{severity:"error",children:"エージェントが見つかりません"}),(0,r.jsx)(i.A,{variant:"outlined",startIcon:(0,r.jsx)(v.A,{}),onClick:()=>e.push("/agent-canvas"),sx:{mt:2},children:"戻る"})]})}},96347:(e,t,l)=>{"use strict";l.d(t,{A:()=>a});var r=l(20389),o=l(95155);let a=(0,r.A)((0,o.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")},61040:(e,t,l)=>{"use strict";l.d(t,{A:()=>W});var r=l(12115),o=l(43463),a=l(11509),n=l(59596),s=l(2550),i=l(10084),c=l(25885),d=l(51204),u=l(57638),p=l(69367),h=l(16255),x=l(43847);function A(e){return(0,x.Ay)("MuiAlert",e)}let m=(0,h.A)("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);var g=l(13538),v=l(20389),j=l(95155);let f=(0,v.A)((0,j.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),y=(0,v.A)((0,j.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),b=(0,v.A)((0,j.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),C=(0,v.A)((0,j.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),S=(0,v.A)((0,j.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),w=e=>{let{variant:t,color:l,severity:r,classes:o}=e,n={root:["root","color".concat((0,d.A)(l||r)),"".concat(t).concat((0,d.A)(l||r)),"".concat(t)],icon:["icon"],message:["message"],action:["action"]};return(0,a.A)(n,A,o)},k=(0,n.Ay)(p.A,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:l}=e;return[t.root,t[l.variant],t["".concat(l.variant).concat((0,d.A)(l.color||l.severity))]]}})((0,s.A)(e=>{let{theme:t}=e,l="light"===t.palette.mode?t.darken:t.lighten,r="light"===t.palette.mode?t.lighten:t.darken;return{...t.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter((0,u.A)(["light"])).map(e=>{let[o]=e;return{props:{colorSeverity:o,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert["".concat(o,"Color")]:l(t.palette[o].light,.6),backgroundColor:t.vars?t.vars.palette.Alert["".concat(o,"StandardBg")]:r(t.palette[o].light,.9),["& .".concat(m.icon)]:t.vars?{color:t.vars.palette.Alert["".concat(o,"IconColor")]}:{color:t.palette[o].main}}}}),...Object.entries(t.palette).filter((0,u.A)(["light"])).map(e=>{let[r]=e;return{props:{colorSeverity:r,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert["".concat(r,"Color")]:l(t.palette[r].light,.6),border:"1px solid ".concat((t.vars||t).palette[r].light),["& .".concat(m.icon)]:t.vars?{color:t.vars.palette.Alert["".concat(r,"IconColor")]}:{color:t.palette[r].main}}}}),...Object.entries(t.palette).filter((0,u.A)(["dark"])).map(e=>{let[l]=e;return{props:{colorSeverity:l,variant:"filled"},style:{fontWeight:t.typography.fontWeightMedium,...t.vars?{color:t.vars.palette.Alert["".concat(l,"FilledColor")],backgroundColor:t.vars.palette.Alert["".concat(l,"FilledBg")]}:{backgroundColor:"dark"===t.palette.mode?t.palette[l].dark:t.palette[l].main,color:t.palette.getContrastText(t.palette[l].main)}}}})]}})),z=(0,n.Ay)("div",{name:"MuiAlert",slot:"Icon"})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),M=(0,n.Ay)("div",{name:"MuiAlert",slot:"Message"})({padding:"8px 0",minWidth:0,overflow:"auto"}),I=(0,n.Ay)("div",{name:"MuiAlert",slot:"Action"})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),L={success:(0,j.jsx)(f,{fontSize:"inherit"}),warning:(0,j.jsx)(y,{fontSize:"inherit"}),error:(0,j.jsx)(b,{fontSize:"inherit"}),info:(0,j.jsx)(C,{fontSize:"inherit"})},W=r.forwardRef(function(e,t){let l=(0,i.b)({props:e,name:"MuiAlert"}),{action:r,children:a,className:n,closeText:s="Close",color:d,components:u={},componentsProps:p={},icon:h,iconMapping:x=L,onClose:A,role:m="alert",severity:v="success",slotProps:f={},slots:y={},variant:b="standard",...C}=l,W={...l,color:d,severity:v,variant:b,colorSeverity:d||v},B=w(W),O={slots:{closeButton:u.CloseButton,closeIcon:u.CloseIcon,...y},slotProps:{...p,...f}},[T,P]=(0,c.A)("root",{ref:t,shouldForwardComponentProp:!0,className:(0,o.A)(B.root,n),elementType:k,externalForwardedProps:{...O,...C},ownerState:W,additionalProps:{role:m,elevation:0}}),[E,N]=(0,c.A)("icon",{className:B.icon,elementType:z,externalForwardedProps:O,ownerState:W}),[H,R]=(0,c.A)("message",{className:B.message,elementType:M,externalForwardedProps:O,ownerState:W}),[F,_]=(0,c.A)("action",{className:B.action,elementType:I,externalForwardedProps:O,ownerState:W}),[V,J]=(0,c.A)("closeButton",{elementType:g.A,externalForwardedProps:O,ownerState:W}),[Z,q]=(0,c.A)("closeIcon",{elementType:S,externalForwardedProps:O,ownerState:W});return(0,j.jsxs)(T,{...P,children:[!1!==h?(0,j.jsx)(E,{...N,children:h||x[v]||L[v]}):null,(0,j.jsx)(H,{...R,children:a}),null!=r?(0,j.jsx)(F,{..._,children:r}):null,null==r&&A?(0,j.jsx)(F,{..._,children:(0,j.jsx)(V,{size:"small","aria-label":s,title:s,color:"inherit",onClick:A,...J,children:(0,j.jsx)(Z,{fontSize:"small",...q})})}):null]})})}},e=>{var t=t=>e(e.s=t);e.O(0,[708,96,539,441,517,358],()=>t(20349)),_N_E=e.O()}]);