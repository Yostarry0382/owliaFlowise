(()=>{var e={};e.id=974,e.ids=[974],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},61222:(e,t,o)=>{"use strict";o.r(t),o.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d});var r=o(70260),a=o(28203),s=o(25155),n=o.n(s),l=o(67292),i={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);o.d(t,i);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(o.bind(o,35104)),"C:\\Users\\yrk20\\OwliaFabrica2\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(o.bind(o,19611)),"C:\\Users\\yrk20\\OwliaFabrica2\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(o.t.bind(o,19937,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\yrk20\\OwliaFabrica2\\app\\page.tsx"],p={require:o,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},68555:(e,t,o)=>{Promise.resolve().then(o.bind(o,35104))},67875:(e,t,o)=>{Promise.resolve().then(o.bind(o,25247))},25247:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>T});var r=o(45512),a=o(58009),s=o(20526),n=o(67625),l=o(82040),i=o(22387);o(17163);var d=o(20908),c=o(84438),p=o(77800),u=o(94205),x=o(66214);let g=(0,x.A)((0,r.jsx)("path",{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8z"}),"Folder"),f=(0,x.A)((0,r.jsx)("path",{d:"m21.9 8.89-1.05-4.37c-.22-.9-1-1.52-1.91-1.52H5.05c-.9 0-1.69.63-1.9 1.52L2.1 8.89c-.24 1.02-.02 2.06.62 2.88.08.11.19.19.28.29V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-6.94c.09-.09.2-.18.28-.28.64-.82.87-1.87.62-2.89m-2.99-3.9 1.05 4.37c.1.42.01.84-.25 1.17-.14.18-.44.47-.94.47-.61 0-1.14-.49-1.21-1.14L16.98 5zM13 5h1.96l.54 4.52c.05.39-.07.78-.33 1.07-.22.26-.54.41-.95.41-.67 0-1.22-.59-1.22-1.31zM8.49 9.52 9.04 5H11v4.69c0 .72-.55 1.31-1.29 1.31-.34 0-.65-.15-.89-.41-.25-.29-.37-.68-.33-1.07m-4.45-.16L5.05 5h1.97l-.58 4.86c-.08.65-.6 1.14-1.21 1.14-.49 0-.8-.29-.93-.47-.27-.32-.36-.75-.26-1.17M5 19v-6.03c.08.01.15.03.23.03.87 0 1.66-.36 2.24-.95.6.6 1.4.95 2.31.95.87 0 1.65-.36 2.23-.93.59.57 1.39.93 2.29.93.84 0 1.64-.35 2.24-.95.58.59 1.37.95 2.24.95.08 0 .15-.02.23-.03V19z"}),"Storefront");var h=o(32493),y=o(54543),b=o(83505),m=o(3175),v=o(67263),C=o(85828),j=o(61986),k=o(17289),w=o(79334);let A={custom:y.A},S={buttonedge:b.A},I=[],P=[];function T(){let e=(0,w.useRouter)(),t=(0,a.useRef)(null),[o,x]=(0,a.useState)(null),[y,b,T]=(0,s.ck)(I),[F,B,D]=(0,s.fM)(P),[O,_]=(0,a.useState)(null),[E,R]=(0,a.useState)(!1),[z,H]=(0,a.useState)(!1),[N,G]=(0,a.useState)(!1),[M,q]=(0,a.useState)([]),[L,U]=(0,a.useState)({open:!1,message:"",severity:"info"}),V=(0,a.useRef)();V.current=e=>{let t=y.find(t=>t.id===e);t&&(_(t),R(!0))};let $=(0,a.useRef)();$.current=e=>{b(t=>t.filter(t=>t.id!==e)),B(t=>t.filter(t=>t.source!==e&&t.target!==e)),O?.id===e&&(_(null),R(!1))};let J=(0,a.useCallback)(e=>{V.current?.(e)},[]),K=(0,a.useCallback)(e=>{$.current?.(e)},[]),W=(0,a.useCallback)(e=>{B(t=>(0,s.rN)({...e,type:"smoothstep",animated:!0},t))},[B]),X=(0,a.useCallback)(e=>{e.preventDefault();let r=e.dataTransfer.getData("application/reactflow");if(!r||!o||!t.current)return;let a=JSON.parse(r),s=o.screenToFlowPosition({x:e.clientX,y:e.clientY}),n={id:`${a.type}-${Date.now()}`,type:"custom",position:s,data:{label:a.label,type:a.type,category:a.category,config:{},agentId:a.agentId,agentName:a.agentId?a.label:void 0,onConfigure:J,onDelete:K}};b(e=>[...e,n])},[o,b,J,K]),Y=(0,a.useCallback)(e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},[]),Q=(0,a.useCallback)((e,t)=>{_(t)},[]),Z=(0,a.useCallback)((e,t)=>{_(t),R(!0)},[]),ee=(0,a.useCallback)((e,t,o)=>{b(r=>r.map(r=>r.id===e?{...r,data:{...r.data,config:t,humanReview:o}}:r)),_(r=>r?.id===e?{...r,data:{...r.data,config:t,humanReview:o}}:r)},[b]),et=(0,a.useCallback)(()=>{R(!1)},[]),eo=(0,a.useCallback)(()=>{if(0===y.length){U({open:!0,message:"Please add at least one node before saving.",severity:"error"});return}H(!0)},[y]),er=(0,a.useCallback)(async e=>{try{let t;e.syncToFlowise&&(t=(0,k.f2)(y,F));let o=await fetch("/api/owlagents",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,flow:{nodes:y.map(e=>({id:e.id,type:e.data.type,position:e.position,data:{label:e.data.label,type:e.data.type,category:e.data.category,config:e.data.config,humanReview:e.data.humanReview,agentId:e.data.agentId,agentName:e.data.agentName}})),edges:F.map(e=>({id:e.id,source:e.source,target:e.target,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle}))},flowiseFlowData:t})});if(!o.ok)throw Error("Failed to save agent");let r=await o.json(),a=`Agent "${r.name}" saved successfully!`;r.flowiseChatflowId&&(a+=` (Flowise Chatflow: ${r.flowiseChatflowId})`),U({open:!0,message:a,severity:"success"}),H(!1),q(e=>[...e,{id:r.id,name:r.name,description:r.description}])}catch(e){U({open:!0,message:"Failed to save agent. Please try again.",severity:"error"})}},[y,F]),ea=(0,a.useCallback)(()=>{if(0===y.length){U({open:!0,message:"Please add at least one node before testing.",severity:"error"});return}G(!0)},[y]),es=()=>{U(e=>({...e,open:!1}))};return(0,r.jsx)(s.Ln,{children:(0,r.jsxs)(d.Box,{sx:{display:"flex",flexDirection:"column",height:"100vh",bgcolor:"#0f0f1a"},children:[(0,r.jsxs)(d.Paper,{sx:{borderRadius:0,bgcolor:"#16213e",borderBottom:"2px solid #0f3460",px:2,py:1,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsxs)(d.Box,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,r.jsxs)(d.Typography,{variant:"h6",sx:{fontWeight:700,color:"#e94560",display:"flex",alignItems:"center",gap:1},children:[(0,r.jsx)("span",{style:{fontSize:"1.3rem"},children:"\uD83E\uDD89"}),"OwliaFabrica"]}),(0,r.jsx)(d.Typography,{sx:{fontSize:"0.9rem",color:"#888",borderLeft:"1px solid #444",pl:2},children:"Agent Builder"})]}),(0,r.jsxs)(d.Box,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,r.jsx)(d.Button,{variant:"outlined",startIcon:(0,r.jsx)(p.A,{}),onClick:ea,sx:{color:"#4CAF50",borderColor:"#4CAF50","&:hover":{borderColor:"#66BB6A",bgcolor:"rgba(76, 175, 80, 0.1)"}},children:"Test Run"}),(0,r.jsx)(d.Button,{variant:"contained",startIcon:(0,r.jsx)(c.A,{}),onClick:eo,sx:{bgcolor:"#6366f1","&:hover":{bgcolor:"#5558e3"}},children:"Save Agent"}),(0,r.jsx)(d.Tooltip,{title:"Saved Agents",children:(0,r.jsx)(d.IconButton,{onClick:()=>e.push("/agent-canvas"),sx:{color:"#90CAF9"},children:(0,r.jsx)(g,{})})}),(0,r.jsx)(d.Tooltip,{title:"Agent Store",children:(0,r.jsx)(d.IconButton,{onClick:()=>e.push("/store"),sx:{color:"#e94560"},children:(0,r.jsx)(f,{})})}),(0,r.jsx)(d.Tooltip,{title:"Go to Chat",children:(0,r.jsx)(d.IconButton,{onClick:()=>e.push("/chat"),sx:{color:"#90CAF9"},children:(0,r.jsx)(u.A,{})})})]})]}),(0,r.jsxs)(d.Box,{sx:{display:"flex",flex:1,overflow:"hidden"},children:[(0,r.jsx)(h.A,{savedOwlAgents:M}),(0,r.jsxs)(d.Box,{ref:t,sx:{flex:1,position:"relative"},children:[(0,r.jsxs)(s.Gc,{nodes:y,edges:F,onNodesChange:T,onEdgesChange:D,onConnect:W,onInit:x,onDrop:X,onDragOver:Y,onNodeClick:Q,onNodeDoubleClick:Z,nodeTypes:A,edgeTypes:S,fitView:!0,snapToGrid:!0,snapGrid:[15,15],defaultEdgeOptions:{type:"smoothstep",animated:!0,style:{stroke:"#6366f1",strokeWidth:2}},style:{background:"#0f0f1a"},children:[(0,r.jsx)(n.H,{}),(0,r.jsx)(l.o,{style:{backgroundColor:"#1e1e2f",border:"1px solid #2d2d44"},nodeColor:e=>{let t=(0,j.KF)(e.data?.type);return t?.color||"#607D8B"}}),(0,r.jsx)(i.V,{color:"#2d2d44",gap:20,size:1})]}),0===y.length&&(0,r.jsxs)(d.Box,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",pointerEvents:"none"},children:[(0,r.jsx)(d.Typography,{sx:{color:"#666",fontSize:"1.2rem",mb:1},children:"Drag nodes from the palette to get started"}),(0,r.jsx)(d.Typography,{sx:{color:"#444",fontSize:"0.9rem"},children:"Connect nodes to build your AI agent workflow"})]})]}),E&&O&&(0,r.jsx)(m.A,{nodeId:O.id,nodeData:O.data,onClose:et,onSave:ee,savedOwlAgents:M})]}),(0,r.jsx)(v.A,{open:z,onClose:()=>H(!1),onSave:er}),(0,r.jsx)(C.A,{open:N,onClose:()=>G(!1),nodes:y,edges:F}),(0,r.jsx)(d.Snackbar,{open:L.open,autoHideDuration:4e3,onClose:es,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,r.jsx)(d.Alert,{onClose:es,severity:L.severity,sx:{width:"100%"},children:L.message})})]})})}},35104:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>r});let r=(0,o(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\yrk20\\\\OwliaFabrica2\\\\app\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\yrk20\\OwliaFabrica2\\app\\page.tsx","default")}};var t=require("../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),r=t.X(0,[989,84,80,45,52,631],()=>o(61222));module.exports=r})();