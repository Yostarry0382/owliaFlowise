(()=>{var e={};e.id=696,e.ids=[696],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},12836:(e,t,s)=>{"use strict";s.r(t),s.d(t,{patchFetch:()=>f,routeModule:()=>h,serverHooks:()=>c,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>p});var r={};s.r(r),s.d(r,{GET:()=>d});var a=s(42706),i=s(28203),o=s(45994),n=s(39187);let u=new(s(12714)).$0;async function d(){try{let e=u.getConfig();if(await u.healthCheck()){let t=0;try{t=(await u.getChatflows()).length}catch{}return n.NextResponse.json({success:!0,status:"connected",apiUrl:e.apiUrl,chatflowCount:t,defaultChatflowId:e.chatflowId||null,hasApiKey:!!e.apiKey,timestamp:new Date().toISOString()})}return n.NextResponse.json({success:!1,status:"disconnected",apiUrl:e.apiUrl,error:"Unable to connect to Flowise server",timestamp:new Date().toISOString()})}catch(e){return n.NextResponse.json({success:!1,status:"error",error:e instanceof Error?e.message:"Unknown error",timestamp:new Date().toISOString()})}}let h=new a.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/flowise/status/route",pathname:"/api/flowise/status",filename:"route",bundlePath:"app/api/flowise/status/route"},resolvedPagePath:"C:\\Users\\yrk20\\OwliaFabrica2\\app\\api\\flowise\\status\\route.ts",nextConfigOutput:"standalone",userland:r}),{workAsyncStorage:l,workUnitAsyncStorage:p,serverHooks:c}=h;function f(){return(0,o.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:p})}},96487:()=>{},78335:()=>{},12714:(e,t,s)=>{"use strict";s.d(t,{$0:()=>r,uD:()=>a});class r{constructor(e){this.baseUrl=e?.apiUrl||process.env.FLOWISE_API_URL||"http://localhost:3000",this.apiKey=e?.apiKey||process.env.FLOWISE_API_KEY||""}getHeaders(e="application/json"){let t={"Content-Type":e};return this.apiKey&&(t.Authorization=`Bearer ${this.apiKey}`),t}async request(e,t={}){let s=`${this.baseUrl}${e}`;try{let e=await fetch(s,{...t,headers:{...this.getHeaders(),...t.headers}});if(!e.ok){let t=await e.json().catch(()=>({}));throw new a(e.status,t.message||`API request failed: ${e.statusText}`,t)}return await e.json()}catch(e){if(e instanceof a)throw e;throw new a(0,`Network error: ${e instanceof Error?e.message:"Unknown error"}`,{originalError:e})}}async predict(e,t,s={}){let r={question:t};return s.sessionId&&(r.sessionId=s.sessionId),s.overrideConfig&&(r.overrideConfig=s.overrideConfig),s.history&&(r.history=s.history),s.uploads&&(r.uploads=s.uploads),s.humanInput&&(r.humanInput=s.humanInput),this.request(`/api/v1/prediction/${e}`,{method:"POST",body:JSON.stringify(r)})}async predictStream(e,t,s={},r){let i={question:t,streaming:!0};s.sessionId&&(i.sessionId=s.sessionId),s.overrideConfig&&(i.overrideConfig=s.overrideConfig),s.history&&(i.history=s.history);let o=`${this.baseUrl}/api/v1/prediction/${e}`,n=await fetch(o,{method:"POST",headers:this.getHeaders(),body:JSON.stringify(i)});if(!n.ok)throw new a(n.status,`Stream request failed: ${n.statusText}`);let u=n.body?.getReader();if(!u)throw new a(0,"Response body is not readable");let d=new TextDecoder,h="";try{for(;;){let{done:e,value:t}=await u.read();if(e)break;let s=d.decode(t,{stream:!0});h+=s,r&&r(s)}}finally{u.releaseLock()}return{text:h}}async submitHumanInput(e,t){return this.request(`/api/v1/prediction/${e}`,{method:"POST",body:JSON.stringify({humanInput:t})})}async getChatflows(){return this.request("/api/v1/chatflows",{method:"GET"})}async getChatflow(e){return this.request(`/api/v1/chatflows/${e}`,{method:"GET"})}async createChatflow(e){return this.request("/api/v1/chatflows",{method:"POST",body:JSON.stringify(e)})}async updateChatflow(e,t){return this.request(`/api/v1/chatflows/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteChatflow(e){await this.request(`/api/v1/chatflows/${e}`,{method:"DELETE"})}async uploadFiles(e,t){let s=new FormData;e.forEach(e=>{s.append("files",e)}),t&&s.append("chatflowId",t);let r=`${this.baseUrl}/api/v1/get-upload-file`,i=await fetch(r,{method:"POST",headers:{...this.apiKey&&{Authorization:`Bearer ${this.apiKey}`}},body:s});if(!i.ok)throw new a(i.status,`File upload failed: ${i.statusText}`);let o=await i.json();return o.data||o}async healthCheck(){try{if((await fetch(`${this.baseUrl}/api/v1/ping`,{method:"GET"})).ok)return!0;return(await fetch(this.baseUrl,{method:"GET"})).ok}catch{return!1}}getConfig(){return{apiUrl:this.baseUrl,apiKey:this.apiKey,chatflowId:process.env.FLOWISE_DEFAULT_CHATFLOW_ID||""}}}class a extends Error{constructor(e,t,s){super(t),this.statusCode=e,this.details=s,this.name="FlowiseAPIError"}isNotFound(){return 404===this.statusCode}isUnauthorized(){return 401===this.statusCode}isValidationError(){return 422===this.statusCode}}new r}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[989,452],()=>s(12836));module.exports=r})();