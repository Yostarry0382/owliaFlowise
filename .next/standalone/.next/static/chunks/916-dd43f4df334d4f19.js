"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[916],{95071:(e,t,o)=>{o.d(t,{A:()=>i});var n=o(95155);o(12115);var l=o(75484);let i=function(e){let{id:t,sourceX:o,sourceY:i,targetX:a,targetY:s,sourcePosition:r,targetPosition:d,style:p={},markerEnd:c,data:u}=e,[m,h,b]=(0,l.Fp)({sourceX:o,sourceY:i,sourcePosition:r,targetX:a,targetY:s,targetPosition:d}),f=null==u?void 0:u.label;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.tE,{path:m,markerEnd:c,style:{stroke:"#6366f1",strokeWidth:2,...p}}),f&&(0,n.jsx)(l.rV,{children:(0,n.jsx)("div",{style:{position:"absolute",transform:"translate(-50%, -50%) translate(".concat(h,"px,").concat(b,"px)"),fontSize:12,pointerEvents:"all",backgroundColor:"#1e1e2f",padding:"2px 6px",borderRadius:4,border:"1px solid #3d3d5c",color:"#fff"},className:"nodrag nopan",children:f})})]})}},63809:(e,t,o)=>{o.d(t,{A:()=>b});var n=o(95155),l=o(12115),i=o(75484),a=o(39732),s=o(34004),r=o(48699),d=o(13538),p=o(70822),c=o(94714),u=o(5090),m=o(57374),h=o(71500);let b=(0,l.memo)(function(e){var t;let{id:o,data:l,selected:b}=e,{onConfigure:f,onDelete:y}=l,x=(0,h.KF)(l.type),g=(null==x?void 0:x.icon)||"\uD83D\uDCE6",A=(null==x?void 0:x.color)||"#607D8B",v=(null==x?void 0:x.inputHandles)||[],j=(null==x?void 0:x.outputHandles)||[],C=(e,t,o)=>1===t?"50%":"".concat(100/(t+1)*(e+1),"%"),w=(e,t)=>{let o={top:[],bottom:[],left:[],right:[]};return e.forEach(e=>{o[e.position].push(e)}),Object.entries(o).flatMap(e=>{let[o,l]=e;return l.map((e,s)=>{let r="top"===o||"bottom"===o,d=C(s,l.length,o);return(0,n.jsx)(a.A,{title:e.label,placement:o,children:(0,n.jsx)(i.h7,{type:t?"target":"source",position:"top"===o?i.yX.Top:"bottom"===o?i.yX.Bottom:"left"===o?i.yX.Left:i.yX.Right,id:e.id,style:{...r?{left:d}:{top:d},background:A,width:10,height:10,border:"2px solid #fff"}})},e.id)})})};return(0,n.jsxs)(s.A,{sx:{minWidth:180,maxWidth:250,bgcolor:"#1e1e2f",borderRadius:2,border:"2px solid ".concat(b?A:"#2d2d44"),boxShadow:b?"0 0 10px ".concat(A,"40"):"0 2px 8px rgba(0,0,0,0.3)",overflow:"hidden",transition:"border-color 0.2s, box-shadow 0.2s","&:hover":{borderColor:A}},children:[(0,n.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:1.5,py:1,bgcolor:A,color:"#fff"},children:[(0,n.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",gap:1,overflow:"hidden"},children:[(0,n.jsx)(r.A,{sx:{fontSize:"1.1rem"},children:g}),(0,n.jsx)(r.A,{sx:{fontSize:"0.85rem",fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:l.label})]}),(0,n.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(null===(t=l.humanReview)||void 0===t?void 0:t.enabled)&&(0,n.jsx)(a.A,{title:"Human Review Enabled",children:(0,n.jsx)(u.A,{sx:{fontSize:16,color:"#FFD700"}})}),(0,n.jsx)(a.A,{title:"Configure",children:(0,n.jsx)(d.A,{size:"small",onClick:e=>{e.stopPropagation(),f&&f(o)},sx:{color:"inherit",p:.25,"&:hover":{bgcolor:"rgba(255,255,255,0.2)"}},children:(0,n.jsx)(c.A,{sx:{fontSize:16}})})}),(0,n.jsx)(a.A,{title:"Delete",children:(0,n.jsx)(d.A,{size:"small",onClick:e=>{e.stopPropagation(),y&&y(o)},sx:{color:"inherit",p:.25,"&:hover":{bgcolor:"rgba(255,255,255,0.2)"}},children:(0,n.jsx)(m.A,{sx:{fontSize:16}})})})]})]}),(0,n.jsxs)(s.A,{sx:{px:1.5,py:1},children:["owlAgentReference"===l.type&&l.agentName&&(0,n.jsx)(p.A,{icon:(0,n.jsx)("span",{style:{fontSize:"0.8rem"},children:"\uD83E\uDD89"}),label:l.agentName,size:"small",sx:{bgcolor:"#FF5722",color:"#fff",fontSize:"0.7rem",height:22,mb:.5}}),l.config&&Object.keys(l.config).length>0&&(0,n.jsx)(s.A,{sx:{mt:.5},children:Object.entries(l.config).filter(e=>{let[t,o]=e;return o&&!t.includes("Key")&&!t.includes("Password")}).slice(0,3).map(e=>{let[t,o]=e;return(0,n.jsxs)(r.A,{sx:{fontSize:"0.7rem",color:"#888",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[t,": ","string"==typeof o?o.slice(0,20):String(o),"string"==typeof o&&o.length>20?"...":""]},t)})}),(0,n.jsxs)(s.A,{sx:{mt:1,display:"flex",justifyContent:"space-between"},children:[v.length>0&&(0,n.jsx)(s.A,{children:v.map(e=>(0,n.jsxs)(r.A,{sx:{fontSize:"0.65rem",color:"#666"},children:["← ",e.label]},e.id))}),j.length>0&&(0,n.jsx)(s.A,{sx:{textAlign:"right"},children:j.map(e=>(0,n.jsxs)(r.A,{sx:{fontSize:"0.65rem",color:"#666"},children:[e.label," →"]},e.id))})]})]}),w(v,!0),w(j,!1)]})})},50077:(e,t,o)=>{o.d(t,{A:()=>Z});var n=o(95155),l=o(12115),i=o(34004),a=o(39732),s=o(14517),r=o(22516),d=o(51201),p=o(83671),c=o(48699),u=o(93060),m=o(28690),h=o(94794),b=o(49067),f=o(8530),y=o(13538),x=o(70822),g=o(61040),A=o(69210),v=o(43785),j=o(68210),C=o(2691),w=o(73583),S=o(60917),I=o(10630),M=o(49627),z=o(83152),T=o(94142),O=o(72958),P=o(94714),D=o(14703),F=o(5090),H=o(96441),L=o(48726),R=o(13846),E=o(65733),N=o(71500);let k={azureChatOpenAI:{description:"Azure OpenAI Serviceを使用したチャットモデルです。メッセージのリストを入力として受け取り、AIが生成したメッセージを出力します。以前の補完モデルよりも強力でコスト効率が高いです。",features:["Azure OpenAI APIとの統合","カスタムデプロイメント名のサポート","Temperature、Top P、ペナルティなどのパラメータ調整","システムメッセージによる挙動のカスタマイズ","ストリーミングレスポンス対応"],useCases:["チャットボットの構築","質問応答システム","ドキュメント要約","コンテンツ生成","コード生成・レビュー"],tips:["Temperatureを下げると（0.2-0.3）一貫性のある出力が得られます","Temperatureを上げると（0.7-1.0）創造的な出力が得られます","システムメッセージでAIの役割と振る舞いを定義してください","Max Tokensは応答の長さに影響します"],docUrl:"https://docs.flowiseai.com/integrations/langchain/chat-models"},azureOpenAIEmbeddings:{description:"Azure OpenAI Serviceを使用してテキストをベクトル表現に変換するノードです。セマンティック検索や類似性検索に使用されます。",features:["テキストから高品質なベクトル埋め込みを生成","text-embedding-ada-002モデルのサポート","バッチ処理による効率的な埋め込み生成","ストリップ改行オプション"],useCases:["ベクトルデータベースへのドキュメント保存","セマンティック検索の実装","RAG（検索拡張生成）パイプライン","ドキュメント類似性の計算"],tips:["Azure OpenAIアカウントの承認には約10営業日かかります","デプロイメント名は通常「text-embedding-ada-002」を使用","バッチサイズを調整してパフォーマンスを最適化"],docUrl:"https://docs.flowiseai.com/integrations/langchain/embeddings"},weaviate:{description:"スケーラブルなオープンソースのベクトルデータベースです。埋め込みデータのアップサートと類似性検索またはMMR検索を実行できます。",features:["埋め込みデータのアップサート","類似性検索機能","MMR（Maximal Marginal Relevance）検索","フィルタリングによる検索結果の絞り込み","スケーラブルなアーキテクチャ"],useCases:["大規模ドキュメントの保存と検索","セマンティック検索エンジン","推薦システム","ナレッジベースの構築"],tips:["Top Kを調整して返される結果の数を制御","フィルタリングを使用して特定のフィールドで絞り込み","インデックス名は小文字で始める必要があります"],docUrl:"https://docs.flowiseai.com/integrations/langchain/vector-stores"},memory:{description:"AIに以前の会話の記憶を持たせることができるノードです。会話は配列またはデータベースに保存され、LLMにコンテキストとして提供されます。",features:["会話履歴の保存と管理","セッションIDによるマルチユーザー対応","複数のストレージバックエンド対応","メモリウィンドウによる履歴制限"],useCases:["継続的な会話のサポート","コンテキストを維持したチャットボット","パーソナライズされた応答の生成"],tips:["sessionIdを使用してユーザーごとに会話を分離","メモリキーはデフォルトで「chat_history」を使用","Buffer Window Memoryで最近の会話のみを保持可能"],docUrl:"https://docs.flowiseai.com/integrations/langchain/memory"},redisMemory:{description:"Redisサーバーに会話を要約して保存する高性能メモリノードです。高速なアクセスとスケーラビリティを提供します。",features:["会話の自動要約","Redisサーバーへの永続化","高速な読み書きアクセス","スケーラブルなストレージ"],useCases:["大規模なユーザーベースのチャットアプリ","分散システムでのメモリ共有","永続的な会話履歴の保存"],tips:["Redis URLの形式: redis://[username:password@]host:port","セッションIDでユーザーを識別"],docUrl:"https://docs.flowiseai.com/integrations/langchain/memory"},conversationalAgent:{description:"LLMを推論エンジンとして使用し、どのアクションを取るべきか、その入力は何かを決定するエージェントです。結果はエージェントにフィードバックされ、追加アクションが必要かどうかを評価します。",features:["会話に特化したプロンプト","ツールの選択と実行","反復的な推論とアクション","メモリとの統合"],useCases:["対話型アシスタント","カスタマーサポートボット","情報検索と処理"],tips:["適切なツールを接続して機能を拡張","メモリを接続して会話の文脈を維持"],docUrl:"https://docs.flowiseai.com/integrations/langchain/agents"},openAIAssistant:{description:"OpenAI Assistant APIを使用してツールの選択と引数を決定するエージェントです。コード実行やファイル検索などの高度な機能をサポートします。",features:["OpenAI Assistant APIとの統合","コードインタープリター機能","ファイル検索機能","カスタム関数の呼び出し"],useCases:["高度なコード生成・実行","ドキュメント分析","データ処理タスク"],tips:["Assistant IDを事前にOpenAIで作成しておく必要があります","ファイル検索を使用する場合はVector Storeを設定"],docUrl:"https://docs.flowiseai.com/integrations/langchain/agents"},openAIToolAgent:{description:"関数呼び出しを使用してツールとパラメータを選択するエージェントです。OpenAIのFunction Calling機能を活用します。",features:["Function Calling APIの活用","複数ツールの同時呼び出し","構造化された引数の生成"],useCases:["複雑なワークフローの自動化","APIの連携","データ変換と処理"],tips:["ツールの説明を明確にすることで精度が向上","JSON Schemaでパラメータを厳密に定義"],docUrl:"https://docs.flowiseai.com/integrations/langchain/agents"},toolAgent:{description:"関数呼び出しを使用してツールとパラメータを選択する汎用エージェントです。様々なLLMプロバイダーで使用できます。",features:["複数のLLMプロバイダー対応","ツールの動的選択","柔軟なパラメータ処理"],useCases:["マルチプロバイダー対応アプリ","カスタムツール統合"],docUrl:"https://docs.flowiseai.com/integrations/langchain/agents"},reactAgentChat:{description:"ReAct（Reasoning and Acting）パターンを使用するチャット指向のエージェントです。推論と行動を交互に行いながらタスクを完了します。",features:["ReActパターンによる推論","チャットモデルとの最適化","透明な思考プロセス"],useCases:["複雑な問題解決","ステップバイステップの推論","デバッグ可能なAIアクション"],docUrl:"https://docs.flowiseai.com/integrations/langchain/agents"},llmChain:{description:"言語モデルに対してクエリを実行するチェーンです。プロンプトテンプレートとLLMを組み合わせて使用します。",features:["プロンプトテンプレートとの統合","変数の動的置換","シンプルなLLM呼び出し"],useCases:["テキスト生成","テンプレートベースの応答","単純なQ&A"],docUrl:"https://docs.flowiseai.com/integrations/langchain/chains"},conversationChain:{description:"メモリが統合されたチャットモデルチェーンです。会話の履歴を保持しながら対話を続けることができます。",features:["メモリの自動統合","会話履歴の管理","コンテキスト維持"],useCases:["継続的な対話","カスタマーサービスボット","教育用チャットボット"],docUrl:"https://docs.flowiseai.com/integrations/langchain/chains"},retrievalQAChain:{description:"取得したドキュメントから質問に答えるチェーンです。ベクトルストアと連携してRAGパイプラインを構築します。",features:["ドキュメント検索と回答生成","ソースドキュメントの返却","ベクトルストアとの統合"],useCases:["ドキュメントQ&A","ナレッジベース検索","FAQシステム"],tips:["returnSourceDocumentsを有効にして参照元を表示","チャンクサイズを調整して回答精度を向上"],docUrl:"https://docs.flowiseai.com/integrations/langchain/chains"},conversationalRetrievalQAChain:{description:"会話形式でドキュメントベースの質問応答を行うチェーンです。検索機能と会話メモリを組み合わせます。",features:["会話履歴を考慮した検索","フォローアップ質問のサポート","コンテキスト維持型RAG"],useCases:["対話型ドキュメント検索","継続的なQ&Aセッション"],docUrl:"https://docs.flowiseai.com/integrations/langchain/chains"},serper:{description:"Google検索APIを使用してリアルタイムの検索結果を取得するツールです。",features:["Google検索結果の取得","リアルタイム情報アクセス","スニペットとリンクの抽出"],useCases:["最新情報の検索","ファクトチェック","調査・リサーチ"],tips:["Serper APIキーが必要です","検索クエリは具体的にすると精度向上"],docUrl:"https://docs.flowiseai.com/integrations/langchain/tools"},calculator:{description:"数学的計算を実行するツールです。エージェントが数値計算を必要とする際に使用されます。",features:["四則演算","複雑な数式の評価","数学関数のサポート"],useCases:["数値計算タスク","データ分析","財務計算"],docUrl:"https://docs.flowiseai.com/integrations/langchain/tools"},customTool:{description:"アプリケーション固有のカスタムツールを作成するノードです。JavaScriptコードで独自の機能を実装できます。",features:["カスタムJavaScriptコード実行","柔軟な入力/出力定義","API連携"],useCases:["独自APIとの連携","カスタム処理の実装","データ変換"],tips:["ツールの説明を明確にしてエージェントの理解を助ける","エラーハンドリングを適切に実装"],docUrl:"https://docs.flowiseai.com/integrations/langchain/tools"},webBrowser:{description:"Webサイトをナビゲートして情報を抽出するツールです。Webスクレイピングやページ内容の取得に使用されます。",features:["Webページのナビゲーション","コンテンツ抽出","リンクの追跡"],useCases:["Webリサーチ","コンテンツ収集","情報抽出"],docUrl:"https://docs.flowiseai.com/integrations/langchain/tools"},retrieverTool:{description:"リトリーバーをエージェントのツールとして使用するノードです。ベクトルストアからの検索機能を提供します。",features:["ベクトル検索の統合","セマンティック検索","ドキュメント取得"],useCases:["ナレッジベース検索","ドキュメント参照"],docUrl:"https://docs.flowiseai.com/integrations/langchain/tools"},pdfLoader:{description:"PDFファイルからテキストを抽出してドキュメントとしてロードするノードです。",features:["PDFテキスト抽出","ページ分割オプション","メタデータの保持"],useCases:["PDF文書の分析","レポート処理","契約書の解析"],docUrl:"https://docs.flowiseai.com/integrations/langchain/document-loaders"},docxLoader:{description:"Microsoft Word（DOCX）ファイルからテキストを抽出するノードです。",features:["DOCX形式のサポート","フォーマット情報の抽出","テーブル処理"],useCases:["Word文書の処理","レポート分析","ドキュメント変換"],docUrl:"https://docs.flowiseai.com/integrations/langchain/document-loaders"},excelLoader:{description:"Microsoft Excelスプレッドシートからデータを抽出するノードです。",features:["Excel形式のサポート","複数シートの処理","セルデータの抽出"],useCases:["データ分析","レポート処理","表形式データの変換"],docUrl:"https://docs.flowiseai.com/integrations/langchain/document-loaders"},csvLoader:{description:"CSVファイルからデータをロードするノードです。構造化データの処理に最適です。",features:["CSV形式のパース","カラム選択","大容量ファイル対応"],useCases:["データインポート","CSV分析","バルクデータ処理"],docUrl:"https://docs.flowiseai.com/integrations/langchain/document-loaders"},jsonLoader:{description:"JSONファイルからデータを抽出するノードです。構造化データの処理に使用されます。",features:["JSON形式のパース","ネストされた構造のサポート","JSONPath対応"],useCases:["API応答の処理","設定ファイルの読み込み","構造化データの分析"],docUrl:"https://docs.flowiseai.com/integrations/langchain/document-loaders"},textLoader:{description:"プレーンテキストファイルをロードするノードです。シンプルなテキスト処理に最適です。",features:["テキストファイルの読み込み","エンコーディング対応","シンプルな処理"],useCases:["ログファイル分析","テキストドキュメント処理","コード分析"],docUrl:"https://docs.flowiseai.com/integrations/langchain/document-loaders"},start:{description:"フローの開始ポイントを定義するノードです。入力フィールドを設定してフローへの入力を受け取ります。",features:["フロー開始点の定義","入力フィールドの設定","初期パラメータの受け渡し"],useCases:["ワークフローの開始","ユーザー入力の受付"]},end:{description:"フローの終了ポイントを定義するノードです。最終出力を返します。",features:["フロー終了点の定義","出力の集約","結果の返却"],useCases:["ワークフローの完了","最終結果の出力"]},humanReview:{description:"AIの出力を人間が確認・承認するためのノードです。重要な決定の前に人間の判断を挟むことができます。",features:["人間による確認・承認","出力の編集機能","タイムアウト設定","承認メッセージのカスタマイズ"],useCases:["品質管理","重要な意思決定の確認","コンテンツモデレーション","エラー防止"],tips:["承認メッセージを明確にして確認者が判断しやすくする","タイムアウトを設定して処理が止まることを防ぐ"]},owlAgentReference:{description:"別のOwlAgentをサブフローとして呼び出すノードです。複雑なワークフローをモジュール化して再利用できます。",features:["既存OwlAgentの再利用","モジュール化されたワークフロー","入出力マッピング","ネストされたエージェント構造"],useCases:["複雑なワークフローの分割","再利用可能なコンポーネント","チーム間での共有"],tips:["循環参照に注意（A→B→Aは不可）","入出力マッピングを正しく設定"]}};var B=o(54778),q=o(86893),W=o(14796),K=o(74631),U=o(85231),J=o(34623),Q=o(95888),V=o(81193),G=o(13437),X=o(57374);function _(e){var t;switch(null===(t=e.split(".").pop())||void 0===t?void 0:t.toLowerCase()){case"pdf":return(0,n.jsx)(K.A,{sx:{fontSize:24,color:"#f44336"}});case"doc":case"docx":return(0,n.jsx)(U.A,{sx:{fontSize:24,color:"#2196f3"}});case"xls":case"xlsx":return(0,n.jsx)(J.A,{sx:{fontSize:24,color:"#4caf50"}});case"ppt":case"pptx":return(0,n.jsx)(G.A,{sx:{fontSize:24,color:"#ff9800"}});case"csv":return(0,n.jsx)(J.A,{sx:{fontSize:24,color:"#00bcd4"}});case"json":case"jsonl":return(0,n.jsx)(Q.A,{sx:{fontSize:24,color:"#ff5722"}});case"txt":case"md":return(0,n.jsx)(V.A,{sx:{fontSize:24,color:"#9e9e9e"}});default:return(0,n.jsx)(W.A,{sx:{fontSize:24,color:"#9e9e9e"}})}}function Y(e){let{value:t,onChange:o,accept:a,label:s="File",required:r=!1,description:d,nodeType:p}=e,[u,m]=(0,l.useState)(!1),[h,b]=(0,l.useState)(null),[f,g]=(0,l.useState)(null),A=(0,l.useRef)(null),v=(0,l.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),m(!0)},[]),j=(0,l.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),m(!1)},[]),C=(0,l.useCallback)(e=>{e.preventDefault(),e.stopPropagation()},[]),w=(0,l.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),m(!1);let t=e.dataTransfer.files;t.length>0&&S(t[0])},[o]),S=e=>{b(0),g({name:e.name,size:e.size});let t=setInterval(()=>{b(e=>null===e?0:e>=100?(clearInterval(t),100):e+20)},100);setTimeout(()=>{b(null),o(e.name,e)},600)};return(0,n.jsxs)(i.A,{children:[(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:.5,mb:.5},children:[(0,n.jsx)(c.A,{sx:{color:"#888",fontSize:"0.8rem"},children:s}),r&&(0,n.jsx)("span",{style:{color:"#f44336",fontSize:"0.8rem"},children:"*"})]}),(0,n.jsxs)(i.A,{onClick:()=>{var e;null===(e=A.current)||void 0===e||e.click()},onDragEnter:v,onDragLeave:j,onDragOver:C,onDrop:w,sx:{border:u?"2px dashed #6366f1":t?"2px solid #4caf50":"2px dashed #3d3d54",borderRadius:2,p:2,textAlign:"center",cursor:"pointer",bgcolor:u?"#6366f115":t?"#4caf5010":"#252536",transition:"all 0.2s ease","&:hover":{borderColor:u?"#6366f1":"#4d4d64",bgcolor:u?"#6366f115":"#2d2d44"}},children:[(0,n.jsx)("input",{ref:A,type:"file",accept:(()=>{if(a)return a;switch(p){case"pdfLoader":return".pdf";case"docxLoader":return".doc,.docx";case"excelLoader":return".xls,.xlsx";case"pptxLoader":return".ppt,.pptx";case"csvLoader":return".csv";case"jsonLoader":return".json";case"jsonlLoader":return".jsonl";case"textLoader":return".txt,.md";default:return"*"}})(),onChange:e=>{var t;let o=null===(t=e.target.files)||void 0===t?void 0:t[0];o&&S(o)},style:{display:"none"}}),null!==h&&(0,n.jsxs)(i.A,{sx:{width:"100%",mb:1},children:[(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[f&&_(f.name),(0,n.jsx)(c.A,{sx:{color:"#fff",fontSize:"0.85rem"},children:"Uploading..."})]}),(0,n.jsx)(B.A,{variant:"determinate",value:h,sx:{bgcolor:"#3d3d54","& .MuiLinearProgress-bar":{bgcolor:"#6366f1"}}})]}),null===h&&t&&(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[_(t),(0,n.jsxs)(i.A,{sx:{textAlign:"left",flex:1},children:[(0,n.jsx)(c.A,{sx:{color:"#fff",fontSize:"0.85rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t}),f&&(0,n.jsx)(c.A,{sx:{color:"#888",fontSize:"0.7rem"},children:function(e){if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(1))+" "+["B","KB","MB","GB"][t]}(f.size)})]}),(0,n.jsx)(y.A,{onClick:e=>{e.stopPropagation(),o(""),g(null)},size:"small",sx:{color:"#f44336","&:hover":{bgcolor:"rgba(244, 67, 54, 0.1)"}},children:(0,n.jsx)(X.A,{sx:{fontSize:18}})})]}),null===h&&!t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(q.A,{sx:{fontSize:40,color:u?"#6366f1":"#888",mb:1}}),(0,n.jsx)(c.A,{sx:{color:"#fff",fontSize:"0.9rem",mb:.5},children:"Drag & Drop"}),(0,n.jsx)(c.A,{sx:{color:"#666",fontSize:"0.75rem",mb:1},children:"or click to select"}),(0,n.jsx)(x.A,{label:(()=>{switch(p){case"pdfLoader":return"PDF";case"docxLoader":return"Word (DOC, DOCX)";case"excelLoader":return"Excel (XLS, XLSX)";case"pptxLoader":return"PowerPoint (PPT, PPTX)";case"csvLoader":return"CSV";case"jsonLoader":return"JSON";case"jsonlLoader":return"JSON Lines";case"textLoader":return"Text (TXT, MD)";default:return"All files"}})(),size:"small",sx:{bgcolor:"#3d3d54",color:"#aaa",fontSize:"0.7rem",height:22}})]})]}),d&&(0,n.jsx)(c.A,{sx:{color:"#666",fontSize:"0.7rem",mt:.5},children:d})]})}function Z(e){let{nodeId:t,nodeData:o,onClose:B,onSave:q,savedOwlAgents:W=[]}=e,[K,U]=(0,l.useState)(o.config||{}),[J,Q]=(0,l.useState)(o.humanReview||{enabled:!1,requiresApproval:!0,approvalMessage:"",timeoutSeconds:0,allowEdit:!0}),[V,G]=(0,l.useState)({}),[X,_]=(0,l.useState)(!1),Z=(0,N.KF)(o.type),$=(0,l.useMemo)(()=>Z?function(e){let t=[],o=[],n=[];return e.forEach(e=>{"password"===e.type||e.name.toLowerCase().includes("apikey")||e.name.toLowerCase().includes("api_key")||e.name.toLowerCase().includes("secret")||e.name.toLowerCase().includes("token")||e.name.toLowerCase().includes("credential")?t.push(e):e.name.toLowerCase().includes("penalty")||e.name.toLowerCase().includes("batch")||e.name.toLowerCase().includes("timeout")||e.name.toLowerCase().includes("strip")||e.name.toLowerCase().includes("metadata")||"topP"===e.name||"frequencyPenalty"===e.name||"presencePenalty"===e.name?n.push(e):o.push(e)}),{credentials:t,basic:o,advanced:n}}(Z.inputs):{credentials:[],basic:[],advanced:[]},[Z]);(0,l.useEffect)(()=>{U(o.config||{}),Q(o.humanReview||{enabled:!1,requiresApproval:!0,approvalMessage:"",timeoutSeconds:0,allowEdit:!0})},[t,o]),(0,l.useEffect)(()=>{if(Z){let e={},t=o.config||{},n={apiKey:"83388c6e2b2646589803eb361f000c45",azureOpenAIApiKey:"83388c6e2b2646589803eb361f000c45",endpoint:"https://codeeditor.openai.azure.com",azureOpenAIApiInstanceName:"https://codeeditor.openai.azure.com".replace("https://","").replace(".openai.azure.com",""),deploymentName:"gpt-4o",apiVersion:"2024-05-01-preview"};Z.inputs.forEach(o=>{void 0===t[o.name]&&(n[o.name]?e[o.name]=n[o.name]:void 0!==o.default&&(e[o.name]=o.default))}),Object.keys(e).length>0&&U(t=>({...e,...t}))}},[Z,t,o.config]);let ee=(e,t)=>{U(o=>({...o,[e]:t}))},et=(e,t)=>{Q(o=>({...o,[e]:t}))},eo=e=>{G(t=>({...t,[e]:!t[e]}))},en=(0,l.useMemo)(()=>Z?Z.inputs.filter(e=>e.required&&!K[e.name]).map(e=>e.label):[],[Z,K]),el=e=>{var t,l,x,g,A;let v=null!==(l=null!==(t=K[e.name])&&void 0!==t?t:e.default)&&void 0!==l?l:"",j=(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.label,e.required&&(0,n.jsx)("span",{style:{color:"#f44336"},children:"*"}),e.description&&(0,n.jsx)(a.A,{title:e.description,arrow:!0,placement:"top",children:(0,n.jsx)(T.A,{sx:{fontSize:14,color:"#666",cursor:"help"}})})]});switch(e.type){case"select":let C="owlAgentReference"===o.type&&"agentId"===e.name,w=C?W.map(e=>({label:e.name,value:e.id})):e.options||[];return(0,n.jsxs)(s.A,{fullWidth:!0,size:"small",children:[(0,n.jsx)(r.A,{sx:{color:"#888"},children:j}),(0,n.jsx)(d.A,{value:v,label:e.label,onChange:t=>ee(e.name,t.target.value),sx:{color:"#fff","& .MuiOutlinedInput-notchedOutline":{borderColor:"#3d3d54"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#4d4d64"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#6366f1"},"& .MuiSvgIcon-root":{color:"#888"}},MenuProps:{PaperProps:{sx:{bgcolor:"#252536",maxHeight:300,"& .MuiMenuItem-root":{color:"#fff","&:hover":{bgcolor:"#3d3d54"},"&.Mui-selected":{bgcolor:"#6366f1"}}}}},children:0===w.length?(0,n.jsx)(p.A,{disabled:!0,value:"",children:(0,n.jsx)(c.A,{sx:{color:"#888",fontStyle:"italic"},children:C?"No saved agents available":"No options available"})}):w.map(e=>(0,n.jsxs)(p.A,{value:e.value,children:[C&&(0,n.jsx)("span",{style:{marginRight:8},children:"\uD83E\uDD89"}),e.label]},e.value))}),e.description&&(0,n.jsx)(c.A,{sx:{color:"#666",fontSize:"0.7rem",mt:.5},children:e.description}),C&&v&&(0,n.jsxs)(i.A,{sx:{mt:1,p:1,bgcolor:"#252536",borderRadius:1},children:[(0,n.jsxs)(c.A,{sx:{color:"#FF5722",fontSize:"0.75rem",display:"flex",alignItems:"center",gap:.5},children:["\uD83E\uDD89 Selected: ",(null===(x=W.find(e=>e.id===v))||void 0===x?void 0:x.name)||v]}),(null===(g=W.find(e=>e.id===v))||void 0===g?void 0:g.description)&&(0,n.jsx)(c.A,{sx:{color:"#888",fontSize:"0.7rem",mt:.5},children:null===(A=W.find(e=>e.id===v))||void 0===A?void 0:A.description})]})]},e.name);case"boolean":return(0,n.jsx)(i.A,{children:(0,n.jsx)(u.A,{control:(0,n.jsx)(m.A,{checked:!!v,onChange:t=>ee(e.name,t.target.checked),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#6366f1"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#6366f1"}}}),label:(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,n.jsx)(c.A,{sx:{color:"#fff",fontSize:"0.9rem"},children:e.label}),e.description&&(0,n.jsx)(a.A,{title:e.description,arrow:!0,children:(0,n.jsx)(T.A,{sx:{fontSize:14,color:"#666"}})})]})})},e.name);case"number":return(0,n.jsxs)(i.A,{children:[(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:.5,mb:.5},children:[(0,n.jsx)(c.A,{sx:{color:"#888",fontSize:"0.8rem"},children:e.label}),e.required&&(0,n.jsx)("span",{style:{color:"#f44336",fontSize:"0.8rem"},children:"*"}),e.description&&(0,n.jsx)(a.A,{title:e.description,arrow:!0,children:(0,n.jsx)(T.A,{sx:{fontSize:14,color:"#666"}})})]}),void 0!==e.min&&void 0!==e.max?(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,n.jsx)(h.Ay,{value:Number(v)||e.min,min:e.min,max:e.max,step:e.step||1,onChange:(t,o)=>ee(e.name,o),valueLabelDisplay:"auto",sx:{flex:1,color:"#6366f1","& .MuiSlider-valueLabel":{bgcolor:"#6366f1"}}}),(0,n.jsx)(b.A,{type:"number",value:v,onChange:t=>ee(e.name,Number(t.target.value)),size:"small",inputProps:{min:e.min,max:e.max,step:e.step},sx:{width:80,"& .MuiOutlinedInput-root":{color:"#fff","& fieldset":{borderColor:"#3d3d54"}}}})]}):(0,n.jsx)(b.A,{type:"number",value:v,onChange:t=>ee(e.name,Number(t.target.value)),fullWidth:!0,size:"small",placeholder:e.placeholder,sx:{"& .MuiOutlinedInput-root":{color:"#fff","& fieldset":{borderColor:"#3d3d54"},"&:hover fieldset":{borderColor:"#4d4d64"},"&.Mui-focused fieldset":{borderColor:"#6366f1"}}}})]},e.name);case"password":return(0,n.jsxs)(i.A,{children:[(0,n.jsx)(b.A,{type:V[e.name]?"text":"password",label:j,value:v,onChange:t=>ee(e.name,t.target.value),fullWidth:!0,size:"small",required:e.required,placeholder:e.placeholder,InputProps:{startAdornment:(0,n.jsx)(f.A,{position:"start",children:(0,n.jsx)(O.A,{sx:{fontSize:18,color:"#666"}})}),endAdornment:(0,n.jsx)(f.A,{position:"end",children:(0,n.jsx)(y.A,{onClick:()=>eo(e.name),edge:"end",size:"small",sx:{color:"#888"},children:V[e.name]?(0,n.jsx)(z.A,{}):(0,n.jsx)(M.A,{})})})},sx:{"& .MuiOutlinedInput-root":{color:"#fff","& fieldset":{borderColor:"#3d3d54"},"&:hover fieldset":{borderColor:"#4d4d64"},"&.Mui-focused fieldset":{borderColor:"#6366f1"}},"& .MuiInputLabel-root":{color:"#888"}}}),e.description&&(0,n.jsx)(c.A,{sx:{color:"#666",fontSize:"0.7rem",mt:.5},children:e.description})]},e.name);case"text":return(0,n.jsxs)(i.A,{children:[(0,n.jsx)(b.A,{label:j,value:v,onChange:t=>ee(e.name,t.target.value),fullWidth:!0,size:"small",required:e.required,placeholder:e.placeholder,multiline:!0,rows:4,sx:{"& .MuiOutlinedInput-root":{color:"#fff","& fieldset":{borderColor:"#3d3d54"},"&:hover fieldset":{borderColor:"#4d4d64"},"&.Mui-focused fieldset":{borderColor:"#6366f1"}},"& .MuiInputLabel-root":{color:"#888"}}}),e.description&&(0,n.jsx)(c.A,{sx:{color:"#666",fontSize:"0.7rem",mt:.5},children:e.description})]},e.name);case"json":return(0,n.jsxs)(i.A,{children:[(0,n.jsx)(b.A,{label:j,value:"object"==typeof v?JSON.stringify(v,null,2):v,onChange:t=>{try{let o=JSON.parse(t.target.value);ee(e.name,o)}catch(o){ee(e.name,t.target.value)}},fullWidth:!0,size:"small",placeholder:e.placeholder||'{"key": "value"}',multiline:!0,rows:3,sx:{"& .MuiOutlinedInput-root":{color:"#fff",fontFamily:"monospace",fontSize:"0.85rem","& fieldset":{borderColor:"#3d3d54"},"&:hover fieldset":{borderColor:"#4d4d64"},"&.Mui-focused fieldset":{borderColor:"#6366f1"}},"& .MuiInputLabel-root":{color:"#888"}}}),e.description&&(0,n.jsx)(c.A,{sx:{color:"#666",fontSize:"0.7rem",mt:.5},children:e.description})]},e.name);case"file":return(0,n.jsx)(Y,{value:v,onChange:(t,o)=>{ee(e.name,t),o&&ee("".concat(e.name,"_file"),o)},label:e.label,required:e.required,description:e.description,nodeType:o.type},e.name);default:return(0,n.jsxs)(i.A,{children:[(0,n.jsx)(b.A,{label:j,value:v,onChange:t=>ee(e.name,t.target.value),fullWidth:!0,size:"small",required:e.required,placeholder:e.placeholder,sx:{"& .MuiOutlinedInput-root":{color:"#fff","& fieldset":{borderColor:"#3d3d54"},"&:hover fieldset":{borderColor:"#4d4d64"},"&.Mui-focused fieldset":{borderColor:"#6366f1"}},"& .MuiInputLabel-root":{color:"#888"}}}),e.description&&(0,n.jsx)(c.A,{sx:{color:"#666",fontSize:"0.7rem",mt:.5},children:e.description})]},e.name)}},ei=(e,t)=>0===e.length?null:(0,n.jsxs)(i.A,{sx:{mb:2},children:[(0,n.jsx)(c.A,{sx:{color:"#888",fontSize:"0.75rem",mb:1},children:"input"===t?"Inputs":"Outputs"}),(0,n.jsx)(i.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map(e=>(0,n.jsx)(x.A,{icon:(0,n.jsx)(D.A,{sx:{fontSize:14}}),label:"".concat(e.label," (").concat(e.type,")"),size:"small",sx:{bgcolor:"input"===t?"#1e3a5f":"#3d1e5f",color:"#fff",fontSize:"0.7rem","& .MuiChip-icon":{color:"#888"}}},e.id))})]});return Z?(0,n.jsxs)(i.A,{sx:{width:380,height:"100%",bgcolor:"#1e1e2f",borderLeft:"1px solid #2d2d44",display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:2,borderBottom:"1px solid #2d2d44",bgcolor:Z.color},children:[(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,n.jsx)(c.A,{sx:{fontSize:"1.2rem"},children:Z.icon}),(0,n.jsxs)(i.A,{children:[(0,n.jsx)(c.A,{sx:{color:"#fff",fontWeight:600},children:Z.label}),(0,n.jsx)(c.A,{sx:{color:"rgba(255,255,255,0.7)",fontSize:"0.7rem"},children:Z.category})]})]}),(0,n.jsx)(y.A,{onClick:B,sx:{color:"#fff"},children:(0,n.jsx)(S.A,{})})]}),(0,n.jsx)(i.A,{sx:{px:2,py:1,bgcolor:"#252536"},children:(0,n.jsx)(c.A,{sx:{color:"#aaa",fontSize:"0.8rem"},children:Z.description})}),en.length>0&&(0,n.jsx)(i.A,{sx:{px:2,py:1},children:(0,n.jsxs)(g.A,{severity:"warning",sx:{bgcolor:"rgba(255, 152, 0, 0.1)",color:"#ff9800","& .MuiAlert-icon":{color:"#ff9800"},fontSize:"0.8rem",py:0},children:["Missing: ",en.join(", ")]})}),(0,n.jsxs)(i.A,{sx:{flex:1,overflow:"auto",p:2},children:[(Z.inputHandles.length>0||Z.outputHandles.length>0)&&(0,n.jsxs)(A.A,{defaultExpanded:!1,sx:{bgcolor:"#252536",color:"#fff",mb:2,"&:before":{display:"none"}},children:[(0,n.jsx)(v.A,{expandIcon:(0,n.jsx)(I.A,{sx:{color:"#888"}}),children:(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,n.jsx)(D.A,{sx:{fontSize:18,color:"#888"}}),(0,n.jsx)(c.A,{sx:{fontSize:"0.85rem"},children:"Connections"})]})}),(0,n.jsxs)(j.A,{children:[ei(Z.inputHandles,"input"),ei(Z.outputHandles,"output")]})]}),$.credentials.length>0&&(0,n.jsxs)(A.A,{defaultExpanded:!0,sx:{bgcolor:"#252536",color:"#fff",mb:2,"&:before":{display:"none"},border:"1px solid #3d3d54"},children:[(0,n.jsx)(v.A,{expandIcon:(0,n.jsx)(I.A,{sx:{color:"#888"}}),children:(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,n.jsx)(O.A,{sx:{fontSize:18,color:"#ff9800"}}),(0,n.jsx)(c.A,{sx:{fontSize:"0.85rem",fontWeight:600},children:"Credentials"})]})}),(0,n.jsx)(j.A,{children:(0,n.jsx)(i.A,{sx:{display:"flex",flexDirection:"column",gap:2},children:$.credentials.map(e=>el(e))})})]}),$.basic.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[(0,n.jsx)(P.A,{sx:{fontSize:18,color:"#888"}}),(0,n.jsx)(c.A,{sx:{color:"#888",fontSize:"0.75rem",textTransform:"uppercase",letterSpacing:1},children:"Basic Settings"})]}),(0,n.jsx)(i.A,{sx:{display:"flex",flexDirection:"column",gap:2,mb:3},children:$.basic.map(e=>el(e))})]}),$.advanced.length>0&&(0,n.jsxs)(A.A,{expanded:X,onChange:()=>_(!X),sx:{bgcolor:"#252536",color:"#fff",mb:2,"&:before":{display:"none"}},children:[(0,n.jsx)(v.A,{expandIcon:(0,n.jsx)(I.A,{sx:{color:"#888"}}),children:(0,n.jsxs)(c.A,{sx:{fontSize:"0.85rem"},children:["Advanced Settings (",$.advanced.length,")"]})}),(0,n.jsx)(j.A,{children:(0,n.jsx)(i.A,{sx:{display:"flex",flexDirection:"column",gap:2},children:$.advanced.map(e=>el(e))})})]}),(0,n.jsx)(C.A,{sx:{borderColor:"#2d2d44",my:2}}),(0,n.jsxs)(A.A,{sx:{bgcolor:"#252536",color:"#fff","&:before":{display:"none"}},children:[(0,n.jsx)(v.A,{expandIcon:(0,n.jsx)(I.A,{sx:{color:"#888"}}),children:(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,n.jsx)(F.A,{sx:{fontSize:18,color:J.enabled?"#FFD700":"#888"}}),(0,n.jsx)(c.A,{sx:{fontSize:"0.85rem"},children:"Human Review"}),J.enabled&&(0,n.jsx)(x.A,{label:"ON",size:"small",sx:{bgcolor:"#FFD700",color:"#000",height:18,fontSize:"0.65rem",fontWeight:600}})]})}),(0,n.jsx)(j.A,{children:(0,n.jsxs)(i.A,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,n.jsx)(u.A,{control:(0,n.jsx)(m.A,{checked:J.enabled,onChange:e=>et("enabled",e.target.checked),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#FFD700"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#FFD700"}}}),label:(0,n.jsx)(c.A,{sx:{color:"#fff",fontSize:"0.9rem"},children:"Enable Review"})}),J.enabled&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.A,{control:(0,n.jsx)(m.A,{checked:J.allowEdit,onChange:e=>et("allowEdit",e.target.checked)}),label:(0,n.jsx)(c.A,{sx:{color:"#fff",fontSize:"0.9rem"},children:"Allow Edit"})}),(0,n.jsx)(b.A,{label:"Approval Message",value:J.approvalMessage||"",onChange:e=>et("approvalMessage",e.target.value),fullWidth:!0,size:"small",placeholder:"Please review this output...",sx:{"& .MuiOutlinedInput-root":{color:"#fff","& fieldset":{borderColor:"#3d3d54"}},"& .MuiInputLabel-root":{color:"#888"}}}),(0,n.jsxs)(i.A,{children:[(0,n.jsx)(c.A,{sx:{color:"#888",fontSize:"0.8rem",mb:.5},children:"Auto-approve Timeout (seconds, 0 = disabled)"}),(0,n.jsx)(b.A,{type:"number",value:J.timeoutSeconds||0,onChange:e=>et("timeoutSeconds",Math.max(0,Number(e.target.value))),fullWidth:!0,size:"small",inputProps:{min:0},sx:{"& .MuiOutlinedInput-root":{color:"#fff","& fieldset":{borderColor:"#3d3d54"}}}})]})]})]})})]}),(()=>{let e=k[o.type];return e?(0,n.jsxs)(A.A,{sx:{bgcolor:"#1a1a2e",color:"#fff","&:before":{display:"none"},border:"1px solid #2d2d44",borderRadius:1,mt:1},children:[(0,n.jsxs)(v.A,{expandIcon:(0,n.jsx)(I.A,{sx:{color:"#888"}}),sx:{"& .MuiAccordionSummary-content":{display:"flex",alignItems:"center",gap:1}},children:[(0,n.jsx)(H.A,{sx:{color:"#64B5F6",fontSize:20}}),(0,n.jsx)(c.A,{sx:{fontWeight:500},children:"ノードリファレンス"})]}),(0,n.jsx)(j.A,{children:(0,n.jsxs)(i.A,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,n.jsx)(i.A,{children:(0,n.jsx)(c.A,{sx:{color:"#ccc",fontSize:"0.85rem",lineHeight:1.6},children:e.description})}),e.features&&e.features.length>0&&(0,n.jsxs)(i.A,{children:[(0,n.jsxs)(c.A,{sx:{color:"#81C784",fontSize:"0.8rem",fontWeight:600,mb:1,display:"flex",alignItems:"center",gap:.5},children:[(0,n.jsx)(E.A,{sx:{fontSize:16}}),"主な機能"]}),(0,n.jsx)(i.A,{component:"ul",sx:{m:0,pl:2},children:e.features.map((e,t)=>(0,n.jsx)(i.A,{component:"li",sx:{color:"#aaa",fontSize:"0.8rem",mb:.5},children:e},t))})]}),e.useCases&&e.useCases.length>0&&(0,n.jsxs)(i.A,{children:[(0,n.jsx)(c.A,{sx:{color:"#64B5F6",fontSize:"0.8rem",fontWeight:600,mb:1},children:"使用例"}),(0,n.jsx)(i.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.useCases.map((e,t)=>(0,n.jsx)(x.A,{label:e,size:"small",sx:{bgcolor:"#2d2d44",color:"#ccc",fontSize:"0.7rem",height:24}},t))})]}),e.tips&&e.tips.length>0&&(0,n.jsxs)(i.A,{sx:{bgcolor:"#2a2a3d",borderRadius:1,p:1.5,border:"1px solid #FFB74D33"},children:[(0,n.jsxs)(c.A,{sx:{color:"#FFB74D",fontSize:"0.8rem",fontWeight:600,mb:1,display:"flex",alignItems:"center",gap:.5},children:[(0,n.jsx)(R.A,{sx:{fontSize:16}}),"Tips"]}),(0,n.jsx)(i.A,{component:"ul",sx:{m:0,pl:2},children:e.tips.map((e,t)=>(0,n.jsx)(i.A,{component:"li",sx:{color:"#bbb",fontSize:"0.75rem",mb:.5},children:e},t))})]}),e.docUrl&&(0,n.jsx)(i.A,{sx:{mt:1},children:(0,n.jsx)(w.A,{variant:"outlined",size:"small",href:e.docUrl,target:"_blank",rel:"noopener noreferrer",endIcon:(0,n.jsx)(L.A,{sx:{fontSize:14}}),sx:{color:"#64B5F6",borderColor:"#64B5F6",fontSize:"0.75rem",textTransform:"none","&:hover":{borderColor:"#90CAF9",bgcolor:"#64B5F610"}},children:"Flowise公式ドキュメント"})})]})})]}):null})()]}),(0,n.jsxs)(i.A,{sx:{p:2,borderTop:"1px solid #2d2d44",display:"flex",gap:1},children:[(0,n.jsx)(w.A,{variant:"outlined",onClick:B,fullWidth:!0,sx:{color:"#888",borderColor:"#3d3d54","&:hover":{borderColor:"#4d4d64"}},children:"Cancel"}),(0,n.jsx)(w.A,{variant:"contained",onClick:()=>{q(t,K,J),B()},fullWidth:!0,sx:{bgcolor:"#6366f1","&:hover":{bgcolor:"#5558e3"}},children:"Apply"})]})]}):(0,n.jsx)(i.A,{sx:{width:380,height:"100%",bgcolor:"#1e1e2f",borderLeft:"1px solid #2d2d44",p:2},children:(0,n.jsx)(c.A,{sx:{color:"#fff"},children:"Node definition not found"})})}},2921:(e,t,o)=>{o.d(t,{A:()=>S});var n=o(95155),l=o(12115),i=o(34004),a=o(48699),s=o(49067),r=o(8530),d=o(9613),p=o(38828),c=o(21929),u=o(66837),m=o(69210),h=o(43785),b=o(70822),f=o(68210),y=o(2691),x=o(39732),g=o(13538),A=o(10630),v=o(32295),j=o(85279),C=o(76046),w=o(71500);function S(e){let{savedOwlAgents:t=[],onDragStart:o}=e,S=(0,C.useRouter)(),[I,M]=(0,l.useState)(""),[z,T]=(0,l.useState)(["chatModels","agents","chains"]),O=(e,t)=>{t.stopPropagation(),S.push("/agent-canvas/".concat(e))},P=e=>(t,o)=>{T(t=>o?[...t,e]:t.filter(t=>t!==e))},D=(e,t)=>{e.dataTransfer.setData("application/reactflow",JSON.stringify({type:t.type,label:t.label,category:t.category})),e.dataTransfer.effectAllowed="move",o&&o(e,t.type,t)},F=(e,t)=>{e.dataTransfer.setData("application/reactflow",JSON.stringify({type:"owlAgentReference",label:t.name,category:"owlAgent",agentId:t.id})),e.dataTransfer.effectAllowed="move"},H=I?w._A.filter(e=>e.label.toLowerCase().includes(I.toLowerCase())||e.description.toLowerCase().includes(I.toLowerCase())):null;return(0,n.jsxs)(i.A,{sx:{width:260,height:"100%",bgcolor:"#1e1e2f",borderRight:"1px solid #2d2d44",display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,n.jsxs)(i.A,{sx:{p:2,borderBottom:"1px solid #2d2d44"},children:[(0,n.jsx)(a.A,{variant:"subtitle1",sx:{fontWeight:600,color:"#fff",mb:1.5},children:"Node Palette"}),(0,n.jsx)(s.A,{size:"small",placeholder:"Search nodes...",value:I,onChange:e=>M(e.target.value),fullWidth:!0,InputProps:{startAdornment:(0,n.jsx)(r.A,{position:"start",children:(0,n.jsx)(v.A,{sx:{color:"#666"}})})},sx:{"& .MuiOutlinedInput-root":{bgcolor:"#252536",color:"#fff","& fieldset":{borderColor:"#3d3d54"},"&:hover fieldset":{borderColor:"#4d4d64"},"&.Mui-focused fieldset":{borderColor:"#6366f1"}},"& .MuiInputBase-input::placeholder":{color:"#666",opacity:1}}})]}),(0,n.jsx)(i.A,{sx:{flex:1,overflow:"auto"},children:H?(0,n.jsx)(d.A,{dense:!0,sx:{py:1},children:0===H.length?(0,n.jsx)(p.Ay,{children:(0,n.jsx)(c.A,{primary:"No nodes found",sx:{color:"#666",textAlign:"center"}})}):H.map(e=>(0,n.jsxs)(p.Ay,{draggable:!0,onDragStart:t=>D(t,e),sx:{cursor:"grab",mx:1,mb:.5,borderRadius:1,bgcolor:"#252536",border:"1px solid transparent","&:hover":{bgcolor:"#2d2d44",borderColor:e.color},"&:active":{cursor:"grabbing"}},children:[(0,n.jsx)(u.A,{sx:{minWidth:32,fontSize:"1.2rem"},children:e.icon}),(0,n.jsx)(c.A,{primary:e.label,secondary:e.description,primaryTypographyProps:{sx:{color:"#fff",fontSize:"0.85rem"}},secondaryTypographyProps:{sx:{color:"#888",fontSize:"0.7rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}})]},e.type))}):(0,n.jsxs)(n.Fragment,{children:[w.a7.map(e=>{let t=(0,w.lg)(e.id);return 0===t.length?null:(0,n.jsxs)(m.A,{expanded:z.includes(e.id),onChange:P(e.id),disableGutters:!0,sx:{bgcolor:"transparent",boxShadow:"none","&:before":{display:"none"},"& .MuiAccordionSummary-root":{minHeight:40,px:2,"&:hover":{bgcolor:"#252536"}},"& .MuiAccordionDetails-root":{p:0}},children:[(0,n.jsx)(h.A,{expandIcon:(0,n.jsx)(A.A,{sx:{color:"#888"}}),children:(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,n.jsx)(a.A,{sx:{fontSize:"1rem"},children:e.icon}),(0,n.jsx)(a.A,{sx:{color:"#fff",fontSize:"0.85rem",fontWeight:500},children:e.label}),(0,n.jsx)(b.A,{label:t.length,size:"small",sx:{height:18,fontSize:"0.65rem",bgcolor:e.color,color:"#fff"}})]})}),(0,n.jsx)(f.A,{children:(0,n.jsx)(d.A,{dense:!0,sx:{py:0},children:t.map(e=>(0,n.jsxs)(p.Ay,{draggable:!0,onDragStart:t=>D(t,e),sx:{cursor:"grab",mx:1,mb:.5,borderRadius:1,bgcolor:"#252536",border:"1px solid transparent","&:hover":{bgcolor:"#2d2d44",borderColor:e.color},"&:active":{cursor:"grabbing"}},children:[(0,n.jsx)(u.A,{sx:{minWidth:28,fontSize:"1rem"},children:e.icon}),(0,n.jsx)(c.A,{primary:e.label,primaryTypographyProps:{sx:{color:"#fff",fontSize:"0.8rem"}}})]},e.type))})})]},e.id)}),t.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(y.A,{sx:{borderColor:"#2d2d44",my:1}}),(0,n.jsxs)(i.A,{sx:{px:2,py:1},children:[(0,n.jsx)(a.A,{sx:{color:"#888",fontSize:"0.75rem",textTransform:"uppercase",letterSpacing:1,mb:1},children:"Saved OwlAgents"}),(0,n.jsx)(d.A,{dense:!0,sx:{py:0},children:t.map(e=>(0,n.jsxs)(p.Ay,{draggable:!0,onDragStart:t=>F(t,e),sx:{cursor:"grab",mb:.5,borderRadius:1,bgcolor:"#252536",border:"1px solid transparent","&:hover":{bgcolor:"#2d2d44",borderColor:"#FF5722"},"&:active":{cursor:"grabbing"}},secondaryAction:(0,n.jsx)(x.A,{title:"編集",children:(0,n.jsx)(g.A,{edge:"end",size:"small",onClick:t=>O(e.id,t),sx:{color:"#FF9800","&:hover":{bgcolor:"rgba(255, 152, 0, 0.2)"}},children:(0,n.jsx)(j.A,{sx:{fontSize:16}})})}),children:[(0,n.jsx)(u.A,{sx:{minWidth:28,fontSize:"1rem"},children:"\uD83E\uDD89"}),(0,n.jsx)(c.A,{primary:e.name,secondary:e.description,primaryTypographyProps:{sx:{color:"#fff",fontSize:"0.8rem"}},secondaryTypographyProps:{sx:{color:"#888",fontSize:"0.7rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"120px"}}})]},e.id))})]})]})]})})]})}},39534:(e,t,o)=>{o.d(t,{A:()=>N});var n=o(95155),l=o(12115),i=o(34004),a=o(8937),s=o(58691),r=o(48699),d=o(70822),p=o(13538),c=o(28883),u=o(43713),m=o(28715),h=o(61040),b=o(9613),f=o(38828),y=o(66837),x=o(21929),g=o(30495),A=o(69367),v=o(49067),j=o(69210),C=o(43785),w=o(68210),S=o(95321),I=o(73583),M=o(60917),z=o(52834),T=o(10630),O=o(19135),P=o(82209),D=o(95888),F=o(69963),H=o(85231),L=o(86789),R=o(71921);function E(e){let{children:t,value:o,index:l}=e;return(0,n.jsx)("div",{role:"tabpanel",hidden:o!==l,children:o===l&&(0,n.jsx)(i.A,{sx:{pt:2},children:t})})}function N(e){let{open:t,onClose:o,nodes:N,edges:k}=e,[B,q]=(0,l.useState)(0),[W,K]=(0,l.useState)(""),[U]=(0,l.useState)(()=>"test-".concat(Date.now())),[J,Q]=(0,l.useState)(!1),[V,G]=(0,l.useState)(null),[X,_]=(0,l.useState)(new Map),[Y,Z]=(0,l.useState)(!1),$=(0,l.useMemo)(()=>N.filter(e=>{var t;return"owlAgentReference"===e.data.type&&(e.data.agentId||(null===(t=e.data.config)||void 0===t?void 0:t.agentId))}),[N]),ee=(0,l.useCallback)(async()=>{if(0===$.length)return;Z(!0);let e=new Map;try{for(let o of $){var t;let n=o.data.agentId||(null===(t=o.data.config)||void 0===t?void 0:t.agentId);if(!(!n||e.has(n)))try{let t=await fetch("/api/owlagents?id=".concat(n));if(t.ok){let o=await t.json();e.set(n,{agentId:o.id,agentName:o.name,description:o.description,flow:o.flow})}}catch(e){console.error("Failed to fetch OwlAgent ".concat(n,":"),e)}}_(e)}finally{Z(!1)}},[$]);(0,l.useEffect)(()=>{t&&$.length>0&&ee()},[t,$.length,ee]);let et=(0,l.useMemo)(()=>(0,R.tk)(N,k),[N,k]),eo=(0,l.useMemo)(()=>(0,R.m4)(N,k,void 0,X),[N,k,X]);(0,l.useEffect)(()=>{t&&G(null)},[t]);let en=async()=>{if(W.trim()&&0!==N.length){Q(!0),G(null),q(2);try{let e=await (0,R.tD)(N,k,W,U);G(e)}catch(e){G({success:!1,error:e instanceof Error?e.message:"Unknown error occurred"})}finally{Q(!1)}}},el=()=>{K(""),G(null),q(0),_(new Map),o()};return(0,n.jsxs)(a.A,{open:t,onClose:el,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{bgcolor:"#1e1e2f",color:"#fff",borderRadius:2,maxHeight:"85vh"}},children:[(0,n.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #2d2d44"},children:[(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,n.jsx)(z.A,{sx:{color:"#4CAF50"}}),(0,n.jsx)(r.A,{variant:"h6",sx:{fontWeight:600},children:"Test Run"}),(0,n.jsx)(d.A,{label:"Native Engine",size:"small",sx:{bgcolor:"#6366f1",color:"#fff",fontSize:"0.65rem",height:20}})]}),(0,n.jsx)(p.A,{onClick:el,sx:{color:"#888"},children:(0,n.jsx)(M.A,{})})]}),(0,n.jsx)(i.A,{sx:{borderBottom:1,borderColor:"#2d2d44"},children:(0,n.jsxs)(c.A,{value:B,onChange:(e,t)=>{q(t)},sx:{"& .MuiTab-root":{color:"#888"},"& .Mui-selected":{color:"#6366f1"},"& .MuiTabs-indicator":{bgcolor:"#6366f1"}},children:[(0,n.jsx)(u.A,{icon:(0,n.jsx)(F.A,{}),iconPosition:"start",label:"Validation",sx:{minHeight:48}}),(0,n.jsx)(u.A,{icon:(0,n.jsx)(D.A,{}),iconPosition:"start",label:"Flow Data",sx:{minHeight:48}}),(0,n.jsx)(u.A,{icon:(0,n.jsx)(z.A,{}),iconPosition:"start",label:"Execute",sx:{minHeight:48}})]})}),(0,n.jsxs)(m.A,{sx:{pt:2},children:[(0,n.jsxs)(E,{value:B,index:0,children:[(0,n.jsx)(i.A,{sx:{mb:2},children:(0,n.jsx)(h.A,{severity:et.valid?"success":"error",sx:{bgcolor:et.valid?"rgba(76, 175, 80, 0.1)":"rgba(244, 67, 54, 0.1)",color:"#fff","& .MuiAlert-icon":{color:et.valid?"#4CAF50":"#f44336"}},children:et.valid?"フローはFlowise実行の準備ができています":"フローにエラーがあります。修正してください。"})}),et.errors.length>0&&(0,n.jsxs)(i.A,{sx:{mb:2},children:[(0,n.jsxs)(r.A,{sx:{color:"#f44336",fontWeight:600,mb:1},children:["Errors (",et.errors.length,")"]}),(0,n.jsx)(b.A,{dense:!0,children:et.errors.map((e,t)=>(0,n.jsxs)(f.Ay,{sx:{py:.5},children:[(0,n.jsx)(y.A,{sx:{minWidth:32},children:(0,n.jsx)(O.A,{sx:{color:"#f44336",fontSize:18}})}),(0,n.jsx)(x.A,{primary:e,primaryTypographyProps:{sx:{color:"#fff",fontSize:"0.9rem"}}})]},t))})]}),et.warnings.length>0&&(0,n.jsxs)(i.A,{children:[(0,n.jsxs)(r.A,{sx:{color:"#ff9800",fontWeight:600,mb:1},children:["Warnings (",et.warnings.length,")"]}),(0,n.jsx)(b.A,{dense:!0,children:et.warnings.map((e,t)=>(0,n.jsxs)(f.Ay,{sx:{py:.5},children:[(0,n.jsx)(y.A,{sx:{minWidth:32},children:(0,n.jsx)(P.A,{sx:{color:"#ff9800",fontSize:18}})}),(0,n.jsx)(x.A,{primary:e,primaryTypographyProps:{sx:{color:"#fff",fontSize:"0.9rem"}}})]},t))})]}),(0,n.jsxs)(i.A,{sx:{mt:2},children:[(0,n.jsx)(r.A,{sx:{color:"#888",fontSize:"0.85rem",mb:1},children:"Flow Summary"}),(0,n.jsxs)(i.A,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[(0,n.jsx)(d.A,{label:"".concat(N.length," Nodes"),size:"small",sx:{bgcolor:"#252536",color:"#fff"}}),(0,n.jsx)(d.A,{label:"".concat(k.length," Connections"),size:"small",sx:{bgcolor:"#252536",color:"#fff"}})]})]})]}),(0,n.jsxs)(E,{value:B,index:1,children:[(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,n.jsx)(r.A,{sx:{color:"#888",fontSize:"0.85rem"},children:"Flowise-Compatible Flow Data (JSON)"}),Y&&(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,n.jsx)(g.A,{size:14,sx:{color:"#6366f1"}}),(0,n.jsx)(r.A,{sx:{color:"#6366f1",fontSize:"0.75rem"},children:"OwlAgent情報を読み込み中..."})]})]}),$.length>0&&(0,n.jsx)(h.A,{severity:"info",sx:{mb:2,bgcolor:"#1a2744",color:"#90caf9","& .MuiAlert-icon":{color:"#90caf9"}},children:(0,n.jsxs)(r.A,{sx:{fontSize:"0.8rem"},children:["このフローには ",$.length," 個のOwlAgentノードが含まれています。",X.size>0&&" 内部フロー情報は「expandedOwlAgents」セクションに展開されています。"]})}),(0,n.jsx)(A.A,{sx:{bgcolor:"#252536",border:"1px solid #3d3d54",borderRadius:1,p:2,maxHeight:400,overflow:"auto"},children:(0,n.jsx)(r.A,{component:"pre",sx:{fontFamily:"monospace",fontSize:"0.75rem",color:"#aaa",whiteSpace:"pre-wrap",wordBreak:"break-all",m:0},children:JSON.stringify(eo,null,2)})})]}),(0,n.jsxs)(E,{value:B,index:2,children:[(0,n.jsxs)(i.A,{sx:{mb:3},children:[(0,n.jsx)(r.A,{sx:{color:"#888",fontSize:"0.85rem",mb:1},children:"Test Input"}),(0,n.jsx)(v.A,{value:W,onChange:e=>K(e.target.value),fullWidth:!0,multiline:!0,rows:3,placeholder:"Enter your test message...",disabled:J,sx:{"& .MuiOutlinedInput-root":{color:"#fff","& fieldset":{borderColor:"#3d3d54"},"&:hover fieldset":{borderColor:"#4d4d64"},"&.Mui-focused fieldset":{borderColor:"#6366f1"}}}}),(0,n.jsxs)(r.A,{sx:{color:"#666",fontSize:"0.75rem",mt:.5},children:["Session ID: ",U]})]}),J&&(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[(0,n.jsx)(g.A,{size:24,sx:{color:"#6366f1"}}),(0,n.jsx)(r.A,{sx:{color:"#aaa"},children:"ネイティブエンジンでフローを実行中..."})]}),V&&(0,n.jsxs)(i.A,{children:[(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,n.jsx)(r.A,{sx:{color:"#888",fontSize:"0.85rem"},children:"Result"}),(0,n.jsx)(d.A,{label:V.success?"Success":"Failed",size:"small",sx:{bgcolor:V.success?"#4CAF50":"#f44336",color:"#fff",height:20,fontSize:"0.7rem"}}),V.executionTime&&(0,n.jsxs)(r.A,{sx:{color:"#888",fontSize:"0.75rem"},children:[V.executionTime,"ms"]})]}),V.error?(0,n.jsx)(A.A,{sx:{bgcolor:"rgba(244, 67, 54, 0.1)",border:"1px solid #f44336",borderRadius:1,p:2},children:(0,n.jsx)(r.A,{sx:{color:"#f44336",fontSize:"0.9rem"},children:V.error})}):(0,n.jsx)(A.A,{sx:{bgcolor:"#252536",border:"1px solid #3d3d54",borderRadius:1,p:2},children:(0,n.jsx)(r.A,{sx:{color:"#fff",fontSize:"0.9rem",whiteSpace:"pre-wrap"},children:V.text||JSON.stringify(V.output,null,2)})}),V.sourceDocuments&&V.sourceDocuments.length>0&&(0,n.jsxs)(j.A,{sx:{bgcolor:"#252536",color:"#fff",mt:2,"&:before":{display:"none"}},children:[(0,n.jsx)(C.A,{expandIcon:(0,n.jsx)(T.A,{sx:{color:"#888"}}),children:(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,n.jsx)(H.A,{sx:{color:"#888",fontSize:18}}),(0,n.jsxs)(r.A,{sx:{fontSize:"0.85rem"},children:["Source Documents (",V.sourceDocuments.length,")"]})]})}),(0,n.jsx)(w.A,{children:V.sourceDocuments.map((e,t)=>(0,n.jsxs)(i.A,{sx:{p:1,mb:1,bgcolor:"#1e1e2f",borderRadius:1},children:[(0,n.jsx)(r.A,{sx:{fontSize:"0.8rem",color:"#aaa",whiteSpace:"pre-wrap"},children:e.pageContent||JSON.stringify(e,null,2)}),e.metadata&&(0,n.jsxs)(r.A,{sx:{fontSize:"0.7rem",color:"#666",mt:.5},children:["Source: ",e.metadata.source||"Unknown"]})]},t))})]}),V.usedTools&&V.usedTools.length>0&&(0,n.jsxs)(j.A,{sx:{bgcolor:"#252536",color:"#fff",mt:2,"&:before":{display:"none"}},children:[(0,n.jsx)(C.A,{expandIcon:(0,n.jsx)(T.A,{sx:{color:"#888"}}),children:(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,n.jsx)(L.A,{sx:{color:"#888",fontSize:18}}),(0,n.jsxs)(r.A,{sx:{fontSize:"0.85rem"},children:["Used Tools (",V.usedTools.length,")"]})]})}),(0,n.jsx)(w.A,{children:V.usedTools.map((e,t)=>(0,n.jsxs)(i.A,{sx:{p:1,mb:1,bgcolor:"#1e1e2f",borderRadius:1},children:[(0,n.jsx)(r.A,{sx:{fontSize:"0.85rem",color:"#fff",fontWeight:600},children:e.tool||e.name||"Unknown Tool"}),e.toolInput&&(0,n.jsxs)(r.A,{sx:{fontSize:"0.75rem",color:"#888",fontFamily:"monospace"},children:["Input: ",JSON.stringify(e.toolInput)]}),e.toolOutput&&(0,n.jsxs)(r.A,{sx:{fontSize:"0.75rem",color:"#aaa",mt:.5,whiteSpace:"pre-wrap"},children:["Output: ",e.toolOutput]})]},t))})]}),(0,n.jsxs)(j.A,{sx:{bgcolor:"#252536",color:"#fff",mt:2,"&:before":{display:"none"}},children:[(0,n.jsx)(C.A,{expandIcon:(0,n.jsx)(T.A,{sx:{color:"#888"}}),children:(0,n.jsx)(r.A,{sx:{fontSize:"0.85rem"},children:"Full Response (JSON)"})}),(0,n.jsx)(w.A,{children:(0,n.jsx)(r.A,{component:"pre",sx:{fontFamily:"monospace",fontSize:"0.75rem",color:"#aaa",whiteSpace:"pre-wrap",wordBreak:"break-all",m:0},children:JSON.stringify(V.output,null,2)})})]})]})]})]}),(0,n.jsxs)(S.A,{sx:{p:2,borderTop:"1px solid #2d2d44"},children:[(0,n.jsx)(I.A,{onClick:el,sx:{color:"#888","&:hover":{bgcolor:"#252536"}},children:"Close"}),(0,n.jsx)(I.A,{variant:"contained",startIcon:J?(0,n.jsx)(g.A,{size:16,sx:{color:"#fff"}}):(0,n.jsx)(z.A,{}),onClick:en,disabled:J||!W.trim()||0===N.length,sx:{bgcolor:"#4CAF50","&:hover":{bgcolor:"#43A047"},"&:disabled":{bgcolor:"#2d2d44",color:"#666"}},children:J?"Running...":"Run Test"})]})]})}},71921:(e,t,o)=>{o.d(t,{f2:()=>r,m4:()=>s,tD:()=>u,tk:()=>d});var n=o(71500);let l={azureChatOpenAI:"azureChatOpenAI",azureOpenAIEmbeddings:"azureOpenAIEmbeddings",weaviate:"weaviate",pdfLoader:"pdfFile",docxLoader:"docxFile",excelLoader:"excel",pptxLoader:"pptx",csvLoader:"csvFile",jsonLoader:"jsonFile",jsonlLoader:"jsonlinesFile",textLoader:"textFile",redisMemory:"RedisBackedChatMemory",conversationalAgent:"conversationalAgent",conversationalRetrievalAgent:"conversationalRetrievalAgent",openAIAssistant:"openAIAssistant",openAIFunctionAgent:"openAIFunctionAgent",openAIToolAgent:"openAIToolAgent",reactAgentChat:"mrklAgentChat",toolAgent:"toolAgent",llmChain:"llmChain",conversationChain:"conversationChain",retrievalQAChain:"retrievalQAChain",conversationalRetrievalQAChain:"conversationalRetrievalQAChain",apiChainGet:"apiChain",apiChainPost:"apiChain",sqlDatabaseChain:"sqlDatabaseChain",serper:"serper",tavily:"tavilySearchResults",braveSearch:"braveSearchAPI",googleCustomSearch:"googleCustomSearch",webBrowser:"webBrowser",calculator:"calculator",customTool:"customTool",chainTool:"chainTool",retrieverTool:"retrieverTool",requestGet:"requestsGet",requestPost:"requestsPost",readFile:"readFile",writeFile:"writeFile",owlAgentReference:"chatflowTool"};function i(e){var t,o,i,a,s,r;let d=(0,n.KF)(e.data.type),p=l[e.data.type]||e.data.type,c={id:e.id,position:e.position,type:"customNode",data:{id:e.id,label:e.data.label,name:p,type:p,baseClasses:{azureChatOpenAI:["AzureChatOpenAI","BaseChatModel","BaseLanguageModel"],azureOpenAIEmbeddings:["AzureOpenAIEmbeddings","Embeddings"],weaviate:["Weaviate","VectorStore"],redisMemory:["RedisBackedChatMemory","BaseChatMemory","BaseMemory"],conversationalAgent:["ConversationalAgent","Agent"],conversationalRetrievalAgent:["ConversationalRetrievalAgent","Agent"],openAIAssistant:["OpenAIAssistant","Agent"],openAIFunctionAgent:["OpenAIFunctionAgent","Agent"],openAIToolAgent:["OpenAIToolAgent","Agent"],llmChain:["LLMChain","BaseChain"],conversationChain:["ConversationChain","BaseChain"],retrievalQAChain:["RetrievalQAChain","BaseChain"],conversationalRetrievalQAChain:["ConversationalRetrievalQAChain","BaseChain"],serper:["Serper","Tool"],tavily:["TavilySearchResults","Tool"],calculator:["Calculator","Tool"],customTool:["CustomTool","Tool"],chainTool:["ChainTool","Tool"],retrieverTool:["RetrieverTool","Tool"]}[e.data.type]||["Unknown"],category:(null==d?void 0:d.category)||"unknown",description:null==d?void 0:d.description,inputs:function(e,t){var o,n,l,i,a,s,r,d,p,c,u,m,h,b,f,y;let x={};switch(e){case"azureChatOpenAI":x.temperature=null!==(o=t.temperature)&&void 0!==o?o:.7,x.maxTokens=null!==(n=t.maxTokens)&&void 0!==n?n:2e3,x.topP=null!==(l=t.topP)&&void 0!==l?l:1,x.frequencyPenalty=null!==(i=t.frequencyPenalty)&&void 0!==i?i:0,x.presencePenalty=null!==(a=t.presencePenalty)&&void 0!==a?a:0,t.systemMessage&&(x.systemMessage=t.systemMessage);break;case"azureOpenAIEmbeddings":x.stripNewLines=null===(s=t.stripNewLines)||void 0===s||s,x.batchSize=null!==(r=t.batchSize)&&void 0!==r?r:512;break;case"weaviate":x.scheme=null!==(d=t.scheme)&&void 0!==d?d:"http",x.host=null!==(p=t.host)&&void 0!==p?p:"localhost:8080",x.indexName=null!==(c=t.indexName)&&void 0!==c?c:"",x.textKey=null!==(u=t.textKey)&&void 0!==u?u:"text",x.topK=null!==(m=t.topK)&&void 0!==m?m:4;break;case"redisMemory":x.sessionId=null!==(h=t.sessionId)&&void 0!==h?h:"",x.memoryKey=null!==(b=t.memoryKey)&&void 0!==b?b:"chat_history";break;case"llmChain":case"conversationChain":x.prompt=null!==(f=t.promptTemplate)&&void 0!==f?f:"";break;case"retrievalQAChain":case"conversationalRetrievalQAChain":x.returnSourceDocuments=null===(y=t.returnSourceDocuments)||void 0===y||y;break;default:Object.assign(x,t)}return x}(e.data.type,e.data.config||{}),outputs:{},inputAnchors:(null==d?void 0:null===(t=d.inputHandles)||void 0===t?void 0:t.map(e=>({label:e.label,name:e.id,type:e.type,optional:!e.multiple,list:e.multiple})))||[],outputAnchors:(null==d?void 0:null===(o=d.outputHandles)||void 0===o?void 0:o.map(e=>({label:e.label,name:e.id,type:e.type})))||[]},width:300,height:150};if("owlAgentReference"===e.data.type&&(c.data.inputs=c.data.inputs||{},e.data.agentId&&(c.data.inputs.agentId=e.data.agentId),e.data.agentName&&(c.data.inputs.agentName=e.data.agentName),(null===(i=e.data.config)||void 0===i?void 0:i.agentId)&&(c.data.inputs.agentId=e.data.config.agentId),(null===(a=e.data.config)||void 0===a?void 0:a.agentName)&&(c.data.inputs.agentName=e.data.config.agentName),(null===(s=e.data.config)||void 0===s?void 0:s.inputMapping)&&(c.data.inputs.inputMapping=e.data.config.inputMapping),(null===(r=e.data.config)||void 0===r?void 0:r.outputMapping)&&(c.data.inputs.outputMapping=e.data.config.outputMapping)),e.data.config){let t={};e.data.config.azureApiKey&&(t.azureOpenAIApiKey=e.data.config.azureApiKey,c.data.inputs=c.data.inputs||{},c.data.inputs.azureOpenAIApiKey="{{CREDENTIAL}}"),e.data.config.azureEndpoint&&(c.data.inputs=c.data.inputs||{},c.data.inputs.azureOpenAIApiInstanceName=e.data.config.azureEndpoint),e.data.config.deploymentName&&(c.data.inputs=c.data.inputs||{},c.data.inputs.azureOpenAIApiDeploymentName=e.data.config.deploymentName),e.data.config.apiVersion&&(c.data.inputs=c.data.inputs||{},c.data.inputs.azureOpenAIApiVersion=e.data.config.apiVersion),e.data.config.apiKey&&(t.apiKey=e.data.config.apiKey),e.data.config.redisUrl&&(c.data.inputs=c.data.inputs||{},c.data.inputs.url=e.data.config.redisUrl)}return c}function a(e){return{id:e.id,source:e.source,sourceHandle:e.sourceHandle||"output",target:e.target,targetHandle:e.targetHandle||"input",type:"buttonedge"}}function s(e,t,o,n){let l=e.map(i);n&&n.size>0&&l.forEach(e=>{var t,o,l,i,a;if("chatflowTool"===e.data.type&&(null===(t=e.data.inputs)||void 0===t?void 0:t.agentId)){let t=n.get(e.data.inputs.agentId);t&&(e.data.inputs.expandedAgent={agentId:t.agentId,agentName:t.agentName,description:t.description,nodeCount:(null===(l=t.flow)||void 0===l?void 0:null===(o=l.nodes)||void 0===o?void 0:o.length)||0,edgeCount:(null===(a=t.flow)||void 0===a?void 0:null===(i=a.edges)||void 0===i?void 0:i.length)||0})}});let s={nodes:l,edges:t.map(a),viewport:o||{x:0,y:0,zoom:1}};return n&&n.size>0&&(s.expandedOwlAgents=Object.fromEntries(n)),s}function r(e,t,o){return JSON.stringify(s(e,t,o))}function d(e,t){let o=[],l=[];if(0===e.length)return o.push("フローにノードがありません"),{valid:!1,errors:o,warnings:l};let i=new Map(e.map(e=>[e.id,e])),a=new Map,s=new Map;for(let e of t)i.has(e.source)||o.push("エッジのソースノード ".concat(e.source," が存在しません")),i.has(e.target)||o.push("エッジのターゲットノード ".concat(e.target," が存在しません")),a.has(e.target)||a.set(e.target,new Set),a.get(e.target).add(e.targetHandle||"input"),s.has(e.source)||s.set(e.source,new Set),s.get(e.source).add(e.sourceHandle||"output");for(let t of e){let e=(0,n.KF)(t.data.type);if(!e)continue;let i=a.get(t.id)||new Set;for(let n of e.inputHandles)n.multiple||i.has(n.id)||"chatModel"!==n.id&&"llm"!==n.id||o.push("".concat(t.data.label," にはChat Modelの接続が必要です"));for(let o of e.inputs){var r;!o.required||(null===(r=t.data.config)||void 0===r?void 0:r[o.name])||l.push("".concat(t.data.label," の ").concat(o.label," が未設定です"))}}return!e.some(e=>{var t,o,l;return 0===((null===(t=s.get(e.id))||void 0===t?void 0:t.size)||0)&&(null===(l=(0,n.KF)(e.data.type))||void 0===l?void 0:null===(o=l.outputHandles)||void 0===o?void 0:o.length)===0})&&e.length>1&&l.push("フローの終端ノードが明確ではありません"),{valid:0===o.length,errors:o,warnings:l}}async function p(e,t,o){let n=Date.now();try{let l=await fetch("/api/flowise/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chatflowId:e,message:t,sessionId:o})});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.error||"API request failed: ".concat(l.statusText))}let i=await l.json();return{success:!0,output:i,text:i.message||i.text||i.answer||JSON.stringify(i),sourceDocuments:i.sourceDocuments,usedTools:i.usedTools,executionTime:Date.now()-n}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error",executionTime:Date.now()-n}}}async function c(e,t,o,n){let l=Date.now();try{var i;let a=e.map(e=>({id:e.id,type:e.data.type||e.type||"custom",position:e.position,data:{label:e.data.label,type:e.data.type,category:e.data.category,config:e.data.config,humanReview:e.data.humanReview,agentId:e.data.agentId,agentName:e.data.agentName}})),s=t.map(e=>({id:e.id,source:e.source,target:e.target,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),r=await fetch("/api/flows/execute",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nodes:a,edges:s,input:o,sessionId:n,useNative:!0})}),d=await r.json();if(!r.ok||!d.success)return{success:!1,error:d.error||"Native execution failed",executionTime:Date.now()-l};return{success:!0,output:d.output,text:"string"==typeof d.output?d.output:JSON.stringify(d.output,null,2),executionTime:d.executionTime||Date.now()-l,sourceDocuments:(null===(i=d.logs)||void 0===i?void 0:i.filter(e=>e.includes("[VectorStore]")).length)>0?[{pageContent:"ネイティブエンジンで実行されました",metadata:{source:"native"}}]:void 0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error",executionTime:Date.now()-l}}}async function u(e,t,o,n){let l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=Date.now();if(!l){let l=await c(e,t,o,n);if(l.success)return{...l,usedTools:[{tool:"OwliaFabrica Native Engine",toolOutput:"Executed successfully"}]};if(l.pendingReview)return{success:!0,text:"人間による確認を待っています...",output:l.pendingReview,executionTime:l.executionTime}}try{var a;let l=r(e,t),s=await fetch("/api/flowise/chatflows",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"temp-test-".concat(Date.now()),flowData:l,deployed:!0})});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.error||e.details||"Failed to create temporary chatflow")}let d=await s.json(),c=(null===(a=d.chatflow)||void 0===a?void 0:a.id)||d.id;if(!c)throw Error("Chatflow ID not returned from API");try{let e=await p(c,o,n);return e.executionTime=Date.now()-i,e}catch(o){let e=o instanceof Error?o.message:"Unknown error",t=e;return e.includes("Ending node must be either a Chain or Agent or Engine")&&(t="フローの終端ノードがFlowise形式と互換性がありません。Agent, Chain, または Engine ノードで終了するフローが必要です。現在のフロー構造はOwliaFabrica独自の形式でテスト実行されます。"),{success:!1,error:t,executionTime:Date.now()-i}}finally{await fetch("/api/flowise/chatflows?id=".concat(c),{method:"DELETE"}).catch(()=>{})}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error",executionTime:Date.now()-i}}}},71500:(e,t,o)=>{o.d(t,{KF:()=>a,_A:()=>l,a7:()=>n,lg:()=>i});let n=[{id:"flowControl",label:"Flow Control",icon:"\uD83C\uDFAF",color:"#8BC34A"},{id:"chatModels",label:"Chat Models",icon:"\uD83D\uDCAC",color:"#4CAF50"},{id:"embeddings",label:"Embeddings",icon:"\uD83D\uDD24",color:"#2196F3"},{id:"vectorStores",label:"Vector Stores",icon:"\uD83D\uDCDA",color:"#9C27B0"},{id:"documentLoaders",label:"Document Loaders",icon:"\uD83D\uDCC4",color:"#FF9800"},{id:"memory",label:"Memory",icon:"\uD83E\uDDE0",color:"#E91E63"},{id:"agents",label:"Agents",icon:"\uD83E\uDD16",color:"#00BCD4"},{id:"chains",label:"Chains",icon:"⛓️",color:"#795548"},{id:"tools",label:"Tools",icon:"\uD83D\uDD27",color:"#607D8B"},{id:"owlAgent",label:"OwlAgent",icon:"\uD83E\uDD89",color:"#FF5722"}],l=[{type:"start",label:"Start",category:"flowControl",icon:"▶️",description:"フローの開始地点。ユーザー入力を受け取り、後続のノードに渡します。",color:"#8BC34A",inputs:[{name:"inputLabel",label:"Input Label",type:"string",default:"question",description:"入力フィールドのラベル"},{name:"inputPlaceholder",label:"Placeholder",type:"string",default:"Enter your question...",description:"入力フィールドのプレースホルダー"},{name:"inputType",label:"Input Type",type:"select",default:"text",description:"入力の種類",options:[{label:"Text",value:"text"},{label:"Textarea",value:"textarea"},{label:"File Upload",value:"file"}]}],inputHandles:[],outputHandles:[{id:"output",label:"Output",type:"any",position:"right"}]},{type:"end",label:"End",category:"flowControl",icon:"⏹️",description:"フローの終了地点。最終結果を出力します。",color:"#F44336",inputs:[{name:"outputFormat",label:"Output Format",type:"select",default:"text",description:"出力のフォーマット",options:[{label:"Text",value:"text"},{label:"JSON",value:"json"},{label:"Markdown",value:"markdown"}]},{name:"successMessage",label:"Success Message",type:"string",placeholder:"Flow completed successfully",description:"成功時のメッセージ"}],inputHandles:[{id:"input",label:"Input",type:"any",position:"left"}],outputHandles:[]},{type:"condition",label:"Condition",category:"flowControl",icon:"\uD83D\uDD00",description:"条件分岐。条件に基づいて異なる経路にフローを振り分けます。",color:"#FF9800",inputs:[{name:"conditionType",label:"Condition Type",type:"select",default:"contains",description:"条件の種類",options:[{label:"Contains",value:"contains"},{label:"Equals",value:"equals"},{label:"Starts With",value:"startsWith"},{label:"Ends With",value:"endsWith"},{label:"Regex Match",value:"regex"},{label:"Is Empty",value:"isEmpty"},{label:"Custom JavaScript",value:"custom"}]},{name:"conditionValue",label:"Condition Value",type:"string",description:"比較する値またはパターン"},{name:"customCode",label:"Custom Code",type:"text",placeholder:"return input.length > 10;",description:"カスタム条件（JavaScriptコード）"}],inputHandles:[{id:"input",label:"Input",type:"any",position:"left"}],outputHandles:[{id:"true",label:"True",type:"any",position:"right"},{id:"false",label:"False",type:"any",position:"right"}]},{type:"loop",label:"Loop",category:"flowControl",icon:"\uD83D\uDD04",description:"ループ処理。配列の各要素に対して処理を繰り返します。",color:"#9C27B0",inputs:[{name:"maxIterations",label:"Max Iterations",type:"number",default:100,min:1,max:1e3,description:"最大ループ回数"},{name:"itemVariable",label:"Item Variable",type:"string",default:"item",description:"各要素を格納する変数名"},{name:"indexVariable",label:"Index Variable",type:"string",default:"index",description:"インデックスを格納する変数名"}],inputHandles:[{id:"array",label:"Array",type:"any",position:"left"}],outputHandles:[{id:"item",label:"Each Item",type:"any",position:"right"},{id:"complete",label:"Complete",type:"any",position:"bottom"}]},{type:"humanReview",label:"Human Review",category:"flowControl",icon:"\uD83D\uDC64",description:"人間による確認・承認ポイント。AIの出力を人間が確認してから次へ進みます。",color:"#FFD700",inputs:[{name:"enabled",label:"Enabled",type:"boolean",default:!0,description:"確認機能を有効にするか"},{name:"message",label:"Review Message",type:"string",placeholder:"確認してください",description:"確認時に表示するメッセージ"},{name:"allowEdit",label:"Allow Edit",type:"boolean",default:!0,description:"編集を許可するか"},{name:"timeoutSeconds",label:"Timeout (seconds)",type:"number",default:0,min:0,description:"自動承認までの時間（0で無効）"}],inputHandles:[{id:"input",label:"Input",type:"any",position:"left"}],outputHandles:[{id:"output",label:"Output",type:"any",position:"right"}]},{type:"azureChatOpenAI",label:"Azure ChatOpenAI",category:"chatModels",icon:"\uD83D\uDCAC",description:"Azure OpenAI Serviceを使用したチャットモデル。GPT-4、GPT-4o、GPT-3.5 Turboなどのモデルを利用可能。",color:"#4CAF50",inputs:[{name:"deploymentName",label:"Deployment Name",type:"string",required:!0,placeholder:"gpt-4-deployment",description:"Azure OpenAIでデプロイしたモデルの名前"},{name:"modelName",label:"Model Name",type:"select",required:!0,default:"gpt-4",description:"使用するモデルの種類",options:[{label:"GPT-4",value:"gpt-4"},{label:"GPT-4 Turbo",value:"gpt-4-turbo"},{label:"GPT-4o",value:"gpt-4o"},{label:"GPT-4o mini",value:"gpt-4o-mini"},{label:"GPT-3.5 Turbo",value:"gpt-3.5-turbo"}]},{name:"systemMessage",label:"System Message",type:"text",placeholder:"You are a helpful assistant...",description:"AIの役割を定義するシステムメッセージ"},{name:"temperature",label:"Temperature",type:"number",default:.7,min:0,max:2,step:.1,description:"応答のランダム性。0は決定論的、2は最もランダム"},{name:"maxTokens",label:"Max Tokens",type:"number",default:2e3,min:1,max:128e3,description:"生成する最大トークン数"},{name:"topP",label:"Top P",type:"number",default:1,min:0,max:1,step:.1,description:"核サンプリング。確率質量の上位P%からサンプリング"},{name:"frequencyPenalty",label:"Frequency Penalty",type:"number",default:0,min:0,max:2,step:.1,description:"頻度に基づくペナルティ。高いほど同じ単語の繰り返しを抑制"},{name:"presencePenalty",label:"Presence Penalty",type:"number",default:0,min:0,max:2,step:.1,description:"存在に基づくペナルティ。高いほど新しいトピックへの言及を促進"},{name:"apiVersion",label:"API Version",type:"select",default:"2024-02-15-preview",description:"Azure OpenAI APIのバージョン（※APIキーとエンドポイントは環境変数から自動取得）",options:[{label:"2024-08-01-preview",value:"2024-08-01-preview"},{label:"2024-05-01-preview",value:"2024-05-01-preview"},{label:"2024-02-15-preview",value:"2024-02-15-preview"},{label:"2023-12-01-preview",value:"2023-12-01-preview"}]},{name:"timeout",label:"Timeout",type:"number",default:6e4,min:1e3,max:3e5,description:"リクエストのタイムアウト時間（ミリ秒）"}],inputHandles:[{id:"input",label:"Input",type:"any",position:"left"}],outputHandles:[{id:"output",label:"Output",type:"any",position:"right"},{id:"chatModel",label:"Chat Model",type:"chatModel",position:"bottom"}]},{type:"azureOpenAIEmbeddings",label:"Azure OpenAI Embeddings",category:"embeddings",icon:"\uD83D\uDD24",description:"Azure OpenAIの埋め込みモデルを使用してテキストをベクトルに変換。ベクトル検索やセマンティック検索に使用。",color:"#2196F3",inputs:[{name:"deploymentName",label:"Deployment Name",type:"string",required:!0,placeholder:"text-embedding-ada-002",description:"Azure OpenAIでデプロイした埋め込みモデルの名前"},{name:"modelName",label:"Model Name",type:"select",required:!0,default:"text-embedding-ada-002",description:"使用する埋め込みモデル。text-embedding-3-largeが最高精度",options:[{label:"text-embedding-ada-002",value:"text-embedding-ada-002"},{label:"text-embedding-3-small",value:"text-embedding-3-small"},{label:"text-embedding-3-large",value:"text-embedding-3-large"}]},{name:"apiVersion",label:"API Version",type:"string",default:"2024-02-15-preview",description:"Azure OpenAI APIのバージョン（※APIキーとエンドポイントは環境変数から自動取得）"},{name:"batchSize",label:"Batch Size",type:"number",default:512,min:1,max:2048,description:"一度に処理するテキストの数"},{name:"stripNewLines",label:"Strip New Lines",type:"boolean",default:!0,description:"テキストから改行を削除するか"},{name:"dimensions",label:"Dimensions",type:"number",min:1,max:3072,description:"text-embedding-3モデル用の埋め込み次元数（オプション）"}],inputHandles:[{id:"input",label:"Text Input",type:"any",position:"left"}],outputHandles:[{id:"output",label:"Vectors",type:"any",position:"right"},{id:"embeddings",label:"Embeddings",type:"embeddings",position:"bottom"}]},{type:"vectorstore",label:"Vector Store",category:"vectorStores",icon:"\uD83D\uDCDA",description:"汎用ベクトルストア。セマンティック検索に使用。",color:"#9C27B0",inputs:[{name:"provider",label:"Provider",type:"select",default:"pinecone",description:"ベクトルストアプロバイダー",options:[{label:"Pinecone",value:"pinecone"},{label:"Weaviate",value:"weaviate"},{label:"Chroma",value:"chroma"},{label:"Qdrant",value:"qdrant"}]},{name:"indexName",label:"Index Name",type:"string",required:!0,description:"インデックス/コレクション名"},{name:"topK",label:"Top K",type:"number",default:4,min:1,max:100,description:"検索結果として返す上位K件"}],inputHandles:[{id:"input",label:"Query",type:"any",position:"left"}],outputHandles:[{id:"output",label:"Results",type:"any",position:"right"}]},{type:"weaviate",label:"Weaviate",category:"vectorStores",icon:"\uD83D\uDCDA",description:"Weaviateベクターデータベース。セマンティック検索、ハイブリッド検索、フィルタリング機能を提供。",color:"#9C27B0",inputs:[{name:"scheme",label:"Scheme",type:"select",default:"http",description:"接続プロトコル",options:[{label:"HTTP",value:"http"},{label:"HTTPS",value:"https"}]},{name:"host",label:"Host",type:"string",required:!0,placeholder:"localhost:8080",description:"Weaviateサーバーのホストとポート"},{name:"indexName",label:"Index/Class Name",type:"string",required:!0,description:"データを格納するクラス（コレクション）名"},{name:"apiKey",label:"API Key",type:"password",description:"Weaviate Cloud認証用のAPIキー（オプション）"},{name:"textKey",label:"Text Key",type:"string",default:"text",description:"テキストコンテンツを格納するプロパティ名"},{name:"metadataKeys",label:"Metadata Keys",type:"string",placeholder:"key1,key2,key3",description:"メタデータとして保存するキー（カンマ区切り）"},{name:"topK",label:"Top K",type:"number",default:4,min:1,max:100,description:"検索結果として返す上位K件"},{name:"weaviateMetadataFilter",label:"Metadata Filter",type:"json",placeholder:'{"category": "技術"}',description:"メタデータによるフィルタリング条件"}],inputHandles:[{id:"input",label:"Query",type:"any",position:"left"},{id:"embeddings",label:"Embeddings",type:"embeddings",position:"top"},{id:"document",label:"Document",type:"document",position:"top",multiple:!0}],outputHandles:[{id:"output",label:"Results",type:"any",position:"right"},{id:"retriever",label:"Retriever",type:"retriever",position:"bottom"},{id:"vectorStore",label:"Vector Store",type:"vectorStore",position:"bottom"}]},{type:"pdfLoader",label:"PDF Loader",category:"documentLoaders",icon:"\uD83D\uDCC4",description:"PDFファイル読み込み",color:"#FF9800",inputs:[{name:"file",label:"PDF File",type:"file",required:!0},{name:"splitPages",label:"Split Pages",type:"boolean",default:!0}],inputHandles:[{id:"input",label:"File Path",type:"any",position:"left"}],outputHandles:[{id:"output",label:"Content",type:"any",position:"right"},{id:"document",label:"Document",type:"document",position:"bottom"}]},{type:"docxLoader",label:"DOCX Loader",category:"documentLoaders",icon:"\uD83D\uDCDD",description:"Microsoft Word読み込み",color:"#FF9800",inputs:[{name:"file",label:"DOCX File",type:"file",required:!0}],inputHandles:[{id:"input",label:"File Path",type:"any",position:"left"}],outputHandles:[{id:"output",label:"Content",type:"any",position:"right"},{id:"document",label:"Document",type:"document",position:"bottom"}]},{type:"excelLoader",label:"Excel Loader",category:"documentLoaders",icon:"\uD83D\uDCCA",description:"Microsoft Excel読み込み",color:"#FF9800",inputs:[{name:"file",label:"Excel File",type:"file",required:!0},{name:"sheetName",label:"Sheet Name",type:"string",placeholder:"Sheet1"}],inputHandles:[{id:"input",label:"File Path",type:"any",position:"left"}],outputHandles:[{id:"output",label:"Content",type:"any",position:"right"},{id:"document",label:"Document",type:"document",position:"bottom"}]},{type:"pptxLoader",label:"PowerPoint Loader",category:"documentLoaders",icon:"\uD83D\uDCFD️",description:"Microsoft PowerPoint読み込み",color:"#FF9800",inputs:[{name:"file",label:"PPTX File",type:"file",required:!0}],inputHandles:[{id:"input",label:"File Path",type:"any",position:"left"}],outputHandles:[{id:"output",label:"Content",type:"any",position:"right"},{id:"document",label:"Document",type:"document",position:"bottom"}]},{type:"csvLoader",label:"CSV Loader",category:"documentLoaders",icon:"\uD83D\uDCCB",description:"CSVファイル読み込み",color:"#FF9800",inputs:[{name:"file",label:"CSV File",type:"file",required:!0},{name:"columnName",label:"Column Name",type:"string",placeholder:"content"},{name:"separator",label:"Separator",type:"string",default:","}],inputHandles:[{id:"input",label:"File Path",type:"any",position:"left"}],outputHandles:[{id:"output",label:"Content",type:"any",position:"right"},{id:"document",label:"Document",type:"document",position:"bottom"}]},{type:"jsonLoader",label:"JSON Loader",category:"documentLoaders",icon:"\uD83D\uDD27",description:"JSONファイル読み込み",color:"#FF9800",inputs:[{name:"file",label:"JSON File",type:"file",required:!0},{name:"pointer",label:"JSON Pointer",type:"string",placeholder:"/data/items"}],inputHandles:[{id:"input",label:"File Path",type:"any",position:"left"}],outputHandles:[{id:"output",label:"Content",type:"any",position:"right"},{id:"document",label:"Document",type:"document",position:"bottom"}]},{type:"jsonlLoader",label:"JSONL Loader",category:"documentLoaders",icon:"\uD83D\uDCC3",description:"JSON Linesファイル読み込み",color:"#FF9800",inputs:[{name:"file",label:"JSONL File",type:"file",required:!0},{name:"pointer",label:"JSON Pointer",type:"string"}],inputHandles:[{id:"input",label:"File Path",type:"any",position:"left"}],outputHandles:[{id:"output",label:"Content",type:"any",position:"right"},{id:"document",label:"Document",type:"document",position:"bottom"}]},{type:"textLoader",label:"Plain Text Loader",category:"documentLoaders",icon:"\uD83D\uDCF0",description:"テキストファイル読み込み",color:"#FF9800",inputs:[{name:"file",label:"Text File",type:"file",required:!0}],inputHandles:[{id:"input",label:"File Path",type:"any",position:"left"}],outputHandles:[{id:"output",label:"Content",type:"any",position:"right"},{id:"document",label:"Document",type:"document",position:"bottom"}]},{type:"memory",label:"Memory",category:"memory",icon:"\uD83E\uDDE0",description:"汎用メモリノード。会話履歴やコンテキストを保持。",color:"#E91E63",inputs:[{name:"memoryType",label:"Memory Type",type:"select",default:"buffer",description:"メモリの種類",options:[{label:"Buffer",value:"buffer"},{label:"Buffer Window",value:"bufferWindow"},{label:"Redis",value:"redis"}]},{name:"sessionId",label:"Session ID",type:"string",placeholder:"auto-generated if empty"},{name:"windowSize",label:"Window Size",type:"number",default:10,min:1,max:100}],inputHandles:[{id:"input",label:"Input",type:"any",position:"left"}],outputHandles:[{id:"output",label:"Output",type:"any",position:"right"},{id:"memory",label:"Memory",type:"memory",position:"bottom"}]},{type:"redisMemory",label:"Redis-Backed Chat Memory",category:"memory",icon:"\uD83E\uDDE0",description:"Redisに会話履歴を永続化。セッション間での会話継続、スケーラブルなメモリ管理を実現。",color:"#E91E63",inputs:[{name:"redisUrl",label:"Redis URL",type:"string",required:!0,placeholder:"redis://localhost:6379",description:"Redis接続URL（redis://host:port形式）"},{name:"sessionId",label:"Session ID",type:"string",placeholder:"auto-generated if empty",description:"会話セッションの識別子。空の場合は自動生成"},{name:"sessionTTL",label:"Session TTL",type:"number",default:3600,min:0,description:"セッションの有効期限（秒）。0は無期限"},{name:"memoryKey",label:"Memory Key",type:"string",default:"chat_history",description:"会話履歴を格納するキー名"},{name:"windowSize",label:"Window Size",type:"number",default:10,min:1,max:100,description:"保持する会話ターン数"},{name:"inputKey",label:"Input Key",type:"string",default:"input",description:"ユーザー入力を格納するキー"},{name:"outputKey",label:"Output Key",type:"string",default:"output",description:"AI応答を格納するキー"},{name:"returnMessages",label:"Return Messages",type:"boolean",default:!0,description:"メッセージオブジェクトとして返すか"}],inputHandles:[],outputHandles:[{id:"memory",label:"Memory",type:"memory",position:"right"}]},{type:"bufferMemory",label:"Buffer Memory",category:"memory",icon:"\uD83D\uDCDD",description:"インメモリの会話履歴。シンプルで高速だが、サーバー再起動で消失。",color:"#E91E63",inputs:[{name:"sessionId",label:"Session ID",type:"string",placeholder:"auto-generated if empty",description:"会話セッションの識別子"},{name:"memoryKey",label:"Memory Key",type:"string",default:"chat_history",description:"会話履歴を格納するキー名"},{name:"inputKey",label:"Input Key",type:"string",default:"input",description:"ユーザー入力を格納するキー"},{name:"outputKey",label:"Output Key",type:"string",default:"output",description:"AI応答を格納するキー"},{name:"returnMessages",label:"Return Messages",type:"boolean",default:!0,description:"メッセージオブジェクトとして返すか"}],inputHandles:[],outputHandles:[{id:"memory",label:"Memory",type:"memory",position:"right"}]},{type:"bufferWindowMemory",label:"Buffer Window Memory",category:"memory",icon:"\uD83E\uDE9F",description:"直近K回の会話のみを保持するメモリ。長い会話でもトークン数を制限可能。",color:"#E91E63",inputs:[{name:"sessionId",label:"Session ID",type:"string",placeholder:"auto-generated if empty",description:"会話セッションの識別子"},{name:"k",label:"Window Size (K)",type:"number",default:5,min:1,max:50,description:"保持する会話ターン数"},{name:"memoryKey",label:"Memory Key",type:"string",default:"chat_history",description:"会話履歴を格納するキー名"},{name:"returnMessages",label:"Return Messages",type:"boolean",default:!0,description:"メッセージオブジェクトとして返すか"}],inputHandles:[],outputHandles:[{id:"memory",label:"Memory",type:"memory",position:"right"}]},{type:"conversationalAgent",label:"Conversational Agent",category:"agents",icon:"\uD83D\uDCAC",description:"対話型エージェント",color:"#00BCD4",inputs:[{name:"systemMessage",label:"System Message",type:"text",placeholder:"You are a helpful assistant..."},{name:"maxIterations",label:"Max Iterations",type:"number",default:10,min:1,max:50}],inputHandles:[{id:"input",label:"Input",type:"any",position:"left"},{id:"chatModel",label:"Chat Model",type:"chatModel",position:"top"},{id:"tools",label:"Tools",type:"tool",position:"top",multiple:!0},{id:"memory",label:"Memory",type:"memory",position:"bottom"}],outputHandles:[{id:"output",label:"Output",type:"any",position:"right"},{id:"agent",label:"Agent",type:"agent",position:"bottom"}]},{type:"conversationalRetrievalAgent",label:"Conversational Retrieval Agent",category:"agents",icon:"\uD83D\uDD0D",description:"対話+検索エージェント",color:"#00BCD4",inputs:[{name:"systemMessage",label:"System Message",type:"text"},{name:"maxIterations",label:"Max Iterations",type:"number",default:10,min:1,max:50}],inputHandles:[{id:"input",label:"Input",type:"any",position:"left"},{id:"chatModel",label:"Chat Model",type:"chatModel",position:"top"},{id:"retriever",label:"Retriever",type:"retriever",position:"top"},{id:"tools",label:"Tools",type:"tool",position:"top",multiple:!0},{id:"memory",label:"Memory",type:"memory",position:"bottom"}],outputHandles:[{id:"output",label:"Output",type:"any",position:"right"},{id:"agent",label:"Agent",type:"agent",position:"bottom"}]},{type:"azureOpenAIAssistant",label:"Azure OpenAI Assistant",category:"agents",icon:"\uD83C\uDF93",description:"Azure OpenAI Assistant API連携（※APIキーとエンドポイントは環境変数から自動取得）",color:"#00BCD4",inputs:[{name:"assistantId",label:"Assistant ID",type:"string",required:!0,description:"Azure OpenAIで作成したAssistantのID"}],inputHandles:[{id:"input",label:"Input",type:"any",position:"left"}],outputHandles:[{id:"output",label:"Output",type:"any",position:"right"},{id:"agent",label:"Agent",type:"agent",position:"bottom"}]},{type:"azureFunctionAgent",label:"Azure Function Agent",category:"agents",icon:"⚙️",description:"Azure OpenAI Function Calling対応（※APIキーとエンドポイントは環境変数から自動取得）",color:"#00BCD4",inputs:[{name:"systemMessage",label:"System Message",type:"text"},{name:"maxIterations",label:"Max Iterations",type:"number",default:10}],inputHandles:[{id:"input",label:"Input",type:"any",position:"left"},{id:"chatModel",label:"Chat Model",type:"chatModel",position:"top"},{id:"tools",label:"Tools",type:"tool",position:"top",multiple:!0},{id:"memory",label:"Memory",type:"memory",position:"bottom"}],outputHandles:[{id:"output",label:"Output",type:"any",position:"right"},{id:"agent",label:"Agent",type:"agent",position:"bottom"}]},{type:"azureToolAgent",label:"Azure Tool Agent",category:"agents",icon:"\uD83D\uDEE0️",description:"Azure OpenAI Tool Use対応（※APIキーとエンドポイントは環境変数から自動取得）",color:"#00BCD4",inputs:[{name:"systemMessage",label:"System Message",type:"text"},{name:"maxIterations",label:"Max Iterations",type:"number",default:10}],inputHandles:[{id:"input",label:"Input",type:"any",position:"left"},{id:"chatModel",label:"Chat Model",type:"chatModel",position:"top"},{id:"tools",label:"Tools",type:"tool",position:"top",multiple:!0},{id:"memory",label:"Memory",type:"memory",position:"bottom"}],outputHandles:[{id:"output",label:"Output",type:"any",position:"right"},{id:"agent",label:"Agent",type:"agent",position:"bottom"}]},{type:"reactAgentChat",label:"ReAct Agent Chat",category:"agents",icon:"\uD83E\uDDE0",description:"ReAct推論（チャット形式）",color:"#00BCD4",inputs:[{name:"systemMessage",label:"System Message",type:"text"},{name:"maxIterations",label:"Max Iterations",type:"number",default:10}],inputHandles:[{id:"input",label:"Input",type:"any",position:"left"},{id:"chatModel",label:"Chat Model",type:"chatModel",position:"top"},{id:"tools",label:"Tools",type:"tool",position:"top",multiple:!0},{id:"memory",label:"Memory",type:"memory",position:"bottom"}],outputHandles:[{id:"output",label:"Output",type:"any",position:"right"},{id:"agent",label:"Agent",type:"agent",position:"bottom"}]},{type:"toolAgent",label:"Tool Agent",category:"agents",icon:"\uD83D\uDD27",description:"汎用ツールエージェント",color:"#00BCD4",inputs:[{name:"systemMessage",label:"System Message",type:"text"},{name:"maxIterations",label:"Max Iterations",type:"number",default:10}],inputHandles:[{id:"input",label:"Input",type:"any",position:"left"},{id:"chatModel",label:"Chat Model",type:"chatModel",position:"top"},{id:"tools",label:"Tools",type:"tool",position:"top",multiple:!0},{id:"memory",label:"Memory",type:"memory",position:"bottom"}],outputHandles:[{id:"output",label:"Output",type:"any",position:"right"},{id:"agent",label:"Agent",type:"agent",position:"bottom"}]},{type:"llmChain",label:"LLM Chain",category:"chains",icon:"⛓️",description:"基本LLMチェーン",color:"#795548",inputs:[{name:"promptTemplate",label:"Prompt Template",type:"text",required:!0,placeholder:"You are a helpful assistant. {input}"}],inputHandles:[{id:"input",label:"Input",type:"any",position:"left"},{id:"chatModel",label:"Chat Model",type:"chatModel",position:"top"}],outputHandles:[{id:"output",label:"Output",type:"any",position:"right"},{id:"chain",label:"Chain",type:"chain",position:"bottom"}]},{type:"conversationChain",label:"Conversation Chain",category:"chains",icon:"\uD83D\uDCAC",description:"対話管理チェーン",color:"#795548",inputs:[{name:"systemMessage",label:"System Message",type:"text"}],inputHandles:[{id:"input",label:"Input",type:"any",position:"left"},{id:"chatModel",label:"Chat Model",type:"chatModel",position:"top"},{id:"memory",label:"Memory",type:"memory",position:"bottom"}],outputHandles:[{id:"output",label:"Output",type:"any",position:"right"},{id:"chain",label:"Chain",type:"chain",position:"bottom"}]},{type:"retrievalQAChain",label:"Retrieval QA Chain",category:"chains",icon:"\uD83D\uDD0E",description:"検索QAチェーン",color:"#795548",inputs:[{name:"returnSourceDocuments",label:"Return Source Documents",type:"boolean",default:!0},{name:"topK",label:"Top K",type:"number",default:4,min:1,max:20}],inputHandles:[{id:"input",label:"Input",type:"any",position:"left"},{id:"chatModel",label:"Chat Model",type:"chatModel",position:"top"},{id:"retriever",label:"Retriever",type:"retriever",position:"top"}],outputHandles:[{id:"output",label:"Output",type:"any",position:"right"},{id:"chain",label:"Chain",type:"chain",position:"bottom"}]},{type:"conversationalRetrievalQAChain",label:"Conversational Retrieval QA Chain",category:"chains",icon:"\uD83D\uDD0D",description:"対話+検索QAチェーン",color:"#795548",inputs:[{name:"returnSourceDocuments",label:"Return Source Documents",type:"boolean",default:!0},{name:"topK",label:"Top K",type:"number",default:4}],inputHandles:[{id:"input",label:"Input",type:"any",position:"left"},{id:"chatModel",label:"Chat Model",type:"chatModel",position:"top"},{id:"retriever",label:"Retriever",type:"retriever",position:"top"},{id:"memory",label:"Memory",type:"memory",position:"bottom"}],outputHandles:[{id:"output",label:"Output",type:"any",position:"right"},{id:"chain",label:"Chain",type:"chain",position:"bottom"}]},{type:"apiChainGet",label:"GET API Chain",category:"chains",icon:"\uD83C\uDF10",description:"GET APIリクエストチェーン",color:"#795548",inputs:[{name:"apiUrl",label:"API URL",type:"string",required:!0},{name:"headers",label:"Headers",type:"json",placeholder:'{"Authorization": "Bearer xxx"}'}],inputHandles:[{id:"input",label:"Input",type:"any",position:"left"},{id:"chatModel",label:"Chat Model",type:"chatModel",position:"top"}],outputHandles:[{id:"output",label:"Output",type:"any",position:"right"},{id:"chain",label:"Chain",type:"chain",position:"bottom"}]},{type:"apiChainPost",label:"POST API Chain",category:"chains",icon:"\uD83D\uDCEE",description:"POST APIリクエストチェーン",color:"#795548",inputs:[{name:"apiUrl",label:"API URL",type:"string",required:!0},{name:"headers",label:"Headers",type:"json"},{name:"body",label:"Request Body",type:"json"}],inputHandles:[{id:"input",label:"Input",type:"any",position:"left"},{id:"chatModel",label:"Chat Model",type:"chatModel",position:"top"}],outputHandles:[{id:"output",label:"Output",type:"any",position:"right"},{id:"chain",label:"Chain",type:"chain",position:"bottom"}]},{type:"sqlDatabaseChain",label:"SQL Database Chain",category:"chains",icon:"\uD83D\uDDC4️",description:"SQLデータベースチェーン",color:"#795548",inputs:[{name:"connectionString",label:"Connection String",type:"password",required:!0},{name:"includeTables",label:"Include Tables",type:"string",placeholder:"table1,table2"},{name:"excludeTables",label:"Exclude Tables",type:"string"}],inputHandles:[{id:"input",label:"Input",type:"any",position:"left"},{id:"chatModel",label:"Chat Model",type:"chatModel",position:"top"}],outputHandles:[{id:"output",label:"Output",type:"any",position:"right"},{id:"chain",label:"Chain",type:"chain",position:"bottom"}]},{type:"tool",label:"Tool",category:"tools",icon:"\uD83D\uDD27",description:"汎用ツール。API呼び出しやカスタム処理を実行。",color:"#607D8B",inputs:[{name:"toolType",label:"Tool Type",type:"select",default:"api",description:"ツールの種類",options:[{label:"API Call",value:"api"},{label:"Custom Function",value:"custom"},{label:"Database Query",value:"database"}]},{name:"apiEndpoint",label:"API Endpoint",type:"string",placeholder:"/api/..."},{name:"method",label:"Method",type:"select",default:"POST",options:[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"PUT",value:"PUT"},{label:"DELETE",value:"DELETE"}]}],inputHandles:[{id:"input",label:"Input",type:"any",position:"left"}],outputHandles:[{id:"output",label:"Output",type:"any",position:"right"},{id:"tool",label:"Tool",type:"tool",position:"bottom"}]},{type:"serper",label:"Serper",category:"tools",icon:"\uD83D\uDD0D",description:"Serper検索",color:"#607D8B",inputs:[{name:"apiKey",label:"Serper API Key",type:"password",required:!0},{name:"numResults",label:"Number of Results",type:"number",default:10,min:1,max:100}],inputHandles:[{id:"input",label:"Query",type:"any",position:"left"}],outputHandles:[{id:"output",label:"Results",type:"any",position:"right"},{id:"tool",label:"Tool",type:"tool",position:"bottom"}]},{type:"tavily",label:"Tavily",category:"tools",icon:"\uD83D\uDD0E",description:"Tavily AI検索",color:"#607D8B",inputs:[{name:"apiKey",label:"Tavily API Key",type:"password",required:!0},{name:"maxResults",label:"Max Results",type:"number",default:5,min:1,max:20}],inputHandles:[{id:"input",label:"Query",type:"any",position:"left"}],outputHandles:[{id:"output",label:"Results",type:"any",position:"right"},{id:"tool",label:"Tool",type:"tool",position:"bottom"}]},{type:"braveSearch",label:"BraveSearch API",category:"tools",icon:"\uD83D\uDD0D",description:"Brave Search検索",color:"#607D8B",inputs:[{name:"apiKey",label:"Brave Search API Key",type:"password",required:!0},{name:"count",label:"Result Count",type:"number",default:10}],inputHandles:[{id:"input",label:"Query",type:"any",position:"left"}],outputHandles:[{id:"output",label:"Results",type:"any",position:"right"},{id:"tool",label:"Tool",type:"tool",position:"bottom"}]},{type:"googleCustomSearch",label:"Google Custom Search",category:"tools",icon:"\uD83D\uDD0D",description:"Google Custom Search",color:"#607D8B",inputs:[{name:"apiKey",label:"Google API Key",type:"password",required:!0},{name:"searchEngineId",label:"Search Engine ID",type:"string",required:!0}],inputHandles:[{id:"input",label:"Query",type:"any",position:"left"}],outputHandles:[{id:"output",label:"Results",type:"any",position:"right"},{id:"tool",label:"Tool",type:"tool",position:"bottom"}]},{type:"webBrowser",label:"Web Browser",category:"tools",icon:"\uD83C\uDF10",description:"Webブラウザ操作",color:"#607D8B",inputs:[],inputHandles:[{id:"input",label:"URL",type:"any",position:"left"},{id:"chatModel",label:"Chat Model",type:"chatModel",position:"top"},{id:"embeddings",label:"Embeddings",type:"embeddings",position:"top"}],outputHandles:[{id:"output",label:"Content",type:"any",position:"right"},{id:"tool",label:"Tool",type:"tool",position:"bottom"}]},{type:"calculator",label:"Calculator",category:"tools",icon:"\uD83E\uDDEE",description:"計算ツール",color:"#607D8B",inputs:[],inputHandles:[{id:"input",label:"Expression",type:"any",position:"left"}],outputHandles:[{id:"output",label:"Result",type:"any",position:"right"},{id:"tool",label:"Tool",type:"tool",position:"bottom"}]},{type:"customTool",label:"Custom Tool",category:"tools",icon:"\uD83D\uDEE0️",description:"カスタムツール定義",color:"#607D8B",inputs:[{name:"toolName",label:"Tool Name",type:"string",required:!0},{name:"toolDescription",label:"Tool Description",type:"text",required:!0},{name:"jsCode",label:"JavaScript Code",type:"text",required:!0,placeholder:'return "Hello " + input;'}],inputHandles:[{id:"input",label:"Input",type:"any",position:"left"}],outputHandles:[{id:"output",label:"Output",type:"any",position:"right"},{id:"tool",label:"Tool",type:"tool",position:"bottom"}]},{type:"chainTool",label:"Chain Tool",category:"tools",icon:"⛓️",description:"チェーンをツール化",color:"#607D8B",inputs:[{name:"toolName",label:"Tool Name",type:"string",required:!0},{name:"toolDescription",label:"Tool Description",type:"text",required:!0}],inputHandles:[{id:"input",label:"Input",type:"any",position:"left"},{id:"chain",label:"Chain",type:"chain",position:"top"}],outputHandles:[{id:"output",label:"Output",type:"any",position:"right"},{id:"tool",label:"Tool",type:"tool",position:"bottom"}]},{type:"retrieverTool",label:"Retriever Tool",category:"tools",icon:"\uD83D\uDD0D",description:"検索をツール化",color:"#607D8B",inputs:[{name:"toolName",label:"Tool Name",type:"string",required:!0},{name:"toolDescription",label:"Tool Description",type:"text",required:!0}],inputHandles:[{id:"input",label:"Query",type:"any",position:"left"},{id:"retriever",label:"Retriever",type:"retriever",position:"top"}],outputHandles:[{id:"output",label:"Results",type:"any",position:"right"},{id:"tool",label:"Tool",type:"tool",position:"bottom"}]},{type:"requestGet",label:"Request Get",category:"tools",icon:"\uD83C\uDF10",description:"HTTP GETリクエスト",color:"#607D8B",inputs:[{name:"url",label:"URL",type:"string",required:!0},{name:"headers",label:"Headers",type:"json"},{name:"description",label:"Description",type:"string"}],inputHandles:[{id:"input",label:"URL/Params",type:"any",position:"left"}],outputHandles:[{id:"output",label:"Response",type:"any",position:"right"},{id:"tool",label:"Tool",type:"tool",position:"bottom"}]},{type:"requestPost",label:"Request Post",category:"tools",icon:"\uD83D\uDCEE",description:"HTTP POSTリクエスト",color:"#607D8B",inputs:[{name:"url",label:"URL",type:"string",required:!0},{name:"headers",label:"Headers",type:"json"},{name:"body",label:"Body",type:"json"},{name:"description",label:"Description",type:"string"}],inputHandles:[{id:"input",label:"Body/Params",type:"any",position:"left"}],outputHandles:[{id:"output",label:"Response",type:"any",position:"right"},{id:"tool",label:"Tool",type:"tool",position:"bottom"}]},{type:"readFile",label:"Read File",category:"tools",icon:"\uD83D\uDCD6",description:"ファイル読み取り",color:"#607D8B",inputs:[{name:"basePath",label:"Base Path",type:"string"}],inputHandles:[{id:"input",label:"File Path",type:"any",position:"left"}],outputHandles:[{id:"output",label:"Content",type:"any",position:"right"},{id:"tool",label:"Tool",type:"tool",position:"bottom"}]},{type:"writeFile",label:"Write File",category:"tools",icon:"✍️",description:"ファイル書き込み",color:"#607D8B",inputs:[{name:"basePath",label:"Base Path",type:"string"}],inputHandles:[{id:"input",label:"Content",type:"any",position:"left"}],outputHandles:[{id:"output",label:"Result",type:"any",position:"right"},{id:"tool",label:"Tool",type:"tool",position:"bottom"}]},{type:"owlAgentReference",label:"OwlAgent Reference",category:"owlAgent",icon:"\uD83E\uDD89",description:"保存済みOwlAgentを参照",color:"#FF5722",inputs:[{name:"agentId",label:"Agent",type:"select",required:!0,options:[]},{name:"inputMapping",label:"Input Mapping",type:"json"},{name:"outputMapping",label:"Output Mapping",type:"json"}],inputHandles:[{id:"input",label:"Input",type:"any",position:"left"}],outputHandles:[{id:"output",label:"Output",type:"any",position:"right"}]}],i=e=>l.filter(t=>t.category===e),a=e=>l.find(t=>t.type===e)}}]);