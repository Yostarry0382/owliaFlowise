"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[841],{48841:(e,l,s)=>{s.r(l),s.d(l,{default:()=>j});var o=s(95155),i=s(12115),n=s(34004),r=s(48699),t=s(39732),c=s(13538),a=s(30495),x=s(61040),d=s(48726);let h=(0,s(20389).A)((0,o.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh");var f=s(60917);function j(e){let{chatflowId:l,apiHost:s,height:j="100%",showHeader:b=!0,onClose:p}=e,[u,g]=(0,i.useState)(!0),[A,m]=(0,i.useState)(null),[C,w]=(0,i.useState)(0),y=s||"http://localhost:3001",v=l?"".concat(y,"/canvas/").concat(l):"".concat(y,"/chatflows");(0,i.useEffect)(()=>{g(!0),m(null)},[l,y]);let z=()=>{w(e=>e+1),g(!0),m(null)};return(0,o.jsxs)(n.A,{sx:{height:"number"==typeof j?"".concat(j,"px"):j,display:"flex",flexDirection:"column",bgcolor:"#1a1a2e",borderRadius:b?1:0,overflow:"hidden",border:b?"1px solid #0f3460":"none"},children:[b&&(0,o.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:2,py:1,bgcolor:"#16213e",borderBottom:"1px solid #0f3460"},children:[(0,o.jsx)(r.A,{variant:"subtitle1",sx:{color:"#fff",fontWeight:600},children:l?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{style:{marginRight:8},children:"\uD83D\uDCCA"}),"Flowise Canvas"]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{style:{marginRight:8},children:"\uD83D\uDCCB"}),"Flowise Chatflows"]})}),(0,o.jsxs)(n.A,{sx:{display:"flex",gap:1},children:[(0,o.jsx)(t.A,{title:"更新",children:(0,o.jsx)(c.A,{size:"small",onClick:z,sx:{color:"rgba(255,255,255,0.7)","&:hover":{color:"#90CAF9"}},children:(0,o.jsx)(h,{fontSize:"small"})})}),(0,o.jsx)(t.A,{title:"新しいタブで開く",children:(0,o.jsx)(c.A,{size:"small",onClick:()=>{window.open(v,"_blank")},sx:{color:"rgba(255,255,255,0.7)","&:hover":{color:"#90CAF9"}},children:(0,o.jsx)(d.A,{fontSize:"small"})})}),p&&(0,o.jsx)(t.A,{title:"閉じる",children:(0,o.jsx)(c.A,{size:"small",onClick:p,sx:{color:"rgba(255,255,255,0.7)","&:hover":{color:"#e94560"}},children:(0,o.jsx)(f.A,{fontSize:"small"})})})]})]}),(0,o.jsxs)(n.A,{sx:{flex:1,position:"relative"},children:[u&&(0,o.jsxs)(n.A,{sx:{position:"absolute",inset:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",bgcolor:"#1a1a2e",zIndex:10},children:[(0,o.jsx)(a.A,{sx:{color:"#e94560",mb:2}}),(0,o.jsx)(r.A,{variant:"body2",sx:{color:"rgba(255,255,255,0.7)"},children:"Flowiseを読み込んでいます..."})]}),A&&(0,o.jsxs)(n.A,{sx:{position:"absolute",inset:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",bgcolor:"#1a1a2e",zIndex:10,p:4},children:[(0,o.jsx)(x.A,{severity:"error",sx:{maxWidth:400,bgcolor:"rgba(244, 67, 54, 0.1)",color:"#f44336",border:"1px solid #f44336"},action:(0,o.jsx)(c.A,{size:"small",onClick:z,sx:{color:"#f44336"},children:(0,o.jsx)(h,{fontSize:"small"})}),children:A}),(0,o.jsxs)(r.A,{variant:"body2",sx:{color:"rgba(255,255,255,0.5)",mt:2,textAlign:"center"},children:["Flowise URL: ",y]})]}),(0,o.jsx)("iframe",{src:v,style:{width:"100%",height:"100%",border:"none",display:A?"none":"block"},onLoad:()=>{g(!1)},onError:()=>{g(!1),m("Flowiseへの接続に失敗しました。Flowiseサーバーが起動しているか確認してください。")},title:"Flowise Canvas",allow:"clipboard-read; clipboard-write"},C)]})]})}}}]);