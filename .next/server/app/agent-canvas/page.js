(()=>{var e={};e.id=683,e.ids=[683],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},85532:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>h,pages:()=>c,routeModule:()=>p,tree:()=>d});var r=s(70260),n=s(28203),a=s(25155),i=s.n(a),o=s(67292),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d=["",{children:["agent-canvas",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,40587)),"C:\\Users\\yrk20\\OwliaFabrica2\\app\\agent-canvas\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,19611)),"C:\\Users\\yrk20\\OwliaFabrica2\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19937,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\yrk20\\OwliaFabrica2\\app\\agent-canvas\\page.tsx"],h={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/agent-canvas/page",pathname:"/agent-canvas",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},83117:(e,t,s)=>{Promise.resolve().then(s.bind(s,40587))},30381:(e,t,s)=>{Promise.resolve().then(s.bind(s,69448))},47436:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,13219,23)),Promise.resolve().then(s.t.bind(s,34863,23)),Promise.resolve().then(s.t.bind(s,25155,23)),Promise.resolve().then(s.t.bind(s,9350,23)),Promise.resolve().then(s.t.bind(s,96313,23)),Promise.resolve().then(s.t.bind(s,48530,23)),Promise.resolve().then(s.t.bind(s,88921,23))},53516:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,66959,23)),Promise.resolve().then(s.t.bind(s,33875,23)),Promise.resolve().then(s.t.bind(s,88903,23)),Promise.resolve().then(s.t.bind(s,84178,23)),Promise.resolve().then(s.t.bind(s,86013,23)),Promise.resolve().then(s.t.bind(s,87190,23)),Promise.resolve().then(s.t.bind(s,61365,23))},71061:()=>{},61333:()=>{},69448:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s(45512),n=s(58009),a=s(20908),i=s(84284),o=s(50323);let l=(0,s(66214).A)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");var d=s(77800),c=s(79334);function h(){let e=(0,c.useRouter)(),[t,s]=(0,n.useState)([]),[h,p]=(0,n.useState)(!0),[x,u]=(0,n.useState)(null),[v,m]=(0,n.useState)(!1),[g,j]=(0,n.useState)(""),[y,f]=(0,n.useState)(""),b=async()=>{p(!0),u(null);try{let e=await fetch("/api/owlagents");if(e.ok){let t=await e.json();s(t)}else u("エージェントの読み込みに失敗しました")}catch(e){u("エージェントの読み込み中にエラーが発生しました")}finally{p(!1)}},C=async()=>{if(g.trim()&&y.trim())try{let t=await fetch("/api/owlagents",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:g,description:y,iconStyle:"default",version:"1.0.0",flow:{nodes:[],edges:[]}})});if(t.ok){let s=await t.json();m(!1),j(""),f(""),e.push(`/agent-canvas/${s.id}`)}else u("エージェントの作成に失敗しました")}catch(e){u("エージェントの作成中にエラーが発生しました")}},w=async e=>{if(confirm("このエージェントを削除しますか？"))try{(await fetch(`/api/owlagents?id=${e}`,{method:"DELETE"})).ok?b():u("エージェントの削除に失敗しました")}catch(e){u("エージェントの削除中にエラーが発生しました")}};return h?(0,r.jsx)(a.Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,r.jsx)(a.CircularProgress,{})}):(0,r.jsxs)(a.Box,{sx:{p:4},children:[(0,r.jsxs)(a.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[(0,r.jsxs)(a.Box,{children:[(0,r.jsx)(a.Typography,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:"エージェント作成"}),(0,r.jsx)(a.Typography,{variant:"body1",color:"text.secondary",children:"AIエージェントを作成・管理します"})]}),(0,r.jsx)(a.Button,{variant:"contained",size:"large",startIcon:(0,r.jsx)(i.A,{}),onClick:()=>m(!0),children:"新規作成"})]}),x&&(0,r.jsx)(a.Alert,{severity:"error",sx:{mb:3},onClose:()=>u(null),children:x}),0===t.length?(0,r.jsxs)(a.Paper,{sx:{p:8,textAlign:"center"},children:[(0,r.jsx)(a.Typography,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"エージェントがありません"}),(0,r.jsx)(a.Typography,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"新しいエージェントを作成してください"}),(0,r.jsx)(a.Button,{variant:"contained",startIcon:(0,r.jsx)(i.A,{}),onClick:()=>m(!0),children:"新規作成"})]}):(0,r.jsx)(a.Box,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr",md:"1fr 1fr 1fr"},gap:3},children:t.map(t=>(0,r.jsx)(a.Box,{children:(0,r.jsxs)(a.Card,{children:[(0,r.jsxs)(a.CardContent,{children:[(0,r.jsxs)(a.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"start",mb:2},children:[(0,r.jsx)(a.Typography,{variant:"h6",fontWeight:"bold",children:t.name}),(0,r.jsx)(a.Chip,{label:t.version,size:"small"})]}),(0,r.jsx)(a.Typography,{variant:"body2",color:"text.secondary",sx:{mb:2},children:t.description}),t.tags&&t.tags.length>0&&(0,r.jsx)(a.Box,{sx:{display:"flex",gap:.5,flexWrap:"wrap",mb:1},children:t.tags.map((e,t)=>(0,r.jsx)(a.Chip,{label:e,size:"small",variant:"outlined"},t))}),(0,r.jsxs)(a.Typography,{variant:"caption",color:"text.secondary",children:["ノード数: ",t.flow.nodes.length," | エッジ数: ",t.flow.edges.length]})]}),(0,r.jsxs)(a.CardActions,{sx:{justifyContent:"space-between",px:2,pb:2},children:[(0,r.jsxs)(a.Box,{sx:{display:"flex",gap:1},children:[(0,r.jsx)(a.Button,{variant:"outlined",size:"small",startIcon:(0,r.jsx)(o.A,{}),onClick:()=>e.push(`/agent-canvas/${t.id}`),color:"primary",children:"編集"}),(0,r.jsx)(a.IconButton,{size:"small",onClick:()=>w(t.id),title:"削除",color:"error",children:(0,r.jsx)(l,{})})]}),(0,r.jsx)(a.Button,{variant:"contained",size:"small",startIcon:(0,r.jsx)(d.A,{}),onClick:()=>e.push(`/agent-canvas/${t.id}/run`),children:"実行"})]})]})},t.id))}),(0,r.jsxs)(a.Dialog,{open:v,onClose:()=>m(!1),maxWidth:"sm",fullWidth:!0,children:[(0,r.jsx)(a.DialogTitle,{children:"新規エージェント作成"}),(0,r.jsx)(a.DialogContent,{children:(0,r.jsxs)(a.Box,{sx:{pt:1},children:[(0,r.jsx)(a.TextField,{fullWidth:!0,label:"エージェント名",value:g,onChange:e=>j(e.target.value),sx:{mb:2},required:!0}),(0,r.jsx)(a.TextField,{fullWidth:!0,label:"説明",value:y,onChange:e=>f(e.target.value),multiline:!0,rows:3,required:!0})]})}),(0,r.jsxs)(a.DialogActions,{children:[(0,r.jsx)(a.Button,{onClick:()=>m(!1),children:"キャンセル"}),(0,r.jsx)(a.Button,{variant:"contained",onClick:C,disabled:!g.trim()||!y.trim(),children:"作成して編集"})]})]})]})}},40587:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\yrk20\\\\OwliaFabrica2\\\\app\\\\agent-canvas\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\yrk20\\OwliaFabrica2\\app\\agent-canvas\\page.tsx","default")},19611:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o,metadata:()=>i});var r=s(62740),n=s(61421),a=s.n(n);s(82704);let i={title:"Owlia Fabrica - Flowise AI Assistant",description:"AI-powered assistant using Flowise and Next.js"};function o({children:e}){return(0,r.jsx)("html",{lang:"ja",children:(0,r.jsx)("body",{className:a().className,children:e})})}},82704:()=>{},84284:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(66214),n=s(45512);let a=(0,r.A)((0,n.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},50323:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(66214),n=s(45512);let a=(0,r.A)((0,n.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},77800:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(66214),n=s(45512);let a=(0,r.A)((0,n.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[989,84,80],()=>s(85532));module.exports=r})();