# タスク詳細一覧

このドキュメントでは、03-feature-list.md の機能をタスクレベルに分解し、具体的な実装内容を定義する。

---

## 1. エージェント作成者向け機能

| フェーズ | 誰向け | 区分 | 機能名 | タスク | タスク詳細 |
|---------|--------|------|--------|--------|------------|
| 1 | 作成者 | コンセプト設計 | エージェント基本情報設定画面 | 基本情報入力フォームの作成 | エージェント名、一行説明の入力フィールドを実装 |
| 1 | 作成者 | コンセプト設計 | エージェント基本情報設定画面 | 対象ユーザー選択UI | 「自分のみ/チーム/部署/全社」のラジオボタン or セレクトボックスを実装 |
| 1 | 作成者 | コンセプト設計 | エージェント基本情報設定画面 | タグ・カテゴリ設定 | タグの追加・削除・検索機能を実装（Autocomplete） |
| 1 | 作成者 | コンセプト設計 | エージェント基本情報設定画面 | できること・できないこと登録 | テキストエリアまたはリスト形式での入力UI |
| 1 | 作成者 | コンセプト設計 | エージェント基本情報設定画面 | バリデーション実装 | 必須項目チェック、文字数制限、重複チェック |
| 1 | 作成者 | コンセプト設計 | エージェント基本情報設定画面 | API実装 | POST/PUT/GET エンドポイントの作成 |
| 1 | 作成者 | コンセプトテンプレ | 用途別テンプレート | テンプレート定義ファイル作成 | JSON/YAML形式でテンプレートのスキーマ定義 |
| 1 | 作成者 | コンセプトテンプレ | 用途別テンプレート | 社内規程FAQテンプレート | 規程検索・回答生成のフロー雛形を作成 |
| 1 | 作成者 | コンセプトテンプレ | 用途別テンプレート | 開発プロセスQ&Aテンプレート | 開発ドキュメント検索・技術回答のフロー雛形を作成 |
| 1 | 作成者 | コンセプトテンプレ | 用途別テンプレート | 提案資料作成支援テンプレート | 資料検索・ドラフト生成のフロー雛形を作成 |
| 1 | 作成者 | コンセプトテンプレ | 用途別テンプレート | テンプレート選択UI | テンプレート一覧表示・プレビュー・選択機能 |
| 1 | 作成者 | コンセプトテンプレ | 用途別テンプレート | テンプレート適用処理 | 選択したテンプレートからフロー自動生成 |
| 1 | 作成者 | RAG管理 | FabricaからRAGの作成・編集 | RAG一覧画面 | 登録済みRAGのリスト表示（名前、ソース、更新日時） |
| 1 | 作成者 | RAG管理 | FabricaからRAGの作成・編集 | RAG新規作成フォーム | RAG名、説明、ソースタイプ選択UI |
| 1 | 作成者 | RAG管理 | FabricaからRAGの作成・編集 | ファイルアップロード機能 | PDF/Word/Excel/テキストのアップロード・パース |
| 1 | 作成者 | RAG管理 | FabricaからRAGの作成・編集 | チャンク設定UI | チャンクサイズ、オーバーラップ設定 |
| 1 | 作成者 | RAG管理 | FabricaからRAGの作成・編集 | エンベディング処理 | アップロードファイルのベクトル化・保存 |
| 1 | 作成者 | RAG管理 | FabricaからRAGの作成・編集 | RAG編集機能 | 既存RAGの設定変更・ドキュメント追加削除 |
| 1 | 作成者 | RAG管理 | FabricaからRAGの作成・編集 | RAG削除機能 | 確認ダイアログ付きの削除処理 |
| 1 | 作成者 | RAG管理 | FabricaからRAGの作成・編集 | RAG API実装 | CRUD操作用のAPIエンドポイント |
| 1 | 作成者 | Flowise連携 | エージェントフロービルダー | Flowise埋め込み画面 | iframeまたはAPIでFlowiseエディタを統合 |
| 1 | 作成者 | Flowise連携 | エージェントフロービルダー | フロー保存連携 | Fabrica側でフローのメタデータを管理 |
| 1 | 作成者 | Flowise連携 | エージェントフロービルダー | フロー読み込み連携 | 保存済みフローの復元処理 |
| 1 | 作成者 | Flowise連携 | エージェントフロービルダー | RAGノード連携 | Fabricaで作成したRAGをFlowiseノードで選択可能に |
| 1 | 作成者 | プロンプトテンプレ | 共通プロンプト／ノードの再利用 | 共通プロンプトライブラリ | システムプロンプトのテンプレート一覧管理 |
| 1 | 作成者 | プロンプトテンプレ | 共通プロンプト／ノードの再利用 | プロンプト選択・挿入UI | プロンプトをノードに適用するUI |
| 1 | 作成者 | プロンプトテンプレ | 共通プロンプト／ノードの再利用 | 共通ノードライブラリ | よく使うノード構成をテンプレート化 |
| 1 | 作成者 | プロンプトテンプレ | 共通プロンプト／ノードの再利用 | ノードテンプレート適用 | ライブラリからノードをフローに追加 |
| 1 | 作成者 | 自己テスト | テストシナリオ実行画面 | テストケース登録UI | Q&Aペアの登録フォーム（質問、期待回答） |
| 1 | 作成者 | 自己テスト | テストシナリオ実行画面 | テストケース一覧管理 | 登録済みテストケースのCRUD |
| 1 | 作成者 | 自己テスト | テストシナリオ実行画面 | テスト一括実行機能 | 全テストケースの順次実行処理 |
| 1 | 作成者 | 自己テスト | テストシナリオ実行画面 | テスト結果表示 | 実行結果（回答内容、成否、RAGヒット状況）の表示 |
| 1 | 作成者 | 自己テスト | テストシナリオ実行画面 | テスト結果履歴 | 過去のテスト結果を保存・比較 |
| 2 | 作成者 | 業務課題整理 | 業務課題カタログ／入力フォーム | 課題入力フォーム | 繰り返し作業/FAQ/調査業務などのカテゴリ選択UI |
| 2 | 作成者 | 業務課題整理 | 業務課題カタログ／入力フォーム | 頻度・負荷・影響範囲入力 | 各項目のスライダー or セレクト入力 |
| 2 | 作成者 | 業務課題整理 | 業務課題カタログ／入力フォーム | 課題一覧表示 | 登録済み課題のリスト・編集・削除 |
| 2 | 作成者 | 業務課題整理 | 業務課題カタログ／入力フォーム | 課題API実装 | 課題のCRUD用APIエンドポイント |
| 2 | 作成者 | 業務候補スコアリング | 自動優先度スコア | スコア計算ロジック | 頻度×負荷×影響範囲のスコア算出 |
| 2 | 作成者 | 業務候補スコアリング | 自動優先度スコア | スコア表示UI | 課題一覧にスコアをバー表示 |
| 2 | 作成者 | 業務候補スコアリング | 自動優先度スコア | ソート・フィルタ | スコア順でのソート、閾値フィルタ |
| 2 | 作成者 | エラー応答設定 | 情報がない場合のメッセージ設定 | フォールバック設定UI | ノーヒット時のメッセージ入力フォーム |
| 2 | 作成者 | エラー応答設定 | 情報がない場合のメッセージ設定 | フォールバック先設定 | 人間エスカレーション先の設定 |
| 2 | 作成者 | エラー応答設定 | 情報がない場合のメッセージ設定 | フォールバック処理実装 | RAGノーヒット時の分岐処理 |
| 2 | 作成者 | 自己テスト | テストシナリオ自動作成 | フロー解析 | フロー構成からテスト観点を抽出 |
| 2 | 作成者 | 自己テスト | テストシナリオ自動作成 | テストケース生成 | LLMによるテストQ&A自動生成 |
| 2 | 作成者 | 自己テスト | テストシナリオ自動作成 | 生成結果レビューUI | 自動生成されたテストの確認・編集 |
| 2 | 作成者 | 品質チェックリスト | 公開前セルフチェック | チェック項目定義 | 「想定Q&A 10件以上」等の項目リスト |
| 2 | 作成者 | 品質チェックリスト | 公開前セルフチェック | 自動チェック処理 | 条件を満たすかの自動判定 |
| 2 | 作成者 | 品質チェックリスト | 公開前セルフチェック | チェック結果表示 | チェックリストと結果の表示UI |
| 2 | 作成者 | 品質チェックリスト | 公開前セルフチェック | チェック履歴保存 | チェック実行履歴の記録 |

## 2. エージェント利用者向け機能

| フェーズ | 誰向け | 区分 | 機能名 | タスク | タスク詳細 |
|---------|--------|------|--------|--------|------------|
| 1 | 利用者 | エージェントカタログ | 一覧・検索・フィルタ | エージェント一覧画面 | カード形式でエージェントを表示（名前、説明、オーナー、更新日） |
| 1 | 利用者 | エージェントカタログ | 一覧・検索・フィルタ | キーワード検索 | 名前・説明でのテキスト検索機能 |
| 1 | 利用者 | エージェントカタログ | 一覧・検索・フィルタ | タグフィルタ | タグによる絞り込み（複数選択可） |
| 1 | 利用者 | エージェントカタログ | 一覧・検索・フィルタ | 部門フィルタ | 部門による絞り込み |
| 1 | 利用者 | エージェントカタログ | 一覧・検索・フィルタ | 用途フィルタ | 用途カテゴリによる絞り込み |
| 1 | 利用者 | エージェントカタログ | 一覧・検索・フィルタ | ソート機能 | 名前、更新日、人気順でのソート |
| 1 | 利用者 | エージェントカタログ | 一覧・検索・フィルタ | 検索API実装 | フィルタ・ページネーション対応のAPIエンドポイント |
| 1 | 利用者 | お気に入り | マイエージェント機能 | お気に入り追加・解除 | ハートアイコンでのトグル機能 |
| 1 | 利用者 | お気に入り | マイエージェント機能 | お気に入り一覧表示 | マイページでのお気に入りエージェント表示 |
| 1 | 利用者 | お気に入り | マイエージェント機能 | お気に入りAPI実装 | ユーザー別お気に入り管理のAPI |
| 1 | 利用者 | 業務アプリ埋め込み | 社内システム・SaaS連携UI | API仕様設計 | エージェント呼び出し用REST API仕様書 |
| 1 | 利用者 | 業務アプリ埋め込み | 社内システム・SaaS連携UI | APIキー管理 | APIキーの発行・無効化機能 |
| 1 | 利用者 | 業務アプリ埋め込み | 社内システム・SaaS連携UI | チャットAPI実装 | メッセージ送信・応答取得のエンドポイント |
| 1 | 利用者 | 業務アプリ埋め込み | 社内システム・SaaS連携UI | Sprite連携ドキュメント | Spriteからの連携手順書作成 |
| 1 | 利用者 | 業務アプリ埋め込み | 社内システム・SaaS連携UI | Grimoire連携 | Grimoireワークフローとの連携実装 |
| 2 | 利用者 | 利用フィードバック | 役に立った／微妙ボタン＋コメント | フィードバックUI | 👍/👎ボタンとコメント入力欄 |
| 2 | 利用者 | 利用フィードバック | 役に立った／微妙ボタン＋コメント | フィードバック保存 | 回答ID紐付けでのフィードバック保存 |
| 2 | 利用者 | 利用フィードバック | 役に立った／微妙ボタン＋コメント | フィードバック集計 | エージェント別の評価集計・表示 |
| 2 | 利用者 | 利用フィードバック | 役に立った／微妙ボタン＋コメント | オーナー通知 | 低評価時のオーナーへの通知 |
| 2 | 利用者 | 変更通知 | アップデートのお知らせ | 更新検知 | エージェント更新時のイベント発火 |
| 2 | 利用者 | 変更通知 | アップデートのお知らせ | 変更内容生成 | 差分から「何が変わったか」を要約 |
| 2 | 利用者 | 変更通知 | アップデートのお知らせ | 通知UI | ベルアイコン・通知一覧表示 |
| 2 | 利用者 | 変更通知 | アップデートのお知らせ | 通知設定 | エージェント別の通知ON/OFF |

## 3. 管理者・運営チーム向け機能

| フェーズ | 誰向け | 区分 | 機能名 | タスク | タスク詳細 |
|---------|--------|------|--------|--------|------------|
| 1 | 管理者 | 権限管理 | ロール・アクセス制御 | ロール定義 | オーナー/利用者/運営管理者のロールスキーマ設計 |
| 1 | 管理者 | 権限管理 | ロール・アクセス制御 | ユーザー・ロール紐付け | ユーザーへのロール割り当てUI |
| 1 | 管理者 | 権限管理 | ロール・アクセス制御 | エージェント権限設定 | エージェント単位の閲覧・編集・削除権限設定 |
| 1 | 管理者 | 権限管理 | ロール・アクセス制御 | 権限チェックミドルウェア | APIリクエストの権限検証処理 |
| 1 | 管理者 | 権限管理 | ロール・アクセス制御 | 管理画面 | ユーザー・ロール管理用の管理画面 |
| 1 | 管理者 | ログ | 操作履歴・利用の記録 | 操作ログスキーマ設計 | 操作種別、ユーザー、対象、日時などの定義 |
| 1 | 管理者 | ログ | 操作履歴・利用の記録 | ログ記録処理 | 作成/更新/公開/廃止/権限変更時のログ保存 |
| 1 | 管理者 | ログ | 操作履歴・利用の記録 | ログ閲覧画面 | 操作ログの検索・フィルタ・表示UI |
| 1 | 管理者 | ログ | 操作履歴・利用の記録 | ログAPI実装 | ログ取得・検索用のAPIエンドポイント |
| 1 | 管理者 | ログ | 操作履歴・利用の記録 | ログエクスポート | CSV/JSON形式でのエクスポート機能 |
| 2 | 管理者 | 公開承認ワークフロー | 全社公開レビュー | 承認フロー定義 | 全社公開時の承認ステップ設計 |
| 2 | 管理者 | 公開承認ワークフロー | 全社公開レビュー | 承認依頼UI | 公開申請フォーム・承認者選択 |
| 2 | 管理者 | 公開承認ワークフロー | 全社公開レビュー | 承認者レビュー画面 | 申請内容確認・承認/却下/差戻UI |
| 2 | 管理者 | 公開承認ワークフロー | 全社公開レビュー | 承認状態管理 | 申請→レビュー中→承認/却下の状態遷移 |
| 2 | 管理者 | 利用ログ管理 | 利用状況ダッシュボード | 利用回数集計 | エージェント別・日別の利用回数カウント |
| 2 | 管理者 | 利用ログ管理 | 利用状況ダッシュボード | ユーザー数集計 | アクティブユーザー数の集計 |
| 2 | 管理者 | 利用ログ管理 | 利用状況ダッシュボード | グラフ表示 | 利用推移の折れ線グラフ表示 |
| 2 | 管理者 | 利用ログ管理 | 利用状況ダッシュボード | 部門別レポート | 部門ごとの利用状況レポート |
| 2 | 管理者 | 品質・リスク監査 | 危険応答検知 | NGワードリスト管理 | 検知対象ワードの登録・編集 |
| 2 | 管理者 | 品質・リスク監査 | 危険応答検知 | リアルタイム検知 | 応答生成時のNGワードチェック |
| 2 | 管理者 | 品質・リスク監査 | 危険応答検知 | アラート通知 | 検知時の運営チームへの通知 |
| 2 | 管理者 | 品質・リスク監査 | 危険応答検知 | 検知ログ表示 | 検知履歴の一覧・詳細表示 |
| 2 | 管理者 | ポートフォリオ管理 | 統合・廃止候補一覧 | 利用ゼロ検知 | 3ヶ月利用ゼロのエージェント抽出 |
| 2 | 管理者 | ポートフォリオ管理 | 統合・廃止候補一覧 | 更新なし検知 | 半年更新なしのエージェント抽出 |
| 2 | 管理者 | ポートフォリオ管理 | 統合・廃止候補一覧 | 類似エージェント検知 | 説明文の類似度による重複候補検出 |
| 2 | 管理者 | ポートフォリオ管理 | 統合・廃止候補一覧 | 候補一覧UI | 統合・廃止候補のリスト表示・アクション |
| 2 | 管理者 | バージョン管理 | バージョン履歴・ロールバック | 変更履歴保存 | 設定/フロー/プロンプト変更時のスナップショット |
| 2 | 管理者 | バージョン管理 | バージョン履歴・ロールバック | 履歴一覧表示 | バージョン履歴の一覧・差分表示 |
| 2 | 管理者 | バージョン管理 | バージョン履歴・ロールバック | ロールバック機能 | 指定バージョンへの復元処理 |
| 2 | 管理者 | バージョン管理 | バージョン履歴・ロールバック | バージョン比較UI | 2つのバージョン間の差分表示 |

## 4. RAG・ナレッジ基盤機能

| フェーズ | 誰向け | 区分 | 機能名 | タスク | タスク詳細 |
|---------|--------|------|--------|--------|------------|
| 1 | 作成者 | ナレッジ登録 | 資料アップロード／連携 | アップロードUI | ドラッグ&ドロップ対応のファイルアップロード |
| 1 | 作成者 | ナレッジ登録 | 資料アップロード／連携 | ファイル形式対応 | PDF/Word/Excel/テキスト/Markdownのパーサー |
| 1 | 作成者 | ナレッジ登録 | 資料アップロード／連携 | Portal同期設定 | Owlia-Portalとの同期設定UI |
| 1 | 作成者 | ナレッジ登録 | 資料アップロード／連携 | 同期実行処理 | Portal側のドキュメントを取得・インデックス |
| 1 | 作成者 | ナレッジ登録 | 資料アップロード／連携 | アップロードAPI | ファイル受信・処理用のAPIエンドポイント |
| 1 | 管理者 | 参照範囲制御 | RAGアクセス制御 | アクセス制御スキーマ | RAG×ロール/部門の権限マトリクス設計 |
| 1 | 管理者 | 参照範囲制御 | RAGアクセス制御 | 権限設定UI | RAGごとのアクセス権限設定画面 |
| 1 | 管理者 | 参照範囲制御 | RAGアクセス制御 | アクセスチェック処理 | RAG検索時の権限検証ロジック |
| 1 | 管理者 | 参照範囲制御 | RAGアクセス制御 | パートナー制限フラグ | パートナー非開示設定の実装 |
| 2 | 作成者 | ナレッジ更新 | 再取り込み・差分更新 | 更新検知 | ソースファイルの変更検知 |
| 2 | 作成者 | ナレッジ更新 | 再取り込み・差分更新 | 差分計算 | 新規/更新/削除チャンクの特定 |
| 2 | 作成者 | ナレッジ更新 | 再取り込み・差分更新 | 差分インデックス更新 | 変更分のみのベクトル更新 |
| 2 | 作成者 | ナレッジ更新 | 再取り込み・差分更新 | 定期同期設定 | スケジュール同期の設定UI |
| 2 | 作成者 | ナレッジ更新 | 再取り込み・差分更新 | 同期ジョブ実行 | バッチでの定期同期処理 |

## 5. 共通・インフラ機能

| フェーズ | 誰向け | 区分 | 機能名 | タスク | タスク詳細 |
|---------|--------|------|--------|--------|------------|
| 1 | 運営 | モニタリング | ヘルスチェック・アラート | ヘルスチェックAPI | Flowise/RAG/DB の死活監視エンドポイント |
| 1 | 運営 | モニタリング | ヘルスチェック・アラート | 定期監視ジョブ | cron等での定期ヘルスチェック実行 |
| 1 | 運営 | モニタリング | ヘルスチェック・アラート | アラート通知設定 | 異常検知時の通知先・閾値設定 |
| 1 | 運営 | モニタリング | ヘルスチェック・アラート | ステータスダッシュボード | システム稼働状況の可視化画面 |
| 1 | 運営 | 多環境運用 | 開発／検証／本番環境 | 環境設定ファイル分離 | 環境ごとの設定ファイル（env）管理 |
| 1 | 運営 | 多環境運用 | 開発／検証／本番環境 | デプロイパイプライン | 環境別のCI/CDパイプライン構築 |
| 1 | 運営 | 多環境運用 | 開発／検証／本番環境 | 環境間データ同期 | 本番→検証のデータコピー機能 |
| 1 | 運営 | 多環境運用 | 開発／検証／本番環境 | 環境切り替えUI | 管理者向けの環境切り替え機能 |
| 2 | 運営 | シングルサインオン | 社内認証連携 | Owlia内ランチャー設計 | Owlia経由でのSSO風ログイン設計 |
| 2 | 運営 | シングルサインオン | 社内認証連携 | セッション管理 | ログインセッションの管理 |
| 2 | 運営 | シングルサインオン | 社内認証連携 | ユーザー情報同期 | 社内ID基盤からのユーザー情報取得 |
| 2 | 運営 | 通知連携 | メール／チャット通知 | 通知テンプレート管理 | 通知種別ごとのテンプレート |
| 2 | 運営 | 通知連携 | メール／チャット通知 | メール送信処理 | SMTPによるメール送信 |
| 2 | 運営 | 通知連携 | メール／チャット通知 | チャット連携 | Teams/Slack等へのWebhook送信 |
| 2 | 運営 | 通知連携 | メール／チャット通知 | 通知設定UI | ユーザー別の通知設定管理 |

---

## 凡例

- **フェーズ**: 1 = MVP（最低限必要）、2 = 拡張機能（第2フェーズ以降）
- **誰向け**: 作成者 / 利用者 / 管理者 / 運営
- **区分**: 機能のカテゴリ
- **機能名**: 03で定義した機能名
- **タスク**: 機能を実現するための個別タスク
- **タスク詳細**: タスクの具体的な実装内容

---

## 補足

### 依存関係の注意点

1. **権限管理**は多くの機能の前提となるため、早期に実装すべき
2. **RAG管理**と**ナレッジ登録**は相互に関連するため、並行して設計・実装
3. **Flowise連携**は外部システムとの統合が必要なため、インターフェース設計を先行
4. **ログ機能**は全機能に組み込む必要があるため、共通処理として先に実装

### 見積もり時の考慮事項

- 外部システム連携（Flowise、Portal、認証基盤）の調整工数
- テストデータ・検証環境の準備
- セキュリティレビュー・脆弱性診断
- ドキュメント作成・運用マニュアル整備
