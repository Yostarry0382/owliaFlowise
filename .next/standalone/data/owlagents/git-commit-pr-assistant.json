{
  "id": "git-commit-pr-assistant",
  "name": "Gitコミットメッセージ・PR作成",
  "description": "コード変更内容を分析し、Conventional Commits形式のコミットメッセージやPull Requestの説明文を自動生成します。変更の影響範囲も分析します。",
  "iconStyle": "orange",
  "version": "1.0.0",
  "flow": {
    "nodes": [
      {
        "id": "start-git",
        "type": "start",
        "position": { "x": 0, "y": 150 },
        "data": {
          "label": "変更内容入力",
          "type": "start",
          "category": "flowControl",
          "config": {
            "inputFields": ["gitDiff", "changedFiles", "branchName", "relatedIssues", "context"]
          }
        }
      },
      {
        "id": "llm-analyze-diff",
        "type": "azureChatOpenAI",
        "position": { "x": 250, "y": 50 },
        "data": {
          "label": "差分分析",
          "type": "azureChatOpenAI",
          "category": "chatModels",
          "config": {
            "systemMessage": "提供されたgit diffを分析し、変更内容を理解してください：\n\n## 変更の分類\n- feat: 新機能\n- fix: バグ修正\n- docs: ドキュメントのみ\n- style: フォーマット（動作に影響なし）\n- refactor: リファクタリング\n- perf: パフォーマンス改善\n- test: テスト追加・修正\n- chore: ビルド、ツール設定等\n\n## 変更の要約\n- 何を変更したか\n- なぜ変更したか（推測）\n- どの部分に影響するか\n\n## 破壊的変更の検出\n- APIの変更\n- データ構造の変更\n- 後方互換性の問題",
            "temperature": 0.2
          }
        }
      },
      {
        "id": "llm-impact",
        "type": "azureChatOpenAI",
        "position": { "x": 250, "y": 250 },
        "data": {
          "label": "影響範囲分析",
          "type": "azureChatOpenAI",
          "category": "chatModels",
          "config": {
            "systemMessage": "変更による影響範囲を分析してください：\n\n## 直接的な影響\n- 変更されたファイル・関数\n- 依存するコンポーネント\n\n## 間接的な影響\n- インポートしている他ファイル\n- 影響を受けるAPI/エンドポイント\n- UI/UXへの影響\n\n## リスク評価\n- 高リスク箇所（認証、決済等）\n- テストが必要な範囲\n- ロールバック時の考慮点\n\n## 確認推奨事項\n- レビュー時に重点確認すべき箇所\n- 動作確認が必要な機能",
            "temperature": 0.3
          }
        }
      },
      {
        "id": "llm-commit",
        "type": "azureChatOpenAI",
        "position": { "x": 500, "y": 50 },
        "data": {
          "label": "コミットメッセージ生成",
          "type": "azureChatOpenAI",
          "category": "chatModels",
          "config": {
            "systemMessage": "Conventional Commits形式のコミットメッセージを生成してください：\n\n## 形式\n```\n<type>(<scope>): <subject>\n\n<body>\n\n<footer>\n```\n\n## type\nfeat, fix, docs, style, refactor, perf, test, chore\n\n## scope（任意）\n変更の影響範囲（コンポーネント名、モジュール名等）\n\n## subject\n- 命令形で記述（Add, Fix, Update等）\n- 50文字以内\n- 末尾にピリオドなし\n\n## body（任意）\n- 何を、なぜ変更したかを説明\n- 72文字で折り返し\n\n## footer（任意）\n- BREAKING CHANGE: 破壊的変更の説明\n- Refs #123: 関連Issue\n- Co-authored-by: 共同作業者",
            "temperature": 0.3
          }
        }
      },
      {
        "id": "llm-pr-title",
        "type": "azureChatOpenAI",
        "position": { "x": 500, "y": 250 },
        "data": {
          "label": "PRタイトル生成",
          "type": "azureChatOpenAI",
          "category": "chatModels",
          "config": {
            "systemMessage": "Pull Requestのタイトルを生成してください：\n\n## 形式\n[type] 簡潔な変更内容の説明\n\n## 例\n- [feat] Add user authentication with OAuth2\n- [fix] Resolve memory leak in image processing\n- [refactor] Simplify payment gateway integration\n- [docs] Update API documentation for v2 endpoints\n\n## ルール\n- 60文字以内に収める\n- 何を達成するかを明確に\n- 動詞から始める（Add, Fix, Update, Remove, Implement等）\n- Issue番号があれば末尾に (#123) を追加",
            "temperature": 0.3
          }
        }
      },
      {
        "id": "llm-pr-body",
        "type": "azureChatOpenAI",
        "position": { "x": 750, "y": 150 },
        "data": {
          "label": "PR説明文生成",
          "type": "azureChatOpenAI",
          "category": "chatModels",
          "config": {
            "systemMessage": "Pull Requestの説明文をMarkdown形式で生成してください：\n\n```markdown\n## 概要\n[この変更が何をするか1-2文で説明]\n\n## 変更理由\n[なぜこの変更が必要か]\n\n## 変更内容\n- [主要な変更点1]\n- [主要な変更点2]\n- [主要な変更点3]\n\n## 影響範囲\n- [影響を受けるコンポーネント/機能]\n\n## テスト方法\n1. [テスト手順1]\n2. [テスト手順2]\n3. [期待される結果]\n\n## スクリーンショット（該当する場合）\n[UIの変更がある場合はここに追加]\n\n## チェックリスト\n- [ ] コードがスタイルガイドに従っている\n- [ ] 自己レビューを実施した\n- [ ] 必要なテストを追加した\n- [ ] ドキュメントを更新した\n\n## 関連Issue\nCloses #[issue番号]\n```",
            "temperature": 0.4
          }
        }
      },
      {
        "id": "llm-review-points",
        "type": "azureChatOpenAI",
        "position": { "x": 1000, "y": 50 },
        "data": {
          "label": "レビューポイント生成",
          "type": "azureChatOpenAI",
          "category": "chatModels",
          "config": {
            "systemMessage": "レビュアー向けの確認ポイントを生成してください：\n\n## レビュー重点箇所\n各ファイルについて：\n- ファイルパス: [path]\n- 確認ポイント: [何を確認すべきか]\n- 懸念事項: [潜在的な問題]\n\n## セキュリティ確認\n- 入力値のサニタイズ\n- 認証・認可の確認\n- 機密情報の扱い\n\n## パフォーマンス確認\n- N+1クエリの可能性\n- メモリ使用量\n- 応答時間への影響\n\n## 質問・議論ポイント\n- [設計判断についての質問]\n- [代替案の提案]",
            "temperature": 0.3
          }
        }
      },
      {
        "id": "human-review",
        "type": "humanReview",
        "position": { "x": 1000, "y": 250 },
        "data": {
          "label": "内容確認",
          "type": "humanReview",
          "category": "flowControl",
          "config": {
            "enabled": true,
            "message": "生成されたコミットメッセージとPR説明を確認してください"
          },
          "humanReview": {
            "enabled": true,
            "requiresApproval": true,
            "approvalMessage": "内容を確認し、必要に応じて修正してください",
            "allowEdit": true
          }
        }
      },
      {
        "id": "end-git",
        "type": "end",
        "position": { "x": 1250, "y": 150 },
        "data": {
          "label": "出力",
          "type": "end",
          "category": "flowControl",
          "config": {
            "outputFields": ["commitMessage", "prTitle", "prBody", "reviewPoints"]
          }
        }
      }
    ],
    "edges": [
      {
        "id": "edge-start-analyze",
        "source": "start-git",
        "target": "llm-analyze-diff",
        "sourceHandle": "output",
        "targetHandle": "input"
      },
      {
        "id": "edge-start-impact",
        "source": "start-git",
        "target": "llm-impact",
        "sourceHandle": "output",
        "targetHandle": "input"
      },
      {
        "id": "edge-analyze-commit",
        "source": "llm-analyze-diff",
        "target": "llm-commit",
        "sourceHandle": "output",
        "targetHandle": "input"
      },
      {
        "id": "edge-analyze-prtitle",
        "source": "llm-analyze-diff",
        "target": "llm-pr-title",
        "sourceHandle": "output",
        "targetHandle": "input"
      },
      {
        "id": "edge-commit-prbody",
        "source": "llm-commit",
        "target": "llm-pr-body",
        "sourceHandle": "output",
        "targetHandle": "commit"
      },
      {
        "id": "edge-prtitle-prbody",
        "source": "llm-pr-title",
        "target": "llm-pr-body",
        "sourceHandle": "output",
        "targetHandle": "title"
      },
      {
        "id": "edge-impact-prbody",
        "source": "llm-impact",
        "target": "llm-pr-body",
        "sourceHandle": "output",
        "targetHandle": "impact"
      },
      {
        "id": "edge-prbody-review",
        "source": "llm-pr-body",
        "target": "llm-review-points",
        "sourceHandle": "output",
        "targetHandle": "input"
      },
      {
        "id": "edge-impact-reviewpoints",
        "source": "llm-impact",
        "target": "llm-review-points",
        "sourceHandle": "output",
        "targetHandle": "impact"
      },
      {
        "id": "edge-reviewpoints-human",
        "source": "llm-review-points",
        "target": "human-review",
        "sourceHandle": "output",
        "targetHandle": "input"
      },
      {
        "id": "edge-prbody-human",
        "source": "llm-pr-body",
        "target": "human-review",
        "sourceHandle": "output",
        "targetHandle": "prbody"
      },
      {
        "id": "edge-human-end",
        "source": "human-review",
        "target": "end-git",
        "sourceHandle": "output",
        "targetHandle": "input"
      }
    ],
    "viewport": { "x": 50, "y": 150, "zoom": 0.7 }
  },
  "tags": ["開発支援", "Git", "コミット", "PullRequest", "コードレビュー", "自動化"],
  "createdAt": "2025-12-22T10:00:00.000Z",
  "updatedAt": "2025-12-22T10:00:00.000Z"
}
