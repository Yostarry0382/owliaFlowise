

# エージェントプラットフォーム 全体像

このプラットフォームでは、社内向けのAIエージェントを

> **探す → 作る → ナレッジを紐づける → テストする → 公開・利用 → モニタリング → 統合・廃止**

という一連の流れで管理する。

---

# 1. エージェントを探す・整理する（エージェント管理）

## 1-1. エージェント一覧・検索（ワークショップ機能）
**目的：**
自分が使える／関係するエージェントを素早く見つける。
**機能：**
* 一覧表示
  * 自分がオーナーのエージェント一覧
  * 自分が利用可能な他者作成のエージェント一覧（ストア的な）
* 絞り込み・検索
  * キーワード（名前・説明）
  * 公開範囲（自分のみ / 任意のグループ / 部署 / 全社）
  * ステータス（ドラフト / 公開中 / アーカイブ）
  * 作成者（自分が作成 / 他人が作成*名前を表示）
---

## 1-2. エージェント（フクロウ）作成・基本情報編集

**目的：**
新しいエージェントの最低限の情報を整理する。
基本１エージェントタスクを遂行するという考えのもと
エージェント・マルチエージェント問わず１フクロウとして表現する
**機能：**
* 新規エージェント（フクロウ）作成
  * 名前、概要、目的（用途）の入力
  * 想定ユーザ（例：ターゲット部署など）のメモ
* メタ情報編集
  * タグ設定（例：経費、開発、案件A など）
  * 作成時の情報やフローからの**自動タグ付け**
  * 公開範囲のデフォルト設定（例：最初は「自分のみ」など）
* Flowiseエディタへの連携
  * 対象エージェントに紐づく Flowise フローを開く
  * 保存・ドラフト管理

---

## 1-3. エージェント（フクロウ）のステータス・ライフサイクル管理

**目的：**
「作成中 → 公開 → 一時停止 → 廃止」といった状態を管理する。
**機能：**
* ステータス変更
  * ドラフト → 公開
  * 公開 → 一時停止
  * 公開 / 一時停止 → アーカイブ（廃止）
* エージェントの複製
  * 既存エージェントをコピーし、別バージョンを試作
* 統合用メモ
  * 「このエージェントは◯◯に統合予定」などの備考を残す

---

# 2. ツール管理

## 2-1.ツール利用  

**目的：**
LLMにツールを持たせて、実行できる幅を持たせる

**機能：**

* ツール利用

  * RAGやマルチモーダルのようなツールをLLMが利用可能
    * RAG/マルチモーダル/MD変換

## 2-2. RAGコレクション管理

**目的：**
エージェントが参照するドキュメントのまとまりを管理する。
**機能：**
* RAGグループ（コレクション）の新規作成
  * コレクション名、説明（例：経費規程v1）
  * 想定利用エージェントのメモ
* 既存RAGの利用
  * 既存のOwlia-Portalから構築したRAGを選択して利用できる

※ポスグレDB→weaviate
※RAG周りは既存ポータル機能を踏襲。
※当面は「既存のRAGコレクションを選んで利用」でもよいが、将来的にこの画面から作成できると便利。

---

## 2-3. データ登録・更新

**目的：**
RAGに登録されるドキュメントを更新・管理する。

**機能：**（Owlia-Portal 踏襲）

* ドキュメントの登録 / 修正 / 削除
* メタデータ設定（例：文書種別、バージョン、適用開始日など）


---

## 2-4. アクセス制御との連携

**目的：**
エージェントの公開範囲と、RAGの公開範囲の整合性を保つ。

**機能：**


---


# 3. エージェントの構築機能（フロー・プロンプト設定）

## 3-1. Flowise フロー編集連携

**目的：**
エージェントごとの処理フローを Flowise で編集・管理する。
**機能：**
* エージェントごとの Flowise フローへのリンク・埋め込み
* 保存状態の管理（フクロウ側で管理）

  * 最終更新者・最終更新日時の記録
  * 下書きフローと本番フローの切り替え

---

## 3-2. プロンプト・設定編集UI
**目的：**
よく変えそうな設定を、Flowiseを開かなくてもアプリ側UIから調整できるようにする。

**機能：**
* システムプロンプト編集

  * 役割・口調・禁止事項など
* モデル選択

  * 例：GPT-4, GPT-4.1 など
* RAGの紐づけ

  * どの RAG コレクションを参照するかを選択

---

## 3-3. テストコンソール

**目的：**
エージェントを公開前に試すためのテスト用チャット画面。
**機能：**
* テスト用チャット

  * 開発中（ドラフト）のエージェントに対して質問できる
* RAGヒット状況の確認

  * どの文書が参照されたかを表示
* テストログの保存

  * どんな質問・回答だったかを記録
  * テストケースとして保存し、後から再実行できるとベター

---

# 4. 公開・利用のための機能

## 4-1. 公開設定・共有

**目的：**
作ったエージェントを、誰に・どうやって使ってもらうかを決める。
**機能：**

* 公開範囲設定UI
  * 自分のみ / チーム / 部署 / 全社 などを選択
* 利用導線の提供
  * 公開URL / ショートカットの生成
  * エージェント詳細ページへのリンク
* 説明情報
  * エージェントの簡易な説明欄
  * 使い方・注意点の記載

---

# 5. モニタリング・改善のための機能

## 5-1. 利用状況ダッシュボード

**目的：**
エージェントがどれくらい使われているか、役に立っているかを可視化する。
**機能：**
* エージェントごとの基本指標
  * 利用回数 / ユニークユーザ数
  * 日別推移グラフ
* よくある質問（クエリ）の一覧
  * 直近N件のログ一覧
  * 質問のランキング表示
* フィードバック集計
  * 役に立った率 / 役に立たなかった率
  * コメント一覧表示

---

## 5-2. ログ閲覧

**目的：**
具体的な会話内容を確認し、改善ポイントを探る。
**機能：**
* 会話ログの表示（必要に応じてマスキング）
  * ユーザの質問
  * モデルの回答
  * 参照したRAG文書
* 絞り込み機能
  * 期間指定
  * 特定ユーザ
  * エラー発生の有無 など

---

# 6. エージェントの統合・廃止

## 6-1. 廃止・アーカイブ

**目的：**
使われなくなったエージェントを整理しつつ、必要なら戻せるようにする。
**機能：**
* ステータスを「アーカイブ」に変更
  * 通常の利用画面からは非表示
* アーカイブ済みエージェント一覧
  * 必要に応じて復活（再公開）できる

---

## 6-2. 統合サポート

**目的：**
似たエージェントを統合する際、履歴管理と利用者への案内を簡単にする。

**機能：**

* 「統合元」「統合先」エージェントの紐づけ
  * 統合の履歴メモ（いつ、何を、どこに統合したか）
* 統合時の案内文テンプレート
  * 利用者向けメッセージの自動生成
    例：「◯◯は△△に統合されました。今後は△△をご利用ください」

---

# 7. 管理者向け・共通基盤機能

## 7-1. 認証・権限管理

**機能：**
* 社内認証基盤との連携（SSO / AD / AzureAD 等）
* ユーザ情報・所属部署の取得
* 権限レベル
  * 通常ユーザ：エージェントの作成・利用が可能
  * 管理者：監査・全社設定の変更が可能

---

## 7-2. 全社ポリシー設定

**機能：**

* デフォルト公開範囲の設定
  * 例：新規エージェントは必ず「自分のみ」から開始
* 全社公開時の簡易承認フロー有無
* ログ関連ポリシー
  * 保存期間
  * マスキング方針

---

## 7-3. ログ

**機能：**
* 誰が・いつ・どのエージェントを作成/更新/削除したか
* 公開範囲の変更履歴
* RAGに登録されたドキュメントの変更履歴

---

# 8. ヘルプ・テンプレート系の補助機能（あると一気に使いやすくなる）

**目的：**
「何から作ればいいかわからない」を減らし、素早く試せるようにする。

**機能：**
* エージェントテンプレート
  * 例：「FAQボット」「規程ナビ」「プロジェクト仕様ナビ」などの雛形
* RAGテンプレート
  * 「プロジェクト単位」「部署単位」でよく使う構成をプリセット
* ガイド付きウィザード
  * 「3ステップでエージェントを作ろう」導線
    1. 目的・名前入力
    2. RAG選択
    3. 公開範囲設定 & テスト

---
