{
  "id": "code-review-assistant",
  "name": "コードレビューアシスタント",
  "description": "コードの品質、セキュリティ、パフォーマンス、可読性を多角的に分析し、改善提案を行います。ベストプラクティスに基づいた具体的なフィードバックを提供します。",
  "iconStyle": "cyan",
  "version": "1.0.0",
  "flow": {
    "nodes": [
      {
        "id": "start-review",
        "type": "start",
        "position": { "x": 0, "y": 200 },
        "data": {
          "label": "コード入力",
          "type": "start",
          "category": "flowControl",
          "config": {
            "inputFields": ["code", "language", "context"]
          }
        }
      },
      {
        "id": "llm-security",
        "type": "azureChatOpenAI",
        "position": { "x": 250, "y": 50 },
        "data": {
          "label": "セキュリティ分析",
          "type": "azureChatOpenAI",
          "category": "chatModels",
          "config": {
            "systemMessage": "あなたはセキュリティ専門家です。提供されたコードを分析し、以下の観点でセキュリティ問題を検出してください：\n1. SQLインジェクション、XSS、CSRF等の脆弱性\n2. 認証・認可の問題\n3. 機密情報のハードコーディング\n4. 安全でない暗号化や通信\n5. 入力値検証の不足\n\n各問題について、深刻度（Critical/High/Medium/Low）、該当箇所、修正方法を具体的に示してください。",
            "temperature": 0.2
          }
        }
      },
      {
        "id": "llm-performance",
        "type": "azureChatOpenAI",
        "position": { "x": 250, "y": 200 },
        "data": {
          "label": "パフォーマンス分析",
          "type": "azureChatOpenAI",
          "category": "chatModels",
          "config": {
            "systemMessage": "あなたはパフォーマンス最適化の専門家です。提供されたコードを分析し、以下の観点で問題を検出してください：\n1. 計算量・空間量の非効率（O(n²)のループ等）\n2. 不要なメモリ割り当てやリーク\n3. N+1クエリ問題\n4. 非同期処理の最適化\n5. キャッシュの活用\n\n各問題について、影響度、該当箇所、最適化方法を具体的に示してください。",
            "temperature": 0.2
          }
        }
      },
      {
        "id": "llm-quality",
        "type": "azureChatOpenAI",
        "position": { "x": 250, "y": 350 },
        "data": {
          "label": "コード品質分析",
          "type": "azureChatOpenAI",
          "category": "chatModels",
          "config": {
            "systemMessage": "あなたはソフトウェア品質の専門家です。提供されたコードを分析し、以下の観点で品質を評価してください：\n1. SOLID原則の遵守\n2. DRY原則（重複コード）\n3. 関数・クラスの責務分離\n4. 命名規則と可読性\n5. エラーハンドリングの適切さ\n6. コメント・ドキュメントの充実度\n\n各項目について、評価（Good/Needs Improvement/Poor）、具体的な問題箇所、改善案を示してください。",
            "temperature": 0.3
          }
        }
      },
      {
        "id": "llm-synthesize",
        "type": "azureChatOpenAI",
        "position": { "x": 550, "y": 200 },
        "data": {
          "label": "レビュー統合",
          "type": "azureChatOpenAI",
          "category": "chatModels",
          "config": {
            "systemMessage": "セキュリティ、パフォーマンス、品質の各分析結果を統合し、以下の形式で総合レビューを作成してください：\n\n## 総合評価\n5段階評価（★）と一言コメント\n\n## 優先度順の改善リスト\n1. [Critical] 最優先で対応すべき問題\n2. [High] 早期に対応すべき問題\n3. [Medium] 時間があれば対応\n4. [Low] 改善推奨\n\n## 良い点\n維持すべき良い実装\n\n## 改善後のコード例\n主要な問題の修正例（差分形式）",
            "temperature": 0.3
          }
        }
      },
      {
        "id": "human-review",
        "type": "humanReview",
        "position": { "x": 800, "y": 100 },
        "data": {
          "label": "レビュー確認",
          "type": "humanReview",
          "category": "flowControl",
          "config": {
            "enabled": true,
            "message": "レビュー内容を確認してください"
          },
          "humanReview": {
            "enabled": true,
            "requiresApproval": true,
            "approvalMessage": "レビュー内容を確認し、必要に応じてコメントを追加してください",
            "allowEdit": true
          }
        }
      },
      {
        "id": "end-review",
        "type": "end",
        "position": { "x": 1050, "y": 200 },
        "data": {
          "label": "レビュー出力",
          "type": "end",
          "category": "flowControl",
          "config": {}
        }
      }
    ],
    "edges": [
      {
        "id": "edge-start-security",
        "source": "start-review",
        "target": "llm-security",
        "sourceHandle": "output",
        "targetHandle": "input"
      },
      {
        "id": "edge-start-performance",
        "source": "start-review",
        "target": "llm-performance",
        "sourceHandle": "output",
        "targetHandle": "input"
      },
      {
        "id": "edge-start-quality",
        "source": "start-review",
        "target": "llm-quality",
        "sourceHandle": "output",
        "targetHandle": "input"
      },
      {
        "id": "edge-security-synthesize",
        "source": "llm-security",
        "target": "llm-synthesize",
        "sourceHandle": "output",
        "targetHandle": "security"
      },
      {
        "id": "edge-performance-synthesize",
        "source": "llm-performance",
        "target": "llm-synthesize",
        "sourceHandle": "output",
        "targetHandle": "performance"
      },
      {
        "id": "edge-quality-synthesize",
        "source": "llm-quality",
        "target": "llm-synthesize",
        "sourceHandle": "output",
        "targetHandle": "quality"
      },
      {
        "id": "edge-synthesize-review",
        "source": "llm-synthesize",
        "target": "human-review",
        "sourceHandle": "output",
        "targetHandle": "input"
      },
      {
        "id": "edge-review-end",
        "source": "human-review",
        "target": "end-review",
        "sourceHandle": "output",
        "targetHandle": "input"
      }
    ],
    "viewport": { "x": 50, "y": 100, "zoom": 0.8 }
  },
  "tags": ["開発支援", "コードレビュー", "セキュリティ", "パフォーマンス", "品質"],
  "createdAt": "2025-12-22T10:00:00.000Z",
  "updatedAt": "2025-12-22T10:00:00.000Z"
}
