# フロント/バックエンド タスク分割

## 概要

- **フロントエンド担当**: 12人日
- **バックエンド担当**: 15人日
- **合計**: 27人日

---

## 分業方針

- フロントとバックエンドは**API仕様を先に決めて**並行開発
- フロントはモックAPIで先行開発可能
- バックエンドはFlowise連携を含むAPI実装に集中

---

## フロントエンド担当（12人日）

### 利用者向け画面

| # | タスク | 工数 | 依存API |
|---|--------|------|---------|
| F-1 | エージェント一覧画面 | 1.5人日 | GET /api/agents |
| F-2 | 検索・タグフィルタUI | 1.0人日 | GET /api/agents?search=&tag= |
| F-3 | エージェント詳細画面 | 1.0人日 | GET /api/agents/:id |
| F-4 | チャット画面（簡易版） | 2.0人日 | POST /api/agents/:id/execute |
| F-5 | 会話履歴表示 | 0.5人日 | - (フロント内状態管理) |
| | **小計** | **6.0人日** | |

### 作成者向け画面

| # | タスク | 工数 | 依存API | 備考 |
|---|--------|------|---------|------|
| F-6 | 基本情報入力フォーム | 1.0人日 | POST/PUT /api/agents | |
| F-7 | タグ設定UI | 0.5人日 | GET /api/tags | |
| F-8 | テンプレート選択画面 | 1.0人日 | GET /api/templates | |
| F-9 | フロービルダー改修 | 1.0人日 | - | 既存実装の調整 |
| F-10 | 人間チェック設定UI | 0.5人日 | - | 既存実装あり |
| F-11 | RAG選択UI | 0.5人日 | GET /api/rag |
| F-12 | テスト実行・結果画面 | 1.0人日 | POST /api/agents/:id/test |
| F-13 | 公開設定・実行UI | 0.5人日 | PUT /api/agents/:id/publish |
| | **小計** | **6.0人日** | |

### フロントエンド合計

| 区分 | 工数 |
|------|------|
| 利用者向け | 6.0人日 |
| 作成者向け | 6.0人日 |
| **合計** | **12.0人日** |

---

## バックエンド担当（15人日）

### ⚠️ 優先順位（重要）

バックエンド担当者は**実行基盤から先に着手**すること。

**理由**: AIエージェントビルダーの本質は「AIを動かすこと」。CRUDでエージェントを保存しても、実行基盤がなければ意味がない。

```
優先度: 高 ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 低

[1] Flowise環境構築 → [2] 実行API/Flowise連携 → [3] CRUD API → [4] その他API
    (B-11, B-12)         (B-7, B-8, B-9, B-10)      (B-1〜B-3)     (B-4〜B-6)
```

| 優先度 | タスク群 | 理由 |
|--------|----------|------|
| **1（最優先）** | B-11, B-12: Flowise環境構築 | 全ての実行機能の前提条件 |
| **2（高）** | B-7, B-8: 実行API・Flowise連携 | AIを動かすコア機能 |
| **3（高）** | B-9, B-10: テスト実行・人間チェック | 実行機能の拡張 |
| **4（中）** | B-1〜B-3: CRUD・検索API | 比較的シンプル、フロントでも対応可能 |
| **5（低）** | B-4〜B-6: テンプレ・RAG・公開API | 優先度低め、後回し可 |

> 💡 **補足**: CRUD APIは複雑度が低いため、フロントエンド担当者でも実装可能。バックエンド担当者のスキルは実行基盤に集中させるべき。

---

### API実装

| # | タスク | 工数 | エンドポイント |
|---|--------|------|----------------|
| B-1 | エージェントCRUD API | 1.5人日 | GET/POST/PUT/DELETE /api/agents |
| B-2 | エージェント検索・フィルタ | 1.0人日 | GET /api/agents?search=&tag= |
| B-3 | タグ管理API | 0.5人日 | GET/POST /api/tags |
| B-4 | テンプレート管理API | 1.0人日 | GET /api/templates |
| B-5 | RAG一覧・紐づけAPI | 1.5人日 | GET /api/rag, PUT /api/agents/:id/rag |
| B-6 | 公開状態管理API | 0.5人日 | PUT /api/agents/:id/publish |
| | **小計** | **6.0人日** | |

### 実行基盤

| # | タスク | 工数 | 備考 |
|---|--------|------|------|
| B-7 | エージェント実行API | 2.0人日 | POST /api/agents/:id/execute |
| B-8 | Flowise API連携 | 2.0人日 | Flowise呼び出し実装 |
| B-9 | テスト実行API | 1.0人日 | POST /api/agents/:id/test |
| B-10 | 人間チェック処理 | 1.0人日 | 確認待ち・承認フロー |
| | **小計** | **6.0人日** | |

### インフラ

| # | タスク | 工数 | 備考 |
|---|--------|------|------|
| B-11 | Flowise環境構築 | 1.5人日 | VM構築・インストール |
| B-12 | Flowise初期設定 | 0.5人日 | DB設定・API連携確認 |
| B-13 | Portal/Sprite連携API | 1.0人日 | 外部連携エンドポイント |
| | **小計** | **3.0人日** | |

### バックエンド合計

| 区分 | 工数 |
|------|------|
| API実装 | 6.0人日 |
| 実行基盤 | 6.0人日 |
| インフラ | 3.0人日 |
| **合計** | **15.0人日** |

---

## API仕様（初週で合意必須）

### エージェント管理

```
GET    /api/agents                 # 一覧取得（検索・フィルタ対応）
GET    /api/agents/:id             # 詳細取得
POST   /api/agents                 # 新規作成
PUT    /api/agents/:id             # 更新
DELETE /api/agents/:id             # 削除
PUT    /api/agents/:id/publish     # 公開状態変更
PUT    /api/agents/:id/rag         # RAG紐づけ
```

### 実行

```
POST   /api/agents/:id/execute     # エージェント実行（チャット）
POST   /api/agents/:id/test        # テスト実行
```

### マスタ

```
GET    /api/tags                   # タグ一覧
POST   /api/tags                   # タグ追加
GET    /api/templates              # テンプレート一覧
GET    /api/rag                    # RAG一覧
```

### Portal/Sprite連携

```
GET    /api/external/agents        # 外部向けエージェント一覧
POST   /api/external/execute       # 外部向け実行API
```

---

## スケジュール案

### Week 1（準備・基盤）

| 担当 | タスク |
|------|--------|
| 共通 | API仕様確定・レビュー |
| フロント | モックAPI準備、画面設計 |
| バックエンド | Flowise環境構築（B-11, B-12） |

### Week 2（利用者向け機能）

| 担当 | タスク |
|------|--------|
| フロント | F-1〜F-5（一覧・詳細・チャット画面） |
| バックエンド | B-1〜B-3, B-7〜B-8（CRUD・実行API） |

### Week 3（作成者向け機能）

| 担当 | タスク |
|------|--------|
| フロント | F-6〜F-13（作成者向け画面） |
| バックエンド | B-4〜B-6, B-9〜B-10（テンプレ・テスト・確認） |

### Week 4（統合・テスト）

| 担当 | タスク |
|------|--------|
| 共通 | 結合テスト、バグ修正 |
| バックエンド | B-13（Portal/Sprite連携） |
| 共通 | リリース準備 |

---

## 並行開発のポイント

### フロントエンド

1. **モックAPIを先に作成**して画面開発を先行
2. Week 2後半からバックエンドAPIに切り替え
3. 既存実装（フロービルダー等）を活用

### バックエンド

1. **Week 1でFlowise環境を確立**（ブロッカー排除）
2. APIはシンプルなCRUDから実装
3. 実行APIは最後に統合

### 共通

1. **初週でAPI仕様をFix**（変更は最小限に）
2. 毎日15分の同期ミーティング推奨
3. 問題発生時は即共有

---

## リスクと対策

| リスク | 影響 | 対策 |
|--------|------|------|
| Flowise環境構築の遅延 | 実行機能が作れない | Week 1で最優先対応 |
| API仕様の変更 | 手戻り発生 | 初週でしっかりレビュー |
| 既存実装との不整合 | 改修工数増 | 事前に既存コード確認 |
